$(function(){window.ursConfig={product:"yyd",promark:"BHHeXmu",host:"yuedu.163.com",isHttps:1,includeBox:"login-container",skin:1,page:"login",prdomain:"",placeholder:{account:"邮箱帐号(含手机邮箱)",pwd:"6-16位密码，区分大小写"},needUnLogin:1,defaultUnLogin:0,needQrLogin:0,toolName:"邮箱大师",toolUrl:"http://mail.163.com/dashi/?from=urs",needPrepare:1,needanimation:1,coverBackground:"background:-webkit-radial-gradient(center,rgba(0,0,0,0.3),#000 75%);",iframeShowAnimation:"showAnimation.5s",single:1,notFastReg:0,regUrl:"http://reg.163.com/reg/reg0_new.jsp?product=easyread&amp;url=http://yuedu.163.com/index.do",oauthLoginConfig:[],terms:[{name:"《自定义服务条款01》",url:"http://reg.163.com/agreement.shtml"},{name:"《自定义服务条款02》",url:"http://reg.163.com/agreement.shtml"}],cssDomain:"http://yuedust.yuedu.126.net/assets/css/",cssFiles:"ursLogin.css",frameSize:{width:420,height:358},logincb:function(c,d){if(typeof(targetUrl)!="undefined"){location.href=targetUrl}else{location.reload()}},regcb:function(c){},errMsg:""};var a=new URS(ursConfig);window.mobiReg={};mobiReg.callbackReg=function(c){switch(c){case 0:refreshPage();break;case -1005:YD.popTip("密码不匹配，请重新输入密码");break;case 900:YD.popTip("手机验证码失效，请重新发送验证码");break;case 901:YD.popTip("手机验证码错误，请检查");break;case 400:YD.popTip("此号码已注册，请直接登录");break;case 905:YD.popTip("手机号码格式错误，请检查");break;default:YD.popTip("出错了，请稍后再试");break}};mobiReg.callbackPass=function(c){switch(c){case 0:YD.popTip("密码修改成功");$("#login-layer").hide();location.reload();break;case -1005:YD.popTip("密码不匹配，请重新输入密码");break;case 900:YD.popTip("手机验证码失效，请重新发送验证码");break;case 901:YD.popTip("手机验证码错误，请检查");break;case -1004:YD.popTip("此号码尚未注册，请检查");break;case 905:YD.popTip("手机号码格式错误，请检查");break;default:YD.popTip("出错了，请稍后再试");break}};function b(c){this.eventBind();if(c){if(c.targetUrl){window.targetUrl=c.targetUrl}}}b.prototype.init=function(){};b.prototype.showEmailLogin=function(){if(!$("#x-URS-iframe").length){$("#login-container").html("");a=new URS(ursConfig)}var c=$("#login-layer");c.attr("class","m-login-layer m-login-layer-wy").find("h4").text("网易邮箱登录");if($(".m-loginswitch li.wy").length){$(".m-loginswitch li.wy").attr("class","sj").find("div").text("手机号")}c.show()};b.prototype.showMobileLogin=function(){var c=$("#login-layer"),d;if(c.find("#login-container").length){d='<iframe name="cellPhoneLoginTarget" style="display:none;">						     #document							   <html>							     <head></head>							     <body></body>							   </html>						   </iframe>						   <form action="https://yuedu.163.com/cellPhoneLogin.do" method="post" target="cellPhoneLoginTarget">						       <input type="hidden" name="operation" value="login">						       <div class="row" style="z-index:99999;margin-bottom:16px;">						           <div>						               <div class="cxt-input"><span class="ipt-wrap"><input type="text" name="cellPhone" class="ipt" autocomplete="off" placeholder="手机号码登录"></span></div>						           </div>						       </div>						       <div class="row"><span class="ipt-wrap"><input type="password" placeholder="登录密码" class="ipt" name="password"></span></div>						       <div class="row-3 errortip" style="display:none;"></div>						       <div class="row row-1">						           <input id="mobiLogCookie" type="checkbox" name="remember_me">						           <label for="mobiLogCookie" class="auto">两周内自动登录</label><a class="j-mobilereg" type="pw">忘记密码？</a></div>						       <div class="row j-checkarea" style="display:none;">						           <input type="text" placeholder="验证码" class="ipt checkcodeipt" name="checkCode"><img width="60" height="30" class="checkcodeimg"></div>						       <div class="row row-2">						           <button><span>登录</span></button>						       </div>						       <div class="row"><a class="wyt j-mobilereg">没有帐号？免费注册</a></div>						   </form>';$(".m-loginswitch li.sj").attr("class","wy").find("div").text("邮箱登录");c.find("#login-container").html(d)}else{d='<div class="m-loginwrap">						       <div class="m-login" id="login-container">								   <iframe name="cellPhoneLoginTarget" style="display:none;">								       #document									   <html>									     <head></head>									     <body></body>									   </html>								   </iframe>								   <form action="https://yuedu.163.com/cellPhoneLogin.do" method="post" target="cellPhoneLoginTarget">								       <input type="hidden" name="operation" value="login">								       <div class="row" style="z-index:99999;margin-bottom:16px;">								           <div>								               <div class="cxt-input"><span class="ipt-wrap"><input type="text" name="cellPhone" class="ipt" autocomplete="off" placeholder="手机号码登录"></span></div>								           </div>								       </div>								       <div class="row"><span class="ipt-wrap"><input type="password" placeholder="登录密码" class="ipt" name="password"></span></div>								       <div class="row-3 errortip" style="display:none;"></div>								       <div class="row row-1">								           <input id="mobiLogCookie" type="checkbox" name="remember_me">								           <label for="mobiLogCookie" class="auto">两周内自动登录</label><a class="j-mobilereg" type="pw">忘记密码？</a></div>								       <div class="row j-checkarea" style="display:none;">								           <input type="text" placeholder="验证码" class="ipt checkcodeipt" name="checkCode"><img width="60" height="30" class="checkcodeimg"></div>								       <div class="row row-2">								           <button><span>登录</span></button>								       </div>								       <div class="row"><a class="wyt j-mobilereg">没有帐号？免费注册</a></div>								   </form>							   </div>							   <div class="m-loginswitch">							       <h6>其他帐号登录：</h6>							       <ul>							           <li class="wy"><a><span class="login-icon"></span><div>邮箱登录</div></a></li>							           <li class="xl xllogin"><a><span class="login-icon"></span><div>新浪微博</div></a></li>							           <li class="tx txlogin"><a><span class="login-icon"></span><div>腾讯微博</div></a></li>							           <li class="wx wxlogin"><a><span class="login-icon"></span><div>微信</div></a></li>							       </ul>							   </div>						   </div>';c.find(".content").html(d)}c.attr("class","m-login-layer m-login-layer-mb").find("h4").text("手机号登录");c.show()};b.prototype.sinaLogin=function(){window.open("https://api.weibo.com/oauth2/authorize?client_id=3626227865&response_type=code&state=&redirect_uri=http%3A%2F%2Fyuedu.163.com%2FweiboCallback.do%3Fsite%3D1%26from%3Dlogin%26fromHttps%3Dfalse&forcelogin=false&display=","sinaLoginWindow")};b.prototype.tencentLogin=function(){window.open("https://open.t.qq.com/cgi-bin/oauth2/authorize?client_id=801078487&response_type=code&state=&redirect_uri=http%3A%2F%2Fyuedu.163.com%2FweiboCallback.do%3Fsite%3D4%26from%3Dlogin%26fromHttps%3Dfalse&forcelogin=false","tencentWeiboLoginWindow")};b.prototype.weixinLogin=function(){window.open("https://open.weixin.qq.com/connect/qrconnect?response_type=code&state=&redirect_uri=http%3A%2F%2Fyuedu.163.com%2FweiboCallback.do%3Fsite%3D7%26from%3Dlogin%26fromHttps%3Dfalse&scope=snsapi_login&appid=wxc662b4239bb6644e","weixinLoginWindow")};b.prototype.logout=function(c){if(c){location.href="http://"+window.location.host+"/logoutRedir.do?target="+encodeURIComponent(c)}else{location.href="http://"+window.location.host+"/logout"}};b.prototype.checkMobile=function(){var d=$("#login-layer");var e="";var c=d.data("type");if(c=="mobileForget"){e="手机号找回密码"}else{e="手机号注册"}d.attr("class","m-login-layer m-login-layer-mb");d.find("h4").text(e);d.find(".content").html('<div class="m-regwrap">											<div class="m-regstep-1">											  <p>需要验证你的手机号码，该号码不会对其他人公开</p>											  <p style="display: none;" id="mobileCodeTip"><em></em></p>											  <p class="inputpara">											    <input type="text" placeholder="请输入手机号码">											    <a class="next j-getma">获取验证码</a>											  </p>											</div>											<div class="m-regback">											  <a class="backtolog">&lt;&lt;返回登录</a>											</div>										  </div>')};b.prototype.eventBind=function(){var c=this;c.errorCode=[];c.errorCode["-1001"]="对不起，您的验证码过期。";c.errorCode["-1002"]="对不起，您的验证码无效。";c.errorCode["-1003"]="对不起，此号码已注册。";c.errorCode["-1004"]="对不起，此号码尚未注册。";c.errorCode["-1005"]="对不起，您的密码错误。";c.errorCode["900"]="对不起，您的手机验证码失效。";c.errorCode["901"]="对不起，您的手机验证码错误。";c.errorCode["902"]="对不起，您的短信请求次数超过限制。";c.errorCode["905"]="对不起，您的手机号码格式错误。";var e=$("#login-layer");var d=function(){var f=59;c.Timer=setInterval(function(){var g="";if(f>9){g="00:"+f}else{g="00:0"+f}$(".m-regwrap .timer").text(g);f--;if(f<0){$(".j-ReGetma").removeClass("blocked");clearInterval(c.Timer)}},1000)};e.on("click","a.j-close",function(){e.hide()});e.on("click","li.sj",function(){c.showMobileLogin();$(this).attr("class","wy").html('<a><span class="login-icon"></span><div>邮箱登录</div></a>')}).on("click","li.wy",function(){c.showEmailLogin();$(this).attr("class","sj").html('<a><span class="login-icon"></span><div>手机号</div></a>')}).on("click","li.xl",function(){c.sinaLogin()}).on("click","li.tx",function(){c.tencentLogin()}).on("click","li.wx",function(){c.weixinLogin()});e.on("click",'.j-mobilereg[type="pw"]',function(){e.data("type","mobileForget");c.checkMobile()});e.on("click",".wyt.j-mobilereg",function(){e.data("type","mobileReg");c.checkMobile()});e.on("click",".backtolog",function(){c.showMobileLogin()});e.on("click",".j-getma",function(){var f=$(".inputpara input").val();if(f.length!=11||f[0]!="1"){$("#mobileCodeTip em").text("请输入正确的手机号码");$("#mobileCodeTip").show()}else{e.data("phoneNumber",f);var g=e.data("type")==="mobileReg"?1:2;$.ajax({url:"/cellPhoneAccount.do",type:"POST",data:{operation:"verifyCode",type:g,cellPhone:f},success:function(h){if(h.resultCode===0){var i="<p><span>已经向手机号</span><span>"+f+'</span><span>发送验证短信</span></p>										    <p style="display:none;" id="mobileCodeTip"><em></em></p>										    <p class="inputpara">										        <input type="text" placeholder="请输入验证码"><a class="next j-sendma">下一步</a>										    </p>										    <p style="margin:10px 0 0 0;">										    	<a class="link changecell">选择其他手机号码</a><span class="sep">|</span><a class="link j-ReGetma blocked">重新获取验证码</a><span class="timer">00:60</span>										    </p>';$(".m-regstep-1").html(i);d()}else{$("#mobileCodeTip em").text(c.errorCode[h.resultCode]);$("#mobileCodeTip").show()}},error:function(){}})}});e.on("click",".j-ReGetma",function(){var h=$(this);if(!h.hasClass("blocked")){h.addClass("blocked");var g=e.data("type")==="mobileReg"?1:2;var f=e.data("phoneNumber");$.ajax({url:"/cellPhoneAccount.do",type:"POST",data:{operation:"verifyCode",type:g,cellPhone:f},success:function(i){if(i.resultCode===0){d()}else{$("#mobileCodeTip em").text(c.errorCode[i.resultCode]);$("#mobileCodeTip").show()}},error:function(){}})}});e.on("click",".changecell",function(){if(c.Timer){clearInterval(c.Timer)}c.checkMobile()});e.on("click",".next.j-sendma",function(){var h=$(".inputpara input").val();var g=e.data("type")==="mobileReg"?1:2;var f=e.data("phoneNumber");$.ajax({url:"/cellPhoneAccount.do",type:"POST",data:{operation:"checkCode",type:g,cellPhone:f,verifyCode:h},success:function(k){if(k.resultCode===0){var j=k.signature;var i=k.cellPhone;var n=k.verifyCode;if(g===1){var o='<div>										        <iframe name="cellPhoneRegTarget" style="display:none;"></iframe>										        <form id="cellPhoneRegForm" action="https://yuedu.163.com/cellPhoneAccount.do" method="post" target="cellPhoneRegTarget">										            <div class="m-regstep-2">										                <input type="hidden" name="operation" value="register">										                <input type="hidden" name="cellPhone" value="'+i+'">										                <input type="hidden" name="verifyCode" value="'+n+'">										                <input type="hidden" name="signature" value="'+j+'">										                <div>										                    <p><span>设置昵称</span><em class="j-warning0" style="display: none;">昵称长度2-15字符</em></p>										                    <p>										                        <input class="nickname" type="text" placeholder="请输入2-15个字的昵称" name="nickName">										                    </p>										                    <p>性别</p>										                    <p><span class="gender" style="margin:0 90px 0 0;"><input type="radio" name="gender" value="1" id="male" checked=""><label for="male">男</label></span><span class="gender"><input type="radio" name="gender" value="0" id="female"><label for="female">女</label></span></p>										                </div>										                <div>										                    <p><span>设置密码</span><em class="j-warning1" style="display:none;">密码长度不少于6位</em></p>										                    <p>										                        <input class="pw pw-f" type="password" placeholder="不少于6位" name="password">										                    </p>										                    <p><span>确认密码</span><em class="j-warning2" style="display:none;">两次密码不一致</em></p>										                    <p>										                        <input class="pw pw-s" type="password" placeholder="不少于6位" name="passwordConfirm">										                    </p>										                </div>										                <p>										                    <a class="done j-done-1">完成</a>										                </p>										                <p><em class="reg-result" style="display:none;"></em></p>										            </div>										        </form>										    </div>										    <div class="m-regback"><a class="backtolog">&lt;&lt;返回登录</a></div>';$(".m-regwrap").html(o);var l={nickname:false,password1:false,password2:false};$("#cellPhoneRegForm .nickname").on("input propertychange",function(){var q=$(this);var p=q.val();if(p.length<2||p.length>15){$("em.j-warning0").show()}else{$("em.j-warning0").hide();l.nickname=true}});$("#cellPhoneRegForm .pw-f").on("input propertychange",function(){var q=$(this);var p=q.val();if(p.length<6){$("em.j-warning1").show()}else{$("em.j-warning1").hide();l.password1=true}});$("#cellPhoneRegForm .pw-s").on("input propertychange",function(){var q=$(this);var p=q.val();if(p!==$(".pw-f").val()){$("em.j-warning2").show()}else{$("em.j-warning2").hide();l.password2=true}});$("#cellPhoneRegForm .j-done-1").on("click",function(){if(l.nickname&&l.password1&&l.password2){$("#cellPhoneRegForm").submit()}})}else{var o='<div>										        <iframe name="cellPhoneRegTarget" style="display:none;"></iframe>										        <form id="cellPhoneRepwdForm" action="https://yuedu.163.com/cellPhoneAccount.do" method="post" target="cellPhoneRegTarget">										            <div class="m-regstep-2">										                <input type="hidden" name="operation" value="modifyPassword">										                <input type="hidden" name="cellPhone" value="'+i+'">										                <input type="hidden" name="verifyCode" value="'+n+'">										                <input type="hidden" name="signature" value="'+j+'">										                <div>										                    <p><span>设置密码</span><em class="j-warning1" style="display:none;">密码长度不少于6位</em></p>										                    <p>										                        <input class="pw pw-f" type="password" placeholder="不少于6位" name="password">										                    </p>										                    <p><span>确认密码</span><em class="j-warning2" style="display:none;">两次密码不一致</em></p>										                    <p>										                        <input class="pw pw-s" type="password" placeholder="不少于6位" name="passwordConfirm">										                    </p>										                </div>										                <p>										                    <a class="done j-done-1" disabled="">完成</a>										                </p>										                <p><em class="reg-result" style="display:none;"></em></p>										            </div>										        </form>										    </div>										    <div class="m-regback"><a class="backtolog">&lt;&lt;返回登录</a></div>';$(".m-regwrap").html(o);var m={password1:false,password2:false};$("#cellPhoneRepwdForm .pw-f").on("input propertychange",function(){var q=$(this);var p=q.val();if(p.length<6){$("em.j-warning1").show()}else{$("em.j-warning1").hide();m.password1=true}});$("#cellPhoneRepwdForm .pw-s").on("input propertychange",function(){var q=$(this);var p=q.val();if(p!==$(".pw-f").val()){$("em.j-warning2").show()}else{$("em.j-warning2").hide();m.password2=true}});$("#cellPhoneRepwdForm .j-done-1").on("click",function(){if(m.password1&&m.password2){$("#cellPhoneRepwdForm").submit()}})}}else{$("#mobileCodeTip em").text(c.errorCode[k.resultCode]);$("#mobileCodeTip").show()}}})})};window.YueduLogin=b;window.login163=function(d){var c=new b({targetUrl:d});c.showEmailLogin()};window.log163out=function(d){var c=new b();c.logout(d)}});