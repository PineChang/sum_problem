(function(){window.NEJ=window.NEJ||{};NEJ.O={};NEJ.R=[];NEJ.F=function(){return!1};NEJ.P=function(_namespace){if(!_namespace||!_namespace.length)return null;var _package=window;for(var a=_namespace.split("."),l=a.length,i=a[0]=="window"?1:0;i<l;_package=_package[a[i]]=_package[a[i]]||{},i++);return _package};NEJ.Q=function(_context,_namespace){_context=_context||NEJ.O;var _arr=_namespace.split(".");for(var i=0,l=_arr.length;i<l;i++){_context=_context[_arr[i]];if(!_context)break}return _context};NEJ.C=function(){var _isNotFunction=function(){return NEJ.O.toString.call(arguments[0])!="[object Function]"};var _getMethodName=function(_value,_map){for(var x in _map)if(_value==_map[x])return x;return null};var _mmap={__init:0,__reset:1,__destroy:2,__initNode:3,__doBuild:4,__onShow:5,__onHide:6,__onRefresh:7},_umap={__supInit:0,__supReset:1,__supDestroy:2,__supInitNode:3,__supDoBuild:4,__supOnShow:5,__supOnHide:6,__supOnRefresh:7};return function(){var _class=function(){this.__cp__();return this.__init.apply(this,arguments)};_class.prototype.__cp__=NEJ.F;_class.prototype.__init=NEJ.F;_class._$extend=function(_super,_static){if(_isNotFunction(_super))return;if(_static==null||!!_static)NEJ.X(this,_super,_isNotFunction);this._$super=_super;this._$supro=_super.prototype;var _parent=function(){};_parent.prototype=_super.prototype;this.prototype=new _parent;var _prototype=this.prototype;_prototype.constructor=this;var _tmp;for(var x in _mmap){_tmp=_getMethodName(_mmap[x],_umap);if(!_tmp||!this._$supro[x])continue;_prototype[x]=function(_name){return function(){this[_name].apply(this,arguments)}}(_tmp)}var _pmap={};for(var x in _umap){_tmp=_getMethodName(_umap[x],_mmap);if(!_tmp||!this._$supro[_tmp])continue;_pmap[_tmp]=_super;_prototype[x]=function(_name){return function(){var _result,_parent=this.__ancestor__[_name],_method=_parent.prototype[_name];this.__ancestor__[_name]=_parent._$super||_super;if(!!_method)_result=_method.apply(this,arguments);this.__ancestor__[_name]=_super;return _result}}(_tmp)}_prototype.__cp__=function(){this.__ancestor__=NEJ.X({},_pmap)};_prototype.__super=_prototype.__supInit;return _prototype};return _class}}();NEJ.X=function(_object,_config,_filter){if(!_object||!_config)return _object;_filter=_filter||NEJ.F;for(var x in _config){if(_config.hasOwnProperty(x)&&!_filter(_config[x],x))_object[x]=_config[x]}return _object};NEJ.EX=function(_object,_config){if(!_object||!_config)return _object;for(var x in _object){if(_object.hasOwnProperty(x)&&_config[x]!=null)_object[x]=_config[x]}return _object};var _extpro=Function.prototype;_extpro._$aop=function(_before,_after){var f=NEJ.F,_after=_after||f,_before=_before||f,_handler=this;return function(){var _event={args:NEJ.R.slice.call(arguments,0)};_before(_event);if(!_event.stopped){_event.value=_handler.apply(this,_event.args);_after(_event)}return _event.value}};_extpro._$bind=function(){var _args=arguments,_object=arguments[0],_function=this;return function(){var _argc=NEJ.R.slice.call(_args,1);NEJ.R.push.apply(_argc,arguments);return _function.apply(_object||window,_argc)}};_extpro._$bind2=function(){var _args=arguments,_object=NEJ.R.shift.call(_args),_function=this;return function(){NEJ.R.push.apply(arguments,_args);return _function.apply(_object||window,arguments)}};var _extpro=String.prototype;if(!_extpro.trim){_extpro.trim=function(){var _reg=/(?:^\s+)|(?:\s+$)/g;return function(){return this.replace(_reg,"")}}()}if(!window.MWF)window.MWF=NEJ;if(!window.mwf)window.mwf=NEJ.P("nej");if(!window.console){NEJ.P("console").log=NEJ.F;NEJ.P("console").error=NEJ.F}})();
(function(){var _=NEJ.P,_o=NEJ.O,_p=_("nej.p"),_platform=window.navigator.platform,_useragent=window.navigator.userAgent;var _is={mac:_platform,win:_platform,linux:_platform,ipad:_useragent,ipod:_useragent,iphone:_platform,android:_useragent};_p._$IS=_is;for(var x in _is)_is[x]=(new RegExp(x,"i")).test(_is[x]);_is.ios=_is.ipad||_is.iphone||_is.ipod;_is.tablet=_is.ipad;_is.desktop=_is.mac||_is.win||_is.linux&&!_is.android;var _kernel={engine:"unknow",release:"unknow",browser:"unknow",version:"unknow",prefix:{css:"",pro:"",clz:""}};_p._$KERNEL=_kernel;if(/msie\s+(.*?);/i.test(_useragent)){_kernel.engine="trident";_kernel.browser="ie";_kernel.version=RegExp.$1;_kernel.prefix={css:"ms",pro:"ms",clz:"MS",evt:"MS"};var _test={6:"2.0",7:"3.0",8:"4.0",9:"5.0",10:"6.0"};_kernel.release=_test[document.documentMode]||_test[parseInt(_kernel.version)]}else if(/webkit\/?([\d.]+?)(?=\s|$)/i.test(_useragent)){_kernel.engine="webkit";_kernel.release=RegExp.$1||"";_kernel.prefix={css:"webkit",pro:"webkit",clz:"WebKit"}}else if(/rv\:(.*?)\)\s+gecko\//i.test(_useragent)){_kernel.engine="gecko";_kernel.release=RegExp.$1||"";_kernel.browser="firefox";_kernel.prefix={css:"Moz",pro:"moz",clz:"Moz"};if(/firefox\/(.*?)(?=\s|$)/i.test(_useragent))_kernel.version=RegExp.$1||""}else if(/presto\/(.*?)\s/i.test(_useragent)){_kernel.engine="presto";_kernel.release=RegExp.$1||"";_kernel.browser="opera";_kernel.prefix={css:"O",pro:"o",clz:"O"};if(/version\/(.*?)(?=\s|$)/i.test(_useragent))_kernel.version=RegExp.$1||""}if(_kernel.browser=="unknow"){var _test=["chrome","maxthon","safari"];for(var i=0,l=_test.length,_name;i<l;i++){_name=_test[i]=="safari"?"version":_test[i];if((new RegExp(_name+"/(.*?)(?=\\s|$)","i")).test(_useragent)){_kernel.browser=_test[i];_kernel.version=RegExp.$1.trim();break}}}_p._$SUPPORT={};var _notd=_kernel.engine!="trident";_p._$NOT_PATCH={gecko:_kernel.engine!="gecko",webkit:_kernel.engine!="webkit",presto:_kernel.engine!="presto",trident0:_notd||_kernel.release>"2.0",trident1:_notd||_kernel.release<"6.0",trident2:_notd||_kernel.release>"3.0",trident:_notd||_kernel.release>="6.0"}})();
(function(){var _c=NEJ.P("nej.c"),_cache={};var _url2host=function(){var _reg=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(_url){_url=_url||"";if(_reg.test(_url))return RegExp.$1;return location.protocol+"//"+location.host}}();var _doInit=function(){var _doInitProxy=function(_list,_map){if(!_list||!_list.length)return;for(var i=0,l=_list.length,_path;i<l;i++){_path=_list[i];if(_path.indexOf("://")>0)_map[_url2host(_path)]=_path}};return function(_config){_c.__set("root",_config.root||"/res/");_c.__set("ajax.swf",_config.ajax||_c._$get("root")+"nej_proxy_flash.swf");_c.__set("clipboard.swf",_config.clipboard||_c._$get("root")+"nej_clipboard.swf");_c.__set("chart.swf",_config.chart||_c._$get("root")+"nej_flex_chart.swf");_cache.frames={};_doInitProxy(_config.p_frame,_cache.frames);_cache.flashs={};_doInitProxy(_config.p_flash,_cache.flashs)}}();_c.__set=function(_key,_value){_cache[_key]=_value};_c._$get=function(_key){return _cache[_key]};_c._$getFrameProxy=function(_url){var _host=_url2host(_url);return _cache.frames[_host]||_host+"/res/nej_proxy_frame.html"};_c._$getFlashProxy=function(_url){return _cache.flashs[_url2host(_url)]};_doInit(window.NEJ_CONF||NEJ.O)})();
(function(){var _=NEJ.P,_p=_("nej.p"),_c=_("nej.c"),_config=window.NEJ_CONF||NEJ.O;if(_p._$NOT_PATCH.trident)return;_c.__set("storage.swf",_config.storage||_c._$get("root")+"nej_storage.swf");if(_p._$KERNEL.release<"4.0"){_c.__set("blank.png",_config.blank||_c._$get("root")+"nej_blank.gif")}var _list=_config.xdr,_reg0=/^(https?:\/\/.*?)(?=\/|$)/i,_reg1=/[\/?=&]/i;var _doParseUrl2Key=function(_url){return(_reg0.test(_url)?RegExp.$1:"").toLowerCase()};if(!!_list&&!!_list.length)for(var i=_list.length-1,_url,_key;i>=0;i--){_url=_list[i];_key=_doParseUrl2Key(_url);if(!!_key)_c.__set(_key,_url)}_c._$getProxyURL=function(_url){var _key=_doParseUrl2Key(_url);if(!_key){if(_reg1.test(_url)){_key=location.protocol+"//"+location.host}else if(_url.indexOf("://")<0){_key=location.protocol+"//"+_url}else{_key=_url}}return _c._$get(_key)||_key+"/res/nej_xdomain.html"}})();
(function(){var _=NEJ.P,_c=_("nej.c"),_p=_("nej.g"),_seed=+(new Date);_p._$CODE_NOTFUND=1e4-_seed;_p._$CODE_NOTASGN=10001-_seed;_p._$CODE_NOTSPOT=10002-_seed;_p._$CODE_TIMEOUT=10003-_seed;_p._$CODE_ERREVAL=10004-_seed;_p._$CODE_ERRCABK=10005-_seed;_p._$CODE_ERRSERV=10006-_seed;_p._$CODE_ERRABRT=10007-_seed;_p._$HEAD_CT="Content-Type";_p._$HEAD_CT_PLAN="text/plain";_p._$HEAD_CT_FILE="multipart/form-data";_p._$HEAD_CT_FORM="application/x-www-form-urlencoded";_p._$BLANK_IMAGE=_c._$get("blank.png")||"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_f=NEJ.F,_e=_("nej.e"),_h=_("nej.h"),_u=_("nej.u");var _isTypeOf=function(_data,_type){try{_type=_type.toLowerCase();if(_data===null)return _type=="null";if(_data===undefined)return _type=="undefined";return _o.toString.call(_data).toLowerCase()=="[object "+_type+"]"}catch(e){return!1}};_u._$isFunction=function(_data){return _isTypeOf(_data,"function")};_u._$isString=function(_data){return _isTypeOf(_data,"string")};_u._$isNumber=function(_data){return _isTypeOf(_data,"number")};_u._$isBoolean=function(_data){return _isTypeOf(_data,"boolean")};_u._$isDate=function(_data){return _isTypeOf(_data,"date")};_u._$isArray=function(_data){return _isTypeOf(_data,"array")};_u._$isObject=function(_data){return _isTypeOf(_data,"object")};_u._$length=function(){var _reg=/[^\x00-\xfff]/g;return function(_content){return(""+(_content||"")).replace(_reg,"**").length}}();_u._$indexOf=function(_list,_item){var _filter=_u._$isFunction(_item)?_item:function(_value){return _value===_item},_index=_u._$forIn(_list,_filter);return _index!=null?_index:-1};_u._$binSearch=function(){var _docheck;var _doSearch=function(_list,_low,_high){if(_low>_high)return-1;var _middle=Math.ceil((_low+_high)/2),_result=_docheck(_list[_middle],_middle,_list);if(_result==0)return _middle;if(_result<0)return _doSearch(_list,_low,_middle-1);return _doSearch(_list,_middle+1,_high)};return function(_list,_check){_docheck=_check||_f;return _doSearch(_list,0,_list.length-1)}}();_u._$reverseEach=function(_list,_callback,_this){if(!_list||!_list.length||!_u._$isFunction(_callback))return null;for(var i=_list.length-1;i>=0;i--)if(!!_callback.call(_this,_list[i],i,_list))return i;return null};_u._$forEach=function(_list,_callback,_this){if(!_list||!_list.length||!_u._$isFunction(_callback))return this;if(!!_list.forEach){_list.forEach(_callback,_this);return this}for(var i=0,l=_list.length;i<l;i++)_callback.call(_this,_list[i],i,_list);return this};_u._$forIn=function(_list,_callback,_this){if(!_list||!_u._$isFunction(_callback))return null;if(_list.length!=null){if(_list.length>0)for(var i=0,l=_list.length;i<l;i++)if(!!_callback.call(_this,_list[i],i,_list))return i}if(_u._$isObject(_list)){for(var x in _list)if(_list.hasOwnProperty(x)&&!!_callback.call(_this,_list[x],x,_list))return x}return null};_u._$mergeList=function(_slist,_dlist,_options){_slist=_slist||[];_options=_options||_o;var _added=!!_options.union,_begin=!!_options.begin,_compare=_options.compare,_floop=_added&&_begin?_u._$reverseEach:_u._$forEach;_floop(_dlist,function(_item){if(!!_compare)_compare=_compare._$bind2(_item);var _index=_u._$indexOf(_slist,_compare||_item);if(_index>=0)_slist.splice(_index,1);if(_added)_slist[_begin?"unshift":"push"](_item)});return _slist};_u._$encode=function(_map,_content){if(!_map||!_content||!_content.replace)return _content||"";return _content.replace(_map.r,function($1){var _result=_map[!_map.i?$1.toLowerCase():$1];return _result!=null?_result:$1})};_u._$escape=function(){var _map={r:/\<|\>|\&|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(_content){return _u._$encode(_map,_content)}}();_u._$unescape=function(){var _map={r:/\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&#39;":"'","&quot;":'"',"<br/>":"\n"};return function(_content){return _u._$encode(_map,_content)}}();_u._$format=function(){var _map={i:!0,r:/\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\b/g},_12cc=["上午","下午"],_12ec=["A.M.","P.M."],_week=["日","一","二","三","四","五","六"],_cmon=["一","二","三","四","五","六","七","八","九","十","十一","十二"],_emon=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];var _fmtnmb=function(_number){_number=parseInt(_number)||0;return(_number<10?"0":"")+_number};var _fmtclc=function(_hour){return _hour<12?0:1};return function(_time,_format,_12time){if(!_time||!_format)return"";_time=_u._$var2date(_time);_map.yyyy=_time.getFullYear();_map.yy=(""+_map.yyyy).substr(2);_map.M=_time.getMonth()+1;_map.MM=_fmtnmb(_map.M);_map.eM=_emon[_map.M-1];_map.cM=_cmon[_map.M-1];_map.d=_time.getDate();_map.dd=_fmtnmb(_map.d);_map.H=_time.getHours();_map.HH=_fmtnmb(_map.H);_map.m=_time.getMinutes();_map.mm=_fmtnmb(_map.m);_map.s=_time.getSeconds();_map.ss=_fmtnmb(_map.s);_map.ms=_time.getMilliseconds();_map.w=_week[_time.getDay()];var _cc=_fmtclc(_map.H);_map.ct=_12cc[_cc];_map.et=_12ec[_cc];if(!!_12time){_map.H=_map.H%12}return _u._$encode(_map,_format)}}();_u._$var2date=function(_time){var _date=_time;if(_u._$isString(_time))_date=new Date(Date.parse(_time));if(!_u._$isDate(_time))_date=new Date(_time);return _date};_u._$fixed=function(_float,_fraction){return(new Number(_float)).toFixed(_fraction)};_u._$absolute=function(){var _reg0=/([^\/:])\/.*$/,_reg1=/\/[^\/]+$/,_reg2=/[#\?]/,_base=location.href.split(/[?#]/)[0],_anchor=document.createElement("a");var _isAbsolute=function(_uri){return(_uri||"").indexOf("://")>0};var _doFormat=function(_uri){return(_uri||"").split(_reg2)[0].replace(_reg1,"/")};var _doMergeURI=function(_uri,_root){if(_uri.indexOf("/")==0)return _root.replace(_reg0,"$1")+_uri;return _doFormat(_root)+_uri};_base=_doFormat(_base);return function(_uri,_root){_uri=(_uri||"").trim();if(!_isAbsolute(_root))_root=_base;if(!_uri)return _root;if(_isAbsolute(_uri))return _uri;_uri=_doMergeURI(_uri,_root);_anchor.href=_uri;_uri=_anchor.href;return _isAbsolute(_uri)?_uri:_anchor.getAttribute("href",4)}}();_u._$url2origin=function(){var _reg=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(_url){if(_reg.test(_url||""))return RegExp.$1.toLowerCase();return""}}();_u._$dom2object=function(_dom,_obj){if(!_dom)return _obj;var _name=_dom.tagName.toLowerCase(),_list=_e._$getChildren(_dom);if(!_list||!_list.length){_obj[_name]=_dom.textContent||_dom.text||"";return _obj}var _tmp={};_obj[_name]=_tmp;_u._$forEach(_list,function(_node){_u._$dom2object(_node,_tmp)});return _obj};_u._$xml2object=function(_xml){try{return _u._$dom2object(_e._$xml2dom(_xml),{})}catch(ex){return null}};_u._$string2object=function(_string,_split){var _obj={};_u._$forEach((_string||"").split(_split),function(_name){var _brr=_name.split("=");if(!_brr||!_brr.length)return;var _key=_brr.shift();if(!_key)return;_obj[decodeURIComponent(_key)]=decodeURIComponent(_brr.join("="))});return _obj};_u._$object2string=function(_object,_split,_encode){if(!_object)return"";var _arr=[];for(var x in _object){_arr.push(encodeURIComponent(x)+"="+(!!_encode?encodeURIComponent(_object[x]):_object[x]))}return _arr.join(_split||",")};_u._$query2object=function(_query){return _u._$string2object(_query,"&")};_u._$object2query=function(_object){return _u._$object2string(_object,"&",!0)};_u._$object2array=function(_object){return _h.__col2array(_object)};_u._$array2object=function(_list,_filter){var _result={};_u._$forEach(_list,function(_item){var _key=_item;if(!!_filter){_key=_filter(_item)}_result[_key]=_item});return _result};_u._$safeDelete=function(_object,_name){if(!_u._$isArray(_name)){try{delete _object[_name]}catch(e){_object[_name]=undefined}return this}_u._$forEach(_name,_u._$safeDelete._$bind(_u,_object));return this};_u._$randString=function(){var _chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";return function(_length){_length=_length||10;var _result=[];for(var i=0,_rnum;i<_length;++i){_rnum=Math.floor(Math.random()*_chars.length);_result.push(_chars.charAt(_rnum))}return _result.join("")}}();_u._$randNumber=function(_min,_max){return Math.floor(Math.random()*(_max-_min)+_min)};_u._$randNumberString=function(_length){_length=Math.max(0,Math.min(_length||8,30));var _min=Math.pow(10,_length-1),_max=_min*10;return _u._$randNumber(_min,_max).toString()}})();
(function(){var _=NEJ.P,_r=NEJ.R,_p=_("nej.p"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_h=_("nej.h");var _prefix=_p._$KERNEL.prefix,_suport=_p._$SUPPORT,_2dmap={scale:"scale({x|1},{y|1})",rotate:"rotate({a})",translate:"translate({x},{y})"},_3dmap={scale:"scale3d({x|1},{y|1},{z|1})",rotate:"rotate3d({x},{y},{z},{a})",translate:"translate3d({x},{y},{z})"},_cssmap={transition:!0,transform:!0,animation:!0,keyframes:!0,box:!0,"box-pack":!0,"box-flex":!0,marquee:!0,"border-radius":!0,"user-select":!0};var _doInit=function(){var _matrix=_h.__getCSSMatrix();_suport.css3d=!!_matrix&&_matrix.m41!=null;var _reg=/-([a-z])/g;for(var x in _cssmap){_cssmap[_doFormatStyleName(x)]=_cssmap[x]}};var _doFormatStyleName=function(){var _reg=/-([a-z])/g;return function(_name){_name=_name||"";return _name.replace(_reg,function($1,$2){return $2.toUpperCase()})}}();var _getTransformTemplate=function(_name){return(!_suport.css3d?_2dmap:_3dmap)[_name]};var _getClassList=function(){var _reg=/\s+/;return function(_class){_class=(_class||"").trim();return!!_class?_class.split(_reg):null}}();var _doClassName=function(_element,_type,_class){_element=_e._$get(_element);if(!_element)return;_u._$forEach(_getClassList(_class),function(_clazz){_element.classList[_type](_clazz)})};_h.__col2array=function(_list){return _r.slice.call(_list,0)};_h.__getChildren=function(_element){return _h.__col2array(_element.children)};_h.__getElementsByClassName=function(_element,_class){return _h.__col2array(_element.getElementsByClassName(_class))};_h.__addClassName=function(_element,_add){_doClassName(_element,"add",_add)};_h.__delClassName=function(_element,_del){_doClassName(_element,"remove",_del)};_h.__replaceClassName=function(_element,_del,_add){_doClassName(_element,"remove",_del);_doClassName(_element,"add",_add)};_h.__hasClassName=function(_element,_class){_element=_e._$get(_element);if(!_element)return!1;var _list=_element.classList;if(!_list||!_list.length)return!1;return _u._$indexOf(_getClassList(_class),function(_clazz){return _list.contains(_clazz)})>=0};_h.__hoverElement=function(_element,_clazz){};_h.__fixedElement=function(_element){};_h.__focusElement=function(){var _onBlur=function(_clazz,_event){var _element=_v._$getElement(_event);if(!_element.value)_e._$delClassName(_element,_clazz)};var _onFocus=function(_clazz,_event){_e._$addClassName(_v._$getElement(_event),_clazz)};return function(_element,_mode,_clazz){if(_mode==1){_v._$addEvent(_element,"blur",_onBlur._$bind(null,_clazz))}if(_mode==1||_mode==-1){_v._$addEvent(_element,"focus",_onFocus._$bind(null,_clazz))}}}();_h.__serializeDOM2XML=function(_dom){return(new XMLSerializer).serializeToString(_dom)||""};_h.__parseDOMFromXML=function(_xml){var _root=(new DOMParser).parseFromString(_xml,"text/xml").documentElement;return _root.nodeName=="parsererror"?null:_root};_h.__fullScreen=function(_element){};_h.__mask=function(_element){return null};_h.__unmask=function(_element){return null};_h.__pushHistory=function(_hash){};_h.__formatEventArgs=function(){var _args=_h.__col2array(arguments);_args[0]=_e._$get(_args[0]);if(!_args[0])return null;_args[1]=(_args[1]||"").toLowerCase();if(!_args[1])return null;return _args};_h.__checkEvent=function(){var _tmap={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},_emap={transitionend:"TransitionEnd",animationend:"AnimationEnd",animationstart:"AnimationStart",animationiteration:"AnimationIteration"};var _doCompletePrefix=function(_type){return(_prefix.evt||_prefix.pro)+_type};return function(){var _args=_h.__formatEventArgs.apply(_h,arguments);if(!_args)return;var _type1=_emap[_args[1]],_type2=_tmap[_args[1]];if(!!_type1){_args[4]=_args[1];_args[1]=_doCompletePrefix(_type1)}else if(!!_type2){var _name="on"+_args[1];if(!(_name in _args[0])){_args[4]=_args[1];_args[1]=_type2}}return _args}}();_h.__addEvent=function(){var _args=arguments;_args[0].addEventListener(_args[1],_args[2],!!_args[3])};_h.__delEvent=function(){var _args=arguments;_args[0].removeEventListener(_args[1],_args[2],!!_args[3])};_h.__dispatchEvent=function(_element,_type,_options){var _event=document.createEvent("Event");_event.initEvent(_type,!0,!0);NEJ.X(_event,_options);_element.dispatchEvent(_event)};_h.__getCSSMatrix=function(){var _reg0=/\((.*?)\)/,_reg1=/\s*,\s*/,_list=["m11","m12","m21","m22","m41","m42"];var _parse=function(_matrix){var _obj={};if(_reg0.test(_matrix||"")){_u._$forEach(RegExp.$1.split(_reg1),function(_value,_index){_obj[_list[_index]]=_value||""})}return _obj};return function(_matrix){if(!!window.CSSMatrix)return new CSSMatrix(_matrix);var _name=_prefix.clz+"CSSMatrix";if(!!window[_name])return new window[_name](_matrix||"");return _parse(_matrix)}}();_h.__getTransformValue=function(){var _reg=/\{(.*?)\}/g;return function(_name,_map){_map=_map||o;var _tpl=_getTransformTemplate(_name);return!_tpl?"":_tpl.replace(_reg,function($1,$2){var _arr=$2.split("|");return _map[_arr[0]]||_arr[1]||"0"})}}();_h.__applyStyle=function(_element,_name,_value){_element.style[_h.__getStyleName(_name)]=_value};_h.__getStyleName=function(){var _reg=/^[a-z]/,_pfx=_prefix.css;var _addPrefix=function(_name){return _name.replace(_reg,function($1){return _pfx+$1.toUpperCase()})};return function(_name){_name=_doFormatStyleName(_name);var _pfxed=_h.__checkStyleName(_name,_cssmap);return _pfxed?_addPrefix(_name):_name}}();_h.__checkStyleName=function(){var _reg=/^([a-z]+?)[A-Z]/;return function(_name,_map){if(!_map[_name]){if(_reg.test(_name))_name=RegExp.$1}return!!_map[_name]}}();_h.__filterCSSText=function(){var _reg=/\$<(.*?)>/gi,_pfx="-"+_prefix.css.toLowerCase()+"-";return function(_css){return _css.replace(_reg,function($1,$2){var _val=$2,_arr=_val.split("|"),_tpl=_getTransformTemplate(_arr[0]);if(!!_tpl){return _h.__getTransformValue(_arr[0],_u._$query2object(_arr[1]))}return!_h.__checkCSSText(_val,_cssmap)?_val:_pfx+_val})}}();_h.__checkCSSText=function(_name,_map){return!!_map[_name]};_h.__applyCSSText=function(_style,_css){_style.textContent=_css};_h.__appendCSSText=function(_style,_css){var _sheet=_style.sheet,_length=_sheet.cssRules.length;_sheet.insertRule(_css,_length);return _sheet.cssRules[_length]};_h.__applyEffect=function(_element,_options){};_h.__canFlashEventBubble=function(_wmode){return(_wmode||"").toLowerCase()!="transparent"};_h.__handleFileLabelClick=function(_element){};_h.__getAttribute=function(_element,_name){if(!!_element.getAttribute)return _element.getAttribute(_name);return""};_doInit()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.trident0)return;var _seed=+(new Date);_cache={};_h.__hoverElement=_h.__hoverElement._$aop(function(_event){_event.stopped=!0;var _args=_event.args,_id=_e._$id(_args[0]),_key="hover-"+_id;if(!_id||!!_cache[_key])return;_cache[_key]=!0;_v._$addEvent(_id,"mouseenter",_e._$addClassName._$bind(_e,_id,_args[1]));_v._$addEvent(_id,"mouseleave",_e._$delClassName._$bind(_e,_id,_args[1]))});_h.__fixedElement=function(){var _doScrollCheck=function(){};return _h.__fixedElement._$aop(function(_event){_event.stopped=!0;var _element=_event.args[0],_id="fixed-"+_e._$id(_element);if(!!_cache[_id])return;var _conf={};_cache[_id]=_conf})}();_h.__fullScreen=_h.__fullScreen._$aop(function(_event){_event.stopped=!0;var _element=_event.args[0],_style=_element.style,_viewport=_e._$getPageBox();_style.width=_viewport.scrollWidth+"px";_style.height=_viewport.scrollHeight+"px"});_h.__mask=_h.__mask._$aop(function(_event){_event.stopped=!0;var _element=_event.args[0],_mask=_cache[_element.msk];if(!_mask){_element.msk=_seed++;_mask=_e._$create("iframe");_mask.style.position="absolute";_cache[_element.msk]=_mask}_event.value=_mask;var _style=_mask.style;_style.top=(parseInt(_e._$getStyle(_element,"top"))||0)+"px";_style.left=(parseInt(_e._$getStyle(_element,"left"))||0)+"px";_style.width=_element.offsetWidth+"px";_style.height=_element.offsetHeight+"px";_element.insertAdjacentElement("beforeBegin",_mask)});_h.__unmask=_h.__unmask._$aop(function(_event){_event.stopped=!0;var _mask=_cache[_event.args[0].msk];if(!!_mask)_e._$removeByEC(_mask)})})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.trident1)return;_h.__checkEvent=function(){var _tmap={touchcancel:"MSPointerCancel",touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp"};return _h.__checkEvent._$aop(function(_event){var _args=_h.__formatEventArgs.apply(_h,_event.args);if(!_args){_event.stopped=!0;return}var _type=_tmap[_args[1]];if(!!_type&&("on"+_type).toLowerCase()in _args[0]){_args[4]=_args[1];_args[1]=_type;_event.stopped=!0;_event.value=_args}})}();_h.__canFlashEventBubble=function(_wmode){return!0}})();
(function(){var _=NEJ.P,_o=NEJ.O,_p=_("nej.p"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_h=_("nej.h"),_omap={};if(_p._$NOT_PATCH.trident)return;_h.__col2array=_h.__col2array._$aop(function(_event){_event.stopped=!0;var _list=_event.args[0];if(!_list){_event.value=null;return}var _index=0,_result=[];while(!!_list[_index]){_result.push(_list[_index++])}_event.value=_result});_h.__getChildren=_h.__getChildren._$aop(function(_event){_event.stopped=!0;var _arr=[];_u._$forEach(_event.args[0].childNodes,function(_node){if(_node.nodeType==1)_arr.push(_node)});_event.value=_arr});_h.__getElementsByClassName=_h.__getElementsByClassName._$aop(function(_event){var _element=_event.args[0];if(!!_element.getElementsByClassName)return;_event.stopped=!0;var _result=[],_regexp=new RegExp("(\\s|^)(?:"+_event.args[1].replace(/\s+/g,"|")+")(?=\\s|$)");_u._$forEach(_element.getElementsByTagName("*"),function(_node){if(_regexp.test(_node.className))_result.push(_node)});_event.value=_result});_h.__serializeDOM2XML=_h.__serializeDOM2XML._$aop(function(_event){if(!!window.XMLSerializer)return;_event.stopped=!0;var _element=_event.args[0];_event.value=_element.xml!=null?_element.xml:_element.outHTML});_h.__parseDOMFromXML=function(){var _msxml=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0"];var _getParser=function(){try{for(var i=0,l=_msxml.length;i<l;i++)return new ActiveXObject(_msxml[i])}catch(ex){return null}};return _h.__parseDOMFromXML._$aop(function(_event){if(!!window.DOMParser)return;_event.stopped=!0;var _parser=_getParser();if(!!_parser&&_parser.loadXML(_event.args[0])&&!_parser.parseError.errorCode)_event.value=_parser.documentElement})}();_h.__checkEvent=function(){var _emap={input:"propertychange",load:"readystatechange"};for(var x in _emap)_omap[_emap[x]]=!0;var _doCheckType=function(_element,_type){if("on"+_type in _element)return null;return _emap[_type]||""};var _doCheckEvent=function(_type,_handler){var _callback=_handler;switch(_type){case"readystatechange":_callback=function(_event){var _element=_v._$getElement(_event)||this;if(_element.readyState=="loaded"||_element.readyState=="complete"){_event.target=_element;_handler.call(_element,_event)}};break;case"propertychange":_callback=function(_event){var _element=_v._$getElement(_event)||this;if("value"in _element&&_event.propertyName=="value"){_event.target=_element;_handler.call(_element,_event)}};break}return _callback};return _h.__checkEvent._$aop(function(_event){var _args=_h.__formatEventArgs.apply(_h,_event.args);if(!_args){_event.stopped=!0;return}var _type=_doCheckType(_args[0],_args[1]);if(!!_type){_event.stopped=!0;_args[4]=_args[1];_args[1]=_type;if(!!_args[2]){_args[5]=_args[2];_args[2]=_doCheckEvent(_args[1],_args[2])}_event.value=_args}},function(_event){var _args=_event.value;if(!_args[0]||!_u._$isFunction(_args[2]))return;if(!_u._$isFunction(_args[5]))_args[5]=_args[2];_args[2]=_args[2]._$bind(_args[0])})}();_h.__addEvent=_h.__addEvent._$aop(function(_event){var _args=_event.args;if(!!_omap[_args[1]]||!document.addEventListener){_event.stopped=!0;_args[0].attachEvent("on"+_args[1],_args[2])}});_h.__delEvent=_h.__delEvent._$aop(function(_event){var _args=_event.args;if(!!_omap[_args[1]]||!document.removeEventListener){_event.stopped=!0;_args[0].detachEvent("on"+_args[1],_args[2])}});_h.__dispatchEvent=_h.__dispatchEvent._$aop(function(_event){if(!document.createEvent){_event.stopped=!0;var _args=_event.args,_eobj=document.createEventObject();NEJ.X(_eobj,_args[2]);try{_args[0].fireEvent("on"+_args[1],_eobj)}catch(ex){console.error(ex.message);console.error(ex.stack)}}});_h.__applyStyle=_h.__applyStyle._$aop(function(_event){var _args=_event.args,_name=_args[1].toLowerCase();if(_name=="opacity"&&!(_name in document.body.style)){_args[1]="filter";_args[2]="alpha(opacity="+_args[2]*100+")"}});_h.__applyCSSText=function(){var _max=30;return _h.__applyCSSText._$aop(function(_event){var _element=_event.args[0];if(!_element.styleSheet)return;_event.stopped=!0;var _css=_event.args[1];var _list=document.styleSheets;if(_list.length>_max){_element=_list[_max];_css=_element.cssText+_css}else{_element=_element.styleSheet}_element.cssText=_css})}();_h.__appendCSSText=_h.__appendCSSText._$aop(function(_event){var _args=_event.args,_sheet=_args[0].sheet;if(!!_sheet)return;_event.stopped=!0;var _sheet=_args[0].styleSheet,_length=_sheet.rules.length,_arr=_args[1].split(/[\{\}]/);_sheet.addRule(_arr[0],_arr[1],_length);_event.value=_sheet.rules[_length]});_h.__focusElement=function(){var _onBlur=function(_clazz,_event){_e._$delClassName(_v._$getElement(_event),_clazz)};return _h.__focusElement._$aop(function(_event){if(_p._$KERNEL.release>="4.0")return;var _args=_event.args;if(_args[1]!=1){_v._$addEvent(_args[0],"blur",_onBlur._$bind(null,_args[2]));_args[1]=-1}})}();_h.__canFlashEventBubble=function(_wmode){return!0};_h.__getAttribute=_h.__getAttribute._$aop(function(_event){var _args=_event.args,_node=(_args[0].attributes||_o)[_args[1]];if(!!_node){_event.stopped=!0;_event.value=_node.value}},function(_event){var _args=_event.args;if(_args[1]=="maxlength"&&_event.value==2147483647)_event.value=""});if(_p._$KERNEL.release<5){_h.__pushHistory=function(){var _timer,_iframe,_queue=[],_hflag="cb-"+ +(new Date),_content='<script>parent.nej.h["'+_hflag+'"] = !0;parent.location.hash = decodeURIComponent("#<HASH>");</scr'+"ipt>";var _doCheckQueue=function(){_timer=window.clearTimeout(_timer);if(!_queue.length)return;var _hash=_queue.shift();try{var _document=_iframe.contentWindow.document;_document.open();_document.write("<head><title>");_document.write(document.title);_document.write("</title>");_document.write(_content.replace("#<HASH>",encodeURIComponent(_hash)));_document.write("</head><body></body>");if(location.hostname!=document.domain)_document.domain=document.domain;_document.close();_h[_hflag]=!1}catch(ex){console.log(ex.message||ex);_queue.unshift(_hash)}_timer=window.setTimeout(_doCheckQueue,50)};return _h.__pushHistory._$aop(function(_event){_event.stopped=!0;var _hash=_event.args[0];if(!!_h[_hflag]||!_iframe&&!_hash)return;_queue.push(_hash);if(!_iframe)_iframe=_e._$createXFrame();_doCheckQueue()})}()}try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}})();
(function(){var _=NEJ.P,_v=_("nej.v"),_h=_("nej.h"),_p=_("nej.p"),_support=_p._$SUPPORT;if(_p._$NOT_PATCH.gecko)return;var _doInit=function(){_support.css3d=_support.css3d||"MozPerspective"in document.body.style;if(!document.body.insertAdjacentElement)HTMLElement.prototype.insertAdjacentElement=function(_where,_element){if(!_where||!_element)return;switch(_where){case"beforeEnd":this.appendChild(_element);return;case"beforeBegin":this.parentNode.insertBefore(_element,this);return;case"afterBegin":!this.firstChild?this.appendChild(_element):this.insertBefore(_element,this.firstChild);return;case"afterEnd":!this.nextSibling?this.parentNode.appendChild(_element):this.parentNode.insertBefore(_element,this.nextSibling);return}};if(!("innerText"in document.body)){HTMLElement.prototype["__defineGetter__"]("innerText",function(){return this.textContent});HTMLElement.prototype["__defineSetter__"]("innerText",function(_content){this.textContent=_content})}};_h.__checkEvent=function(){var _reg0=/^(?:transitionend|animationend|animationstart|animationiteration)$/i;return _h.__checkEvent._$aop(function(_event){var _args=_event.args;if(_reg0.test(_args[1]||"")){_event.stopped=!0;_event.value=_args}})}();_h.__handleFileLabelClick=function(){var _doLabelClick=function(_event){_v._$stop(_event);_v._$getElement(_event).control.click()};return function(_element){_v._$addEvent(_element,"click",_doLabelClick)}}();_doInit()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_h=_("nej.h");var __hasClassMethod=function(){var _test=!!document.body.classList;return function(){return _test}}();var __getClassRegExp=function(){var _reg=/\s+/g;return function(_class){_class=(_class||"").trim();return!_class?null:new RegExp("(\\s|^)(?:"+_class.replace(_reg,"|")+")(?=\\s|$)","g")}}();_h.__replaceClassName=_h.__replaceClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args,_element=_e._$get(_args[0]);if(!_element||!_args[1]&&!_args[2])return;var _class=_element.className||"";var _add=" "+(_args[2]||""),_del=__getClassRegExp((_args[1]||"")+_add);!!_del&&(_class=_class.replace(_del,"$1"));_element.className=(_class+_add).replace(/\s+/g," ").trim()});_h.__addClassName=_h.__addClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args;_h.__replaceClassName(_args[0],"",_args[1])});_h.__delClassName=_h.__delClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args;_h.__replaceClassName(_args[0],_args[1],"")});_h.__hasClassName=_h.__hasClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args,_element=_e._$get(_args[0]);if(!_element){_event.value=!1;return}var _reg=__getClassRegExp(_args[1]);_event.value=!_reg?!1:_reg.test(_element.className||"")})})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.webkit)return;_h.__canFlashEventBubble=function(_wmode){return!0}})();
(function(){var _p=NEJ.P("window.JSON");if(!!_p.parse||!!_p.stringify)return;_p.stringify=function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var C=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},H;function quote(string){C.lastIndex=0;return C.test(string)?'"'+string.replace(C,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function V(key,h){var i,O,l,length,R=t,L,value=h[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof H==="function"){value=H.call(h,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}t+=indent;L=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){L[i]=V(i,value)||"null"}l=L.length===0?"[]":t?"[\n"+t+L.join(",\n"+t)+"\n"+R+"]":"["+L.join(",")+"]";t=R;return l}if(H&&typeof H==="object"){length=H.length;for(i=0;i<length;i+=1){if(typeof H[i]==="string"){O=H[i];l=V(O,value);if(l){L.push(quote(O)+(t?": ":":")+l)}}}}else{for(O in value){if(Object.prototype.hasOwnProperty.call(value,O)){l=V(O,value);if(l){L.push(quote(O)+(t?": ":":")+l)}}}}l=L.length===0?"{}":t?"{\n"+t+L.join(",\n"+t)+"\n"+R+"}":"{"+L.join(",")+"}";t=R;return l}}return function(value,J,space){var i;t="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}H=J;if(J&&typeof J!=="function"&&(typeof J!=="object"||typeof J.length!=="number")){throw new Error("JSON.stringify")}return V("",{"":value})}}();_p.parse=function(){"use strict";var at,ch,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},text,error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'")}ch=text.charAt(at);at+=1;return ch},number=function(){var number,string="";if(ch==="-"){string="-";next("-")}while(ch>="0"&&ch<="9"){string+=ch;next()}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9"){string+=ch}}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next()}while(ch>="0"&&ch<="9"){string+=ch;next()}}number=+string;if(!isFinite(number)){error("Bad number")}else{return number}},string=function(){var hex,i,string="",uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string}if(ch==="\\"){next();if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break}uffff=uffff*16+hex}string+=String.fromCharCode(uffff)}else if(typeof escapee[ch]==="string"){string+=escapee[ch]}else{break}}else{string+=ch}}}error("Bad string")},white=function(){while(ch&&ch<=" "){next()}},word=function(){switch(ch){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+ch+"'")},value,array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array}while(ch){array.push(value());white();if(ch==="]"){next("]");return array}next(",");white()}}error("Bad array")},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object}while(ch){key=string();white();next(":");if(Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"')}object[key]=value();white();if(ch==="}"){next("}");return object}next(",");white()}}error("Bad object")};value=function(){white();switch(ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&ch<="9"?number():word()}};return function(source,reviver){var result;text=source;at=0;ch=" ";result=value();white();if(ch){error("Syntax error")}return typeof reviver==="function"?function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}({"":result},""):result}}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_g=_("nej.g"),_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_h=_("nej.h"),_x=_("nej.x"),_cspol,_empol={},_cache=document.createDocumentFragment();_e._$id=_x._$id=function(_element){_element=_e._$get(_element);if(!_element)return;var _id=!!_element.id?_element.id:"auto-id-"+_u._$randString(16);_element.id=_id;if(_e._$get(_id)!=_element)_empol[_id]=_element;return _id};_e._$get=_x._$get=function(_element){var _node=_empol[""+_element];if(!!_node)return _node;if(!_u._$isString(_element)&&!_u._$isNumber(_element))return _element;return document.getElementById(_element)};_e._$getChildren=_x._$getChildren=function(_element,_clazz){_element=_e._$get(_element);if(!_element)return null;var _list=_h.__getChildren(_element);if(!!_clazz)_u._$reverseEach(_list,function(_node,_index){if(!_e._$hasClassName(_node,_clazz))_list.splice(_index,1)});return _list};_e._$getByClassName=_x._$getByClassName=function(_element,_class){_element=_e._$get(_element);return!_element?null:_h.__getElementsByClassName(_element,_class.trim())};_e._$getScrollViewPort=_x._$getScrollViewPort=function(_element){_element=_e._$get(_element);if(!!_element){_element=_element.parentNode;while(!!_element){if(_element.scrollHeight>_element.clientHeight)break;_element=_element.parentNode}if(!!_element)return _element}var _tmp1=document.body.scrollHeight,_tmp2=document.documentElement.scrollHeight;return _tmp2>=_tmp1?document.documentElement:document.body};_e._$getPageBox=function(){var _getClientBox=function(_list){var _result=0;_u._$forEach(_list,function(_size){if(!_size)return;if(!_result){_result=_size}else{_result=Math.min(_result,_size)}});return _result};return function(){var _body0=document.body,_body1=document.documentElement,_result={scrollTop:Math.max(_body0.scrollTop,_body1.scrollTop),scrollLeft:Math.max(_body0.scrollLeft,_body1.scrollLeft),clientWidth:_getClientBox([_body0.clientWidth,_body0.offsetWidth,_body1.clientWidth,_body1.offsetWidth]),clientHeight:_getClientBox([_body0.clientHeight,_body0.offsetHeight,_body1.clientHeight,_body1.offsetHeight])};_result.scrollWidth=Math.max(_result.clientWidth,_body0.scrollWidth,_body1.scrollWidth);_result.scrollHeight=Math.max(_result.clientHeight,_body0.scrollHeight,_body1.scrollHeight);return _result}}();_e._$hover=_x._$hover=function(_element,_clazz){_h.__hoverElement(_element,_clazz||_e._$dataset(_element,"hover")||"js-hover");return this};_e._$fixed=_x._$fixed=function(_element){_element=_e._$get(_element);if(!_element)return;_h.__fixedElement(_element)};_e._$highlight=_x._$highlight=function(){var _cache={},_distance=2;var _doTouchStart=function(_id,_clazz,_event){_cache[_id]=[_v._$pageX(_event),_v._$pageY(_event)];_e._$addClassName(_id,_clazz)};var _doTouchMove=function(_id,_clazz,_event){var _point=_cache[_id];if(!_u._$isArray(_point))return;var _dx=Math.abs(_v._$pageX(_event)-_point[0]),_dy=Math.abs(_v._$pageY(_event)-_point[1]);if(_dx>_distance||_dy>_distance)_doTouchEnd(_id,_clazz)};var _doTouchEnd=function(_id,_clazz){if(_u._$isArray(_cache[_id])){_cache[_id]=-1;_e._$delClassName(_id,_clazz)}};return function(_element,_clazz){var _id=_e._$id(_element);if(!_id||_cache[_id]!=null)return;_cache[_id]=-1;_clazz=_clazz||_e._$dataset(_id,"highlight")||"js-highlight";_v._$addEvent(_id,"touchstart",_doTouchStart._$bind(null,_id,_clazz));_v._$addEvent(document,"touchmove",_doTouchMove._$bind(null,_id,_clazz));_v._$addEvent(document,"touchend",_doTouchEnd._$bind(null,_id,_clazz));_v._$addEvent(document,"touchcancel",_doTouchEnd._$bind(null,_id,_clazz))}}();_e._$toggle=_x._$toggle=function(){var _doClick=function(_id,_clazz,_ontoggle){var _element=_e._$get(_id),_event={clazz:_clazz,target:_element};if(_e._$hasClassName(_element,_clazz)){_event.toggled=!1;_e._$delClassName(_element,_clazz)}else{_event.toggled=!0;_e._$addClassName(_element,_clazz)}_ontoggle.call(null,_event)};return function(_element,_options){_element=_e._$get(_element);if(!!_element){var _obj={ontoggle:_f,clazz:"js-toggle",element:_element.parentNode};if(_u._$isString(_options)){var _node=_e._$get(_options);!!_node?_obj.element=_node:_obj.clazz=_options}else{NEJ.EX(_obj,_options);_obj.element=_e._$get(_obj.element)}var _id=_e._$id(_obj.element);_v._$addEvent(_element,"click",_doClick._$bind(null,_id,_obj.clazz,_obj.ontoggle||_f))}return this}}();_e._$focus=_x._$focus=function(_element,_options){_element=_e._$get(_element);if(!_element)return;var _mode=0,_clazz="js-focus";if(_u._$isNumber(_options)){_mode=_options}else if(_u._$isString(_options)){_clazz=_options}else if(_u._$isObject(_options)){_mode=_options.mode||_mode;_clazz=_options.clazz||_clazz}var _value=parseInt(_e._$dataset(_element,"mode"));if(!isNaN(_value))_mode=_value;_value=_e._$dataset(_element,"focus");if(!!_value)_clazz=_value;_h.__focusElement(_element,_mode,_clazz);return this};_e._$create=function(){var _map={a:{href:"#",hideFocus:!0},style:{type:"text/css"},link:{type:"text/css",rel:"stylesheet"},iframe:{frameBorder:0},script:{defer:!0,type:"text/javascript"}};return function(_tag,_class,_parent){var _element=document.createElement(_tag);NEJ.X(_element,_map[_tag.toLowerCase()]);if(!!_class)_element.className=_class;_parent=_e._$get(_parent);if(!!_parent)_parent.appendChild(_element);return _element}}();_e._$createXFrame=function(){var _getFrameSrc=function(){if(location.hostname==document.domain)return"about:blank";return'javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();})();'};var _getFrameWithName=function(_name){_name=_name.trim();if(!_name)return _e._$create("iframe");var _iframe;try{_iframe=document.createElement('<iframe name="'+_name+'"></iframe>');_iframe.frameBorder=0}catch(e){_iframe=_e._$create("iframe");_iframe.name=_name}return _iframe};return function(_options){_options=_options||_o;var _iframe=_getFrameWithName(_options.name||"");if(!_options.visible)_iframe.style.display="none";if(_u._$isFunction(_options.onload))_v._$addEvent(_iframe,"load",function(_event){if(!_iframe.src)return;_v._$clearEvent(_iframe,"load");_options.onload(_event)});var _parent=_options.parent;if(_u._$isFunction(_parent)){try{_parent(_iframe)}catch(e){}}else{(_e._$get(_parent)||document.body).appendChild(_iframe)}var _src=_options.src||_getFrameSrc();window.setTimeout(function(){_iframe.src=_src},0);return _iframe}}();_e._$remove=_x._$remove=function(){var _clearImage=function(_image){_image.src=_g._$BLANK_IMAGE};var _clearFrame=function(_frame){_frame.src="about:blank"};return function(_element,_nocls){_element=_e._$get(_element);if(!_element)return this;if(!_nocls)_v._$clearEvent(_element);delete _empol[_element.id];var _tag=_element.tagName;if(_tag=="IFRAME"){_clearFrame(_element)}else if(_tag=="IMG"){_clearImage(_element)}else if(!!_element.getElementsByTagName){_u._$forEach(_element.getElementsByTagName("img"),_clearImage);_u._$forEach(_element.getElementsByTagName("iframe"),_clearFrame)}if(!!_element.parentNode){_element.parentNode.removeChild(_element)}return this}}();_e._$removeByEC=_x._$removeByEC=function(_element){_element=_e._$get(_element);if(!!_element)_cache.appendChild(_element);return this};_e._$wrapInline=_x._$wrapInline=function(){var _clazz,_reg0=/\s+/;var _doInitStyle=function(){if(!!_clazz)return;_clazz=_e._$pushCSSText(".#<uispace>{position:relative;zoom:1;}.#<uispace>-show{position:absolute;top:0;left:100%;cursor:text;white-space:nowrap;overflow:hidden;}");_e._$dumpCSSText()};return function(_element,_options){_element=_e._$get(_element);if(!_element)return;_doInitStyle();_options=_options||_o;var _parent=_element.parentNode;if(!_e._$hasClassName(_parent,_clazz)){_parent=_e._$create("span",_clazz);_element.insertAdjacentElement("beforeBegin",_parent);_parent.appendChild(_element)}var _nid=_options.nid||"",_node=_e._$getByClassName(_parent,_nid||_clazz+"-show")[0];if(!_node){var _klass=((_options.clazz||"")+" "+_nid).trim();_klass=_clazz+"-show"+(!_klass?"":" ")+_klass;_node=_e._$create(_options.tag||"span",_klass);_parent.appendChild(_node)}var _klass=_options.clazz;if(!!_klass){_klass=(_klass||"").trim().split(_reg0)[0]+"-parent";_e._$addClassName(_parent,_klass)}return _node}}();_e._$dataset=_x._$dataset=function(){var _dataset={},_tag="data-",_reg=/\-(.{1})/gi;var _init=function(_element){var _id=_e._$id(_element);if(!!_dataset[_id])return;var _map={};_u._$forEach(_element.attributes,function(_node){var _key=_node.nodeName;if(_key.indexOf(_tag)!=0)return;_key=_key.replace(_tag,"").replace(_reg,function($1,$2){return $2.toUpperCase()});_map[_key]=_node.nodeValue||""});_dataset[_id]=_map};return function(_element,_key,_value){_element=_e._$get(_element);if(!_element)return null;var _set=_element.dataset;if(!_set){_init(_element);_set=_dataset[_element.id]}if(_value!==undefined)_set[_key]=_value;return _set[_key]}}();_e._$attr=_x._$attr=function(_element,_name,_value){_element=_e._$get(_element);if(!_element)return"";if(_value!==undefined&&!!_element.setAttribute)_element.setAttribute(_name,_value);return _h.__getAttribute(_element,_name)};_e._$html2node=function(_html){var _div=document.createElement("div");_div.innerHTML=_html;var _list=_e._$getChildren(_div);return _list.length>1?_div:_list[0]};_e._$dom2xml=_x._$dom2xml=function(_element){_element=_e._$get(_element);return!_element?"":_h.__serializeDOM2XML(_element)};_e._$xml2dom=function(_xml){_xml=(_xml||"").trim();return!_xml?null:_h.__parseDOMFromXML(_xml)};_e._$text2type=function(_text,_type){_text=_text||"";switch(_type){case"xml":_text=_e._$xml2dom(_text);break;case"json":try{_text=JSON.parse(_text)}catch(ex){_text=null}break}return _text};_e._$offset=_x._$offset=function(){var _isRoot=function(_element){return _element==document.body||_element==document.documentElement};return function(_from,_to){_from=_e._$get(_from);if(!_from)return null;_to=_e._$get(_to)||null;var _result={x:0,y:0},_isroot,_delta,_border;while(!!_from&&_from!=_to){_isroot=_isRoot(_from);_delta=_isroot?0:_from.scrollLeft;_border=parseInt(_e._$getStyle(_from,"borderLeftWidth"))||0;_result.x+=_from.offsetLeft+_border-_delta;_delta=_isroot?0:_from.scrollTop;_border=parseInt(_e._$getStyle(_from,"borderTopWidth"))||0;_result.y+=_from.offsetTop+_border-_delta;_from=_from.offsetParent}return _result}}();_e._$scrollTo=_x._$scrollTo=function(_element){var _offset=_e._$offset(_element);window.scrollTo(_offset.x,_offset.y);return this};_e._$matrix=function(_matrix){_matrix=(_matrix||"").trim();return _h.__getCSSMatrix(_matrix)};_e._$css3d=_x._$css3d=function(_element,_name,_map){_element=_e._$get(_element);if(!_element)return this;var _value=_h.__getTransformValue(_name,_map);if(!_value)return this;_e._$setStyle(_element,"transform",_value);return this};_e._$style=_x._$style=function(_element,_map){_element=_e._$get(_element);if(!!_element)_u._$forIn(_map,function(_value,_name){_e._$setStyle(_element,_name,_value)});return this};_e._$setStyle=_x._$setStyle=function(_element,_name,_value){_element=_e._$get(_element);if(!!_element)_h.__applyStyle(_element,_name,_value);return this};_e._$getStyle=_x._$getStyle=function(_element,_name){_element=_e._$get(_element);if(!_element)return"";var _current=!window.getComputedStyle?_element.currentStyle||_o:window.getComputedStyle(_element,null);return _current[_h.__getStyleName(_name)]||""};_e._$addStyle=function(){var _reg=/[\s\r\n]+/gi;return function(_style){_style=(_style||"").trim().replace(_reg," ");if(!_style)return;var _node=_e._$create("style");document.head.appendChild(_node);_h.__applyCSSText(_node,_h.__filterCSSText(_style));return _node}}();_e._$addScript=function(_script){try{_script=_script.trim();if(!!_script)return(new Function(_script))()}catch(ex){console.error(ex.message);console.error(ex.stack)}};_e._$pushCSSText=function(){var _reg=/#<.*?>/g,_seed=+(new Date);return function(_css){if(!_cspol)_cspol=[];var _class="auto-"+_seed++;_cspol.push(_css.replace(_reg,_class));return _class}}();_e._$dumpCSSText=function(){if(!!_cspol){_e._$addStyle(_cspol.join(""));_cspol=null}return this};_e._$appendCSSText=function(_style,_css){_style=_e._$get(_style);return!_style?null:_h.__appendCSSText(_style,_css)};_e._$addClassName=_x._$addClassName=function(){_h.__addClassName.apply(_h,arguments);return this};_e._$delClassName=_x._$delClassName=function(){_h.__delClassName.apply(_h,arguments);return this};_e._$replaceClassName=_x._$replaceClassName=function(){_h.__replaceClassName.apply(_h,arguments);return this};_e._$hasClassName=_x._$hasClassName=function(){return _h.__hasClassName.apply(_h,arguments)};if(!document.head)document.head=document.getElementsByTagName("head")[0]||document.body;_x.isChange=!0})();
(function(){var _=NEJ.P,_h=_("nej.h"),_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_x=_("nej.x"),_cache={};var _doClearElement=function(_element){_element=_e._$get(_element);if(!_element||!_cache[_element.id])return;var _empty=!0,_id=_element.id;_u._$forIn(_cache[_id],function(){_empty=!1;return!0});if(_empty)delete _cache[_id]};_v._$addEvent=_x._$addEvent=function(){var _doAddEventInCache=function(){var _args=_h.__checkEvent.apply(_h,arguments);if(!_args||!_args[2])return;var _tmp0=_e._$id(_args[0]),_tmp1=_cache[_tmp0]||{};_cache[_tmp0]=_tmp1;_tmp0=_args[4]||_args[1];var _tmp2=_tmp1[_tmp0]||[];_tmp1[_tmp0]=_tmp2;_tmp2.push({type:_args[1],func:_args[2],capt:!!_args[3],sfun:_args[5]||_args[2]});return _args.slice(0,4)};return function(){var _args=_doAddEventInCache.apply(null,arguments);if(!!_args)_h.__addEvent.apply(_h,_args);return this}}();_v._$delEvent=_x._$delEvent=function(){var _doDelEventInCache=function(){var _argc=arguments,_tmp0=_e._$id(_argc[0]),_tmp1=_cache[_tmp0],_type=(_argc[1]||"").toLowerCase(),_event=_argc[2];if(!_tmp1||!_type||!_event)return;_tmp1=_tmp1[_type];if(!_tmp1)return;var _cflag=!!_argc[3],_index=_u._$indexOf(_tmp1,function(_emap){return _event==_emap.sfun&&_cflag==_emap.capt});if(_index<0)return;var _emap=_tmp1.splice(_index,1)[0];return!_emap?null:[_e._$get(_tmp0),_emap.type,_emap.func,_emap.capt]};return function(){var _args=_doDelEventInCache.apply(null,arguments);if(!!_args){_h.__delEvent.apply(_h,_args);_doClearElement(_args[0])}return this}}();_v._$clearEvent=_x._$clearEvent=function(){var _doClearByType=function(){var _argc=arguments,_tmp0=_e._$id(_argc[0]),_tmp1=_cache[_tmp0],_tmp2=(_argc[1]||"").toLowerCase();if(!_tmp1||!_tmp2)return;var _element=_e._$get(_tmp0);_u._$reverseEach(_tmp1[_tmp2],function(_emap,_index,_list){_h.__delEvent(_element,_emap.type,_emap.func,_emap.capt);_list.splice(_index,1)});delete _tmp1[_tmp2]};var _doClearAll=function(_element){_element=_e._$get(_element);if(!_element)return;var _id=_element.id;_u._$forIn(_cache[_id],function(_list,_type){_doClearByType(_id,_type)});delete _cache[_id]};return function(_element,_type){!_type?_doClearAll(_element):_doClearByType(_element,_type);_doClearElement(_element);return this}}();_v._$getElement=function(){var _exmap;var _doFilter=function(_name,_element){var _arr=_name.split(":");if(_arr.length>1){if(!_exmap)_exmap={c:_e._$hasClassName,d:_e._$dataset,a:_e._$attr};var _check=_exmap[_arr[0]];if(!!_check)return!!_check(_element,_arr[1]);_name=_arr[1]}return!!_e._$attr(_element,_name)||!!_e._$dataset(_element,_name)||_e._$hasClassName(_element,_name)};return function(_event){if(!_event)return null;var _element=_event.target||_event.srcElement,_filter=arguments[1];if(!_filter)return _element;if(_u._$isString(_filter))_filter=_doFilter._$bind(null,_filter);if(_u._$isFunction(_filter)){while(_element){if(!!_filter(_element))return _element;_element=_element.parentNode}return null}return _element}}();_v._$stop=function(_event){_v._$stopBubble(_event);_v._$stopDefault(_event);return this};_v._$stopBubble=function(_event){if(!!_event){!!_event.stopPropagation?_event.stopPropagation():_event.cancelBubble=!0}return this};_v._$stopDefault=function(_event){if(!!_event){!!_event.preventDefault?_event.preventDefault():_event.returnValue=!1}return this};_v._$stopClick=function(){var _inited=!1;var _doInitListener=function(){if(_inited)return;_inited=!0;_v._$addEvent(document,"click",_onDocumentClick,!0)};var _onDocumentClick=function(_event){var _element=_v._$getElement(_event),_stopped=_e._$dataset(_element,"stopped");if(_stopped=="true"){_v._$stop(_event);_e._$dataset(_element,"stopped","false")}};return function(_event){if(!_event)return;if(_event.type=="click"){_v._$stop(_event);return}_doInitListener();_e._$dataset(_v._$getElement(_event),"stopped","true")}}();_v._$pageX=function(_event){return _event.pageX!=null?_event.pageX:_event.clientX+_e._$getPageBox().scrollLeft};_v._$pageY=function(_event){return _event.pageY!=null?_event.pageY:_event.clientY+_e._$getPageBox().scrollTop};_v._$dispatchEvent=_x._$dispatchEvent=function(_element,_type,_options){var _args=_h.__checkEvent(_element,_type);if(!!_args)_h.__dispatchEvent(_args[0],_args[1],_options);return this};_v.dump=function(){return _cache};_x.isChange=!0})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_f=NEJ.F,_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_proEvent;if(!!_p._$$Event)return;_p._$$Event=NEJ.C();_proEvent=_p._$$Event.prototype;_p._$$Event._$allocate=function(_options){_options=_options||{};var _instance=!!this.__pool&&this.__pool.shift();if(!_instance){_instance=new this(_options);this.__inst__=(this.__inst__||0)+1}_instance.__reset(_options);return _instance};_p._$$Event._$recycle=function(){var _doRecycle=function(_item,_index,_list){this._$recycle(_item);_list.splice(_index,1)};return function(_instance){if(!_instance)return null;if(!_u._$isArray(_instance)){if(!(_instance instanceof this)){var _class=_instance.constructor;if(!!_class._$recycle)_class._$recycle(_instance);return null}if(_instance==this.__instance)delete this.__instance;if(_instance==this.__inctanse)delete this.__inctanse;_instance.__destroy();if(!this.__pool)this.__pool=[];if(_u._$indexOf(this.__pool,_instance)<0){this.__pool.push(_instance)}return null}_u._$reverseEach(_instance,_doRecycle,this)}}();_p._$$Event._$getInstance=function(_options){_options=_options||{};if(!this.__instance)this.__instance=this._$allocate(_options);return this.__instance};_p._$$Event._$getInstanceWithReset=function(_options,_clear){_options=_options||{};if(!!_clear&&!!this.__inctanse){this.__inctanse._$recycle();delete this.__inctanse}if(!this.__inctanse){this.__inctanse=this._$allocate(_options)}else{this.__inctanse.__reset(_options)}return this.__inctanse};_proEvent.__init=function(){var _seed=+(new Date);return function(){this.id=_seed++;this.__events={};this.__events_dom={}}}();_proEvent.__reset=function(_options){this._$batEvent(_options)};_proEvent.__destroy=function(){this._$clearEvent();this.__doClearDomEvent()};_proEvent.__doInitDomEvent=function(){var _seed=+(new Date);var _doAttach=function(_args){if(!_args||_args.length<3)return;this.__events_dom["de-"+_seed++]=_args;_v._$addEvent.apply(_v,_args)};return function(_list){_u._$forEach(_list,_doAttach,this)}}();_proEvent.__doClearDomEvent=function(){var _doRemoveEvent=function(_args,_key,_map){delete _map[_key];_v._$delEvent.apply(_v,_args)};return function(){_u._$forIn(this.__events_dom,_doRemoveEvent)}}();_proEvent.__doClearComponent=function(_filter){_filter=_filter||_f;_u._$forIn(this,function(_inst,_key,_map){if(!!_inst&&!!_inst._$recycle&&!_filter(_inst)){delete _map[_key];_inst._$recycle()}})};_proEvent._$recycle=function(){this.constructor._$recycle(this)};_proEvent._$hasEvent=function(_type){var _event=this.__events[_type.toLowerCase()];return!!_event&&_event!==_f};_proEvent._$addEvent=function(_type,_event){this._$setEvent.apply(this,arguments);return this};_proEvent._$delEvent=function(_type,_event){var _type=(_type||"").toLowerCase(),_events=this.__events[_type];if(!_u._$isArray(_events)){if(_events==_event)delete this.__events[_type];return}_u._$reverseEach(_events,function(_func,_index,_list){if(_func==_event)_list.splice(_index,1)})};_proEvent._$setEvent=function(_type,_event){if(!!_type&&_u._$isFunction(_event))this.__events[_type.toLowerCase()]=_event;return this};_proEvent._$batEvent=function(){var _doSetEvent=function(_event,_type){this._$setEvent(_type,_event)};return function(_events){_u._$forIn(_events,_doSetEvent,this);return this}}();_proEvent._$clearEvent=function(){var _doClearEvent=function(_event,_type){this._$clearEvent(_type)};return function(_type){var _type=(_type||"").toLowerCase();if(!!_type){delete this.__events[_type]}else{_u._$forIn(this.__events,_doClearEvent,this)}return this}}();_proEvent._$pushEvent=function(_type,_event){if(!_type||!_u._$isFunction(_event))return this;_type=_type.toLowerCase();var _events=this.__events[_type];if(!_events){this.__events[_type]=_event;return this}if(!_u._$isArray(_events)){this.__events[_type]=[_events]}this.__events[_type].push(_event);return this};_proEvent._$dispatchEvent=function(_type){var _event=this.__events[(_type||"").toLowerCase()];if(!_event)return this;var _args=_r.slice.call(arguments,1);if(!_u._$isArray(_event))return _event.apply(this,_args);_u._$forEach(_event,function(_handler){try{_handler.apply(this,_args)}catch(ex){console.error(ex.message);console.error(ex.stack)}},this);return this};_p._$api=function(){var _cache={};return function(_id,_class,_options){var _sn=_class.__sign__;if(!_sn){_sn=_u._$randString(10);_class.__sign__=_sn}var _key=_id+"-"+_sn,_instance=_cache[_key];if(!!_options&&!_instance){_instance=_class._$allocate(_options);_instance._$recycle=_instance._$recycle._$aop(function(_event){delete _cache[_key];delete _instance._$recycle});_cache[_key]=_instance}return _instance}}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_p=_("nej.ut"),_proModule;if(!!_p._$$Module)return;_p._$$Module=NEJ.C();_proModule=_p._$$Module._$extend(_p._$$Event);_proModule.__init=function(){this.__export={};this.__supInit();this.__doBuild()};_proModule.__reset=function(_options){this.__supReset(_options);this.__umi=_options.umi||"";this.__dispatcher=_options.dispatcher;this.__composites=_options.composite||_o;this._$batEvent({onshow:this.__onShow._$bind(this),onhide:this.__onHide._$bind(this),onrefresh:this.__onRefresh._$bind(this),onmessage:this.__onMessage._$bind(this),onbeforehide:this.__onBeforeHide._$bind(this)})};_proModule.__destroy=function(){delete this.__umi;this.__export={};this.__supDestroy()};_proModule.__stop=function(_event){if(!!_event)_event.stopped=!0};_proModule.__doBuild=_f;_proModule.__onShow=_f;_proModule.__onHide=_f;_proModule.__onRefresh=_f;_proModule.__onMessage=_f;_proModule.__onBeforeHide=_f;_proModule.__doSendMessage=function(_to,_message,_mode){this.__dispatcher._$message({to:_to,mode:_mode||0,data:_message,from:this.__umi})};_proModule.__doPublishMessage=function(_type,_data){this.__dispatcher._$publish(_type,{from:this.__umi,data:_data})};_proModule.__doSubscribeMessage=function(){this.__dispatcher._$subscribe.apply(this.__dispatcher,arguments)};_proModule._$getExportData=function(){return this.__export};_e._$regist=function(){if(!!window.dispatcher){dispatcher._$loaded.apply(dispatcher,arguments)}}})();
(function(){var _=NEJ.P,_f=NEJ.F,_o=NEJ.O,_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ut"),_proAbstractModule;if(!!_p._$$AbstractModule)return;_p._$$AbstractModule=NEJ.C();_proAbstractModule=_p._$$AbstractModule._$extend(_p._$$Module);_proAbstractModule.__doParseParent=function(_options){var _parent;if(!_parent){var _data=_options.input||_o;_parent=_e._$get(_data.parent)}if(!_parent){var _data=_options.data||_o;_parent=_e._$get(_data.parent)}if(!_parent){_parent=_e._$get(_options.parent)}return _parent};_proAbstractModule.__onShow=function(_options){var _parent=this.__doParseParent(_options);if(!!_parent&&!!this.__body)_parent.appendChild(this.__body);this.__supOnShow(_options);this.__doApplyComposite("onshow",_options);this.__onRefresh(_options)};_proAbstractModule.__onRefresh=function(_options){this.__supOnRefresh(_options);this.__doApplyComposite("onrefresh",_options)};_proAbstractModule.__onHide=function(){this.__supOnHide();this.__doHideComposite();_e._$removeByEC(this.__body)};_proAbstractModule.__isEscapedComposite=function(){var _reg0=/^onshow|onrefresh|delay$/;return function(_umi){return _reg0.test(_umi)}}();_proAbstractModule.__doGenCompositeParam=_f;_proAbstractModule.__doApplyComposite=function(){var _doRedirect=function(_query,_options,_umi,_pid){if(this.__isEscapedComposite(_pid))return;if(!!_query)_umi+=(_umi.indexOf("?")>1?"&":"?")+_query;var _input=this.__doGenCompositeParam(_pid,_options)||{};_input.location=_options;_input.parent=this.__export[_pid];this.__dispatcher._$redirect(_umi,{input:_input})};return function(_type,_options){if(!_options.nodelay){if(!!this.__composites.delay)return;var _composite=this.__composites[_type]||_o;if(_composite.delay)return}var _query=_u._$object2query(_options.param)||"";if(_type=="onrefresh"){_u._$forIn(this.__composites,_doRedirect._$bind(this,_query,_options))}_u._$forIn(_composite,_doRedirect._$bind(this,_query,_options))}}();_proAbstractModule.__doHideComposite=function(){var _doHide=function(_umi,_pid){if(!this.__isEscapedComposite(_pid))this.__dispatcher._$hide(_umi)};return function(){_u._$forIn(this.__composites,_doHide,this);_u._$forIn(this.__composites.onshow,_doHide,this);_u._$forIn(this.__composites.onrefresh,_doHide,this)}}()})();
(function(){var _=NEJ.P;var _t=_("nej.ut");var _e=_("nej.e");var _pm=_("pro.module");if(!!_pm._$$Module)return;_pm._$$Module=NEJ.C();var p=_pm._$$Module._$extend(_t._$$AbstractModule);p.__getChildByClassName=function(className){var elements=_e._$getByClassName(this.__body,className);if(elements.length==1){return elements[0]}return elements}})();
(function(){var _=NEJ.P,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u");_e._$counter=function(){var _reg0=/[\r\n]/gi,_cache={};var _doLength=function(_str){return(_str||"").replace(_reg0,"aa").length};var _onChange=function(_id){var _conf=_cache[_id],_node1=_e._$get(_id),_node2=_e._$get(_id+"-counter");if(!_node1||!_conf)return;var _event={input:_node1.value};_event.length=_conf.onlength(_event.input);_event.delta=_conf.max-_event.length;_conf.onchange(_event);_node2.innerHTML=_event.value||"剩余"+_event.delta+"个字"};return function(_element,_options){var _id=_e._$id(_element);if(!_id||!!_cache[_id])return;var _conf=NEJ.X({},_options);_conf.onchange=_conf.onchange||_f;_conf.onlength=_doLength;if(!_conf.max){var _max1=parseInt(_e._$attr(_id,"maxlength")),_max2=parseInt(_e._$dataset(_id,"maxLength"));_conf.max=_max1||_max2||100;if(!_max1&&!!_max2)_conf.onlength=_u._$length}_cache[_id]=_conf;_v._$addEvent(_id,"input",_onChange._$bind(null,_id));var _node=_e._$wrapInline(_id,{nid:_conf.nid||"js-counter",clazz:_conf.clazz});_conf.xid=_id+"-counter";_node.id=_conf.xid;_onChange(_id)}}()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_h=_("nej.h");_h.__setPlaceholder=function(_element,_clazz){}})();
(function(){var _=NEJ.P,_f=NEJ.F,_p=_("nej.p"),_e=_("nej.e"),_v=_("nej.v"),_h=_("nej.h");if(_p._$NOT_PATCH.trident)return;_h.__setPlaceholder=function(){var _cache={};var _onFocus=function(_event){var _input=_v._$getElement(_event);if(!!_input.value)return;_e._$setStyle(_e._$wrapInline(_input),"display","none")};var _onBlur=function(_event){var _input=_v._$getElement(_event);if(!!_input.value)return;_e._$setStyle(_e._$wrapInline(_input),"display","")};var _doWrapInput=function(_input,_clazz){var _id=_e._$id(_input),_label=_e._$wrapInline(_input,{tag:"label",clazz:_clazz});_label.htmlFor=_id;var _text=_e._$attr(_input,"placeholder")||"";_label.innerText=_text=="null"?"":_text;var _height=_input.offsetHeight+"px";_e._$style(_label,{left:0,display:!_input.value?"":"none"})};return _h.__setPlaceholder._$aop(function(_event){_event.stopped=!0;var _args=_event.args,_input=_e._$get(_args[0]);if(!!_cache[_input.id])return;_doWrapInput(_input,_args[1]);_cache[_input.id]=!0;_v._$addEvent(_input,"blur",_onBlur._$bind(null));_v._$addEvent(_input,"focus",_onFocus._$bind(null))})}()})();
(function(){var _=NEJ.P,_h=_("nej.h"),_e=_("nej.e"),_x=_("nej.x");_e._$placeholder=_x._$placeholder=function(_element,_clazz){_h.__setPlaceholder(_element,_e._$dataset(_element,"holder")||_clazz||"js-placeholder");return this};_x.isChange=!0})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_proWebForm;if(!!_p._$$WebForm)return;_p._$$WebForm=NEJ.C();_proWebForm=_p._$$WebForm._$extend(_p._$$Event);_proWebForm.__init=function(){this.__supInit();this.__wopt={tp:{nid:"js-nej-tp"},ok:{nid:"js-nej-ok"},er:{nid:"js-nej-er"}}};_proWebForm.__reset=function(_options){this.__supReset(_options);this.__form=document.forms[_options.form]||_e._$get(_options.form);this.__doInitDomEvent([[this.__form,"keypress",this.__onCheckEnter._$bind(this)]]);this.__message=_options.message||{};this.__message.pass=this.__message.pass||"&nbsp;";var _mode=this.__dataset(this.__form,"focusMode",1);if(!isNaN(_mode)){this.__fopt={mode:_mode,clazz:_options.focus}}this.__holder=_options.holder;this.__wopt.tp.clazz="js-mhd "+(_options.tip||"js-tip");this.__wopt.ok.clazz="js-mhd "+(_options.pass||"js-pass");this.__wopt.er.clazz="js-mhd "+(_options.error||"js-error");this.__invalid=_options.invalid||"js-invalid";this.__doInitValidRule(_options);this._$refresh();if(!!this.__fnode)this.__fnode.focus()};_proWebForm.__destroy=function(){this.__supDestroy();delete this.__message;delete this.__fnode;delete this.__vinfo;delete this.__form;delete this.__treg;delete this.__vfun};_proWebForm.__dataset=function(_node,_attr,_type){var _value=_e._$dataset(_node,_attr);switch(_type){case 1:return parseInt(_value);case 2:return(_value||"").toLowerCase()=="true";case 3:return this.__doParseDate(_value)}return _value};_proWebForm.__number=function(_value,_type){if(_type=="date")return this.__doParseDate(_value);return parseInt(_value)};_proWebForm.__isValidElement=function(){var _reg1=/^button|submit|reset|image|hidden|file$/i;return function(_node){_node=this._$get(_node)||_node;var _type=_node.type;return!!_node.name&&!_reg1.test(_node.type||"")}}();_proWebForm.__isValueElement=function(){var _reg1=/^hidden$/i;return function(_node){if(this.__isValidElement(_node))return!0;_node=this._$get(_node)||_node;var _type=_node.type||"";return _reg1.test(_type)}}();_proWebForm.__doParseDate=function(){var _reg=/[-\/]/;var _doFormatDate=function(_value){if(!_value)return"";_value=_value.split(_reg);_value.push(_value.shift());return _value.join("/")};return function(_value){if((_value||"").toLowerCase()=="now")return+(new Date);return Date.parse(_doFormatDate(_value))}}();_proWebForm.__onCheckEnter=function(_event){if(_event.keyCode!=13)return;this._$dispatchEvent("onenter",_event)};_proWebForm.__doCheckString=function(_id,_name){var _rule=this.__vfun[_name],_value=this.__dataset(_id,_name);if(!_value||!_rule)return;this.__doPushValidRule(_id,_rule);this.__doSaveValidInfo(_id,_name,_value)};_proWebForm.__doCheckPattern=function(_id,_name){try{var _pattern=this.__dataset(_id,_name);if(!_pattern)return;var _value=new RegExp(_pattern);this.__doSaveValidInfo(_id,_name,_value);this.__doPushValidRule(_id,this.__vfun[_name])}catch(e){}};_proWebForm.__doCheckBoolean=function(_id,_name){var _rule=this.__vfun[_name];if(!!_rule&&this.__dataset(_id,_name,2))this.__doPushValidRule(_id,_rule)};_proWebForm.__doCheckNumber=function(_id,_name,_value){_value=parseInt(_value);if(isNaN(_value))return;this.__doSaveValidInfo(_id,_name,_value);this.__doPushValidRule(_id,this.__vfun[_name])};_proWebForm.__doCheckDSNumber=function(_id,_name){this.__doCheckNumber(_id,_name,this.__dataset(_id,_name))};_proWebForm.__doCheckATNumber=function(_id,_name){this.__doCheckNumber(_id,_name,_e._$attr(_id,_name))};_proWebForm.__doCheckTPNumber=function(_id,_name,_type){var _value=this.__number(this.__dataset(_id,_name),this.__dataset(_id,"type"));this.__doCheckNumber(_id,_name,_value)};_proWebForm.__doPrepareElement=function(){var _reg0=/^input|textarea$/i;var _onFocus=function(_event){this._$showTip(_v._$getElement(_event))};var _onBlur=function(_event){this.__doCheckValidity(_v._$getElement(_event))};return function(_node){if(this.__dataset(_node,"autoFocus",2))this.__fnode=_node;var _holder=_e._$attr(_node,"placeholder");if(!!_holder&&_holder!="null")_e._$placeholder(_node,this.__holder);if(!!this.__fopt&&_reg0.test(_node.tagName))_e._$focus(_node,this.__fopt);var _id=_e._$id(_node);this.__doCheckBoolean(_id,"required");this.__doCheckString(_id,"type");this.__doCheckPattern(_id,"pattern");this.__doCheckATNumber(_id,"maxlength");this.__doCheckATNumber(_id,"minlength");this.__doCheckDSNumber(_id,"maxLength");this.__doCheckDSNumber(_id,"minLength");this.__doCheckTPNumber(_id,"min");this.__doCheckTPNumber(_id,"max");var _name=_node.name;this.__message[_name+"-tip"]=this.__dataset(_node,"tip");this.__message[_name+"-error"]=this.__dataset(_node,"message");this._$showTip(_node);var _info=this.__vinfo[_id],_data=(_info||_o).data||_o,_need=this.__dataset(_node,"counter",2);if(_need&&(_data.maxlength||_data.maxLength)){_e._$counter(_id,{nid:this.__wopt.tp.nid,clazz:"js-counter"})}if(!!_info&&_reg0.test(_node.tagName)){this.__doInitDomEvent([[_node,"focus",_onFocus._$bind(this)],[_node,"blur",_onBlur._$bind(this)]])}else if(this.__dataset(_node,"focus",2)){this.__doInitDomEvent([[_node,"focus",_onFocus._$bind(this)]])}}}();_proWebForm.__doInitValidRule=function(){var _rmap={number:/^[\d]+$/i,url:/^[a-z]+:\/\/(?:[\w-]+\.)+[a-z]{2,6}.*$/i,email:/^[\w-\.]+@(?:[\w-]+\.)+[a-z]{2,6}$/i,date:function(v){return!v||!isNaN(this.__doParseDate(v))}};var _vfun={required:function(_node){var _type=_node.type,_novalue=!_node.value,_nocheck=(_type=="checkbox"||_type=="radio")&&!_node.checked;if(_nocheck||_novalue)return-1},type:function(_node,_options){var _reg=this.__treg[_options.type],_val=_node.value.trim(),_tested=!!_reg.test&&!_reg.test(_val),_funced=_u._$isFunction(_reg)&&!_reg.call(this,_val);if(_tested||_funced)return-2},pattern:function(_node,_options){if(!_options.pattern.test(_node.value))return-3},maxlength:function(_node,_options){if(_node.value.length>_options.maxlength)return-4},minlength:function(_node,_options){if(_node.value.length<_options.minlength)return-5},maxLength:function(_node,_options){if(_u._$length(_node.value)>_options.maxLength)return-4},minLength:function(_node,_options){if(_u._$length(_node.value)<_options.minLength)return-5},min:function(_node,_options){var _number=this.__number(_node.value,_options.type);if(isNaN(_number)||_number<_options.min)return-6},max:function(_node,_options){var _number=this.__number(_node.value,_options.type);if(isNaN(_number)||_number>_options.max)return-7}};return function(_options){this.__treg=NEJ.X(NEJ.X({},_rmap),_options.type);this.__vfun=NEJ.X(NEJ.X({},_vfun),_options.attr)}}();_proWebForm.__doPushValidRule=function(_id,_valid){if(!_u._$isFunction(_valid))return;var _info=this.__vinfo[_id];if(!_info||!_info.func){_info=_info||{};_info.func=[];this.__vinfo[_id]=_info}_info.func.push(_valid)};_proWebForm.__doSaveValidInfo=function(_id,_name,_value){if(!_name)return;var _info=this.__vinfo[_id];if(!_info||!_info.data){_info=_info||{};_info.data={};this.__vinfo[_id]=_info}_info.data[_name]=_value};_proWebForm.__doCheckValidity=function(_node){_node=this._$get(_node)||_node;var _info=this.__vinfo[_e._$id(_node)];if(!_node||!_info||!this.__isValidElement(_node))return!0;var _result;_u._$forIn(_info.func,function(_func){_result=_func.call(this,_node,_info.data);return _result!=null},this);if(_result==null){var _event={target:_node,form:this.__form};this._$dispatchEvent("oncheck",_event);_result=_event.value}var _event={target:_node,form:this.__form};if(_result!=null){_event.code=_result;this._$dispatchEvent("oninvalid",_event);if(!_event.stopped){this._$showMsgError(_node,_event.value||this.__message[_node.name+_result])}}else{this._$dispatchEvent("onvalid",_event);if(!_event.stopped)this._$showMsgPass(_node,_event.value)}return _result==null};_proWebForm.__doShowMessage=function(){var _getVisible=function(_type1,_type2){return _type1==_type2?"block":"none"};var _getHolder=function(_node,_type,_message){var _holder=_getHolderNode.call(this,_node,_type);if(!_holder&&!!_message)_holder=_e._$wrapInline(_node,this.__wopt[_type]);return _holder};var _getHolderNode=function(_node,_type){var _holder;if(_type=="tp")_holder=_e._$get(_node.name+"-tip");if(!_holder)_holder=_e._$getByClassName(_node.parentNode,this.__wopt[_type].nid)[0];return _holder};return function(_node,_message,_type){_node=this._$get(_node)||_node;if(!_node)return;_type=="er"?_e._$addClassName(_node,this.__invalid):_e._$delClassName(_node,this.__invalid);var _holder=_getHolder.call(this,_node,_type,_message);if(!!_holder&&!!_message)_holder.innerHTML=_message;_u._$forIn(this.__wopt,function(_value,_key){_e._$setStyle(_getHolderNode.call(this,_node,_key),"display",_getVisible(_type,_key))},this)}}();_proWebForm._$showTip=function(_node,_message){this.__doShowMessage(_node,_message||this.__message[_node.name+"-tip"],"tp");return this};_proWebForm._$showMsgPass=function(_node,_message){this.__doShowMessage(_node,_message||this.__message[_node.name+"-pass"]||this.__message.pass,"ok");return this};_proWebForm._$showMsgError=function(_node,_message){this.__doShowMessage(_node,_message||this.__message[_node.name+"-error"],"er");return this};_proWebForm._$setValue=function(){var _reg0=/^(?:radio|checkbox)$/i;var _getValue=function(_value){return _value==null?"":_value};var _doSetValue=function(_value,_node){if(_reg0.test(_node.type||"")){_node.checked=_value==_node.value}else{_node.value=_getValue(_value)}};return function(_name,_value){var _node=this._$get(_name);if(!_node)return this;if(_node.tagName=="SELECT"||!_node.length){_doSetValue(_value,_node)}else{_u._$forEach(_node,_doSetValue._$bind(null,_value))}return this}}();_proWebForm._$get=function(_name){return this.__form.elements[_name]};_proWebForm._$form=function(){return this.__form};_proWebForm._$data=function(){var _reg0=/^radio|checkbox$/i,_reg1=/^number|date$/;var _doParseValue=function(_map,_node){var _name=_node.name,_value=_node.value,_info=_map[_name],_type=this.__dataset(_node,"type");if(_reg1.test(_type))_value=this.__number(_value,_type);if(_reg0.test(_node.type)&&!_node.checked){_value=this.__dataset(_node,"value");if(!_value)return}if(!!_info){if(!_u._$isArray(_info)){_info=[_info];_map[_name]=_info}_info.push(_value)}else{_map[_name]=_value}};return function(){var _result={};_u._$forEach(this.__form.elements,function(_node){if(this.__isValueElement(_node))_doParseValue.call(this,_result,_node)},this);return _result}}();_proWebForm._$reset=function(){var _doShowTip=function(_node){if(this.__isValidElement(_node))this._$showTip(_node)};return function(){this.__form.reset();_u._$forEach(this.__form.elements,_doShowTip,this);return this}}();_proWebForm._$submit=function(){this.__form.submit();return this};_proWebForm._$refresh=function(){var _doPrepareElement=function(_node){if(this.__isValidElement(_node))this.__doPrepareElement(_node)};return function(){this.__vinfo={};_u._$forEach(this.__form.elements,_doPrepareElement,this);return this}}();_proWebForm._$checkValidity=function(_node){_node=this._$get(_node)||_node;if(!!_node)return this.__doCheckValidity(_node);var _result=!0;_u._$forEach(this.__form.elements,function(_node){var _pass=this._$checkValidity(_node);_result=_result&&_pass},this);return _result}})();
(function(){var _=NEJ.P;var _p=_("nej.ut");var _pu=_("pro.util");var _e=_("nej.e");var _v=_("nej.v");var _o=NEJ.O;_pu._$$WebForm=NEJ.C();var p=_pu._$$WebForm._$extend(_p._$$WebForm);p.__reset=function(_options){this.__supReset(_options);this.__checkOnBlur=_options.checkOnBlur};p.__doPrepareElement=function(){var _reg0=/^input|textarea$/i;var _onFocus=function(_event){this._$showTip(_v._$getElement(_event))};var _onBlur=function(_event){this.__doCheckValidity(_v._$getElement(_event))};return function(_node){if(this.__dataset(_node,"autoFocus",2))this.__fnode=_node;var _holder=_e._$attr(_node,"placeholder");if(!!_holder&&_holder!=="null")_e._$placeholder(_node,this.__holder);if(!!this.__fopt&&_reg0.test(_node.tagName))_e._$focus(_node,this.__fopt);var _id=_e._$id(_node);this.__doCheckBoolean(_id,"required");this.__doCheckString(_id,"type");this.__doCheckPattern(_id,"pattern");this.__doCheckATNumber(_id,"maxlength");this.__doCheckATNumber(_id,"minlength");this.__doCheckDSNumber(_id,"maxLength");this.__doCheckDSNumber(_id,"minLength");this.__doCheckTPNumber(_id,"min");this.__doCheckTPNumber(_id,"max");var _name=_node.name;this.__message[_name+"-tip"]=this.__dataset(_node,"tip");this.__message[_name+"-error"]=this.__dataset(_node,"message");this._$showTip(_node);var _info=this.__vinfo[_id],_data=(_info||_o).data||_o,_need=this.__dataset(_node,"counter",2);if(_need&&(_data.maxlength||_data.maxLength)){_e._$counter(_id,{nid:this.__wopt.tp.nid,clazz:"js-counter"})}if(!!_info&&_reg0.test(_node.tagName)){if(this.__checkOnBlur)this.__doInitDomEvent([[_node,"blur",_onBlur._$bind(this)]]);this.__doInitDomEvent([[_node,"focus",_onFocus._$bind(this)]])}else if(this.__dataset(_node,"focus",2)){this.__doInitDomEvent([[_node,"focus",_onFocus._$bind(this)]])}}}()})();
(function(){var _=NEJ.P;var ydErrors=_("yd.errors");var errors={ERROR_UNKNOWN:{code:-1,title:"提示信息",message:"出错了，请稍后再试。"},ERROR_SOURCE_EXPIRED:{code:-201,title:"提示信息",message:"该资讯源已过期"},ERROR_ALREADY_IN_ORDER:{code:-698,message:"出错了，请稍后再试。"},ERROR_ALREADY_IN_SHOPPING_CART:{code:-699,message:"出错了，请稍后再试。"},ERROR_BOOK_ALREADY_IN_CART:{code:-695,message:"出错了，请稍后再试。"},ERROR_BOOK_ALREADY_PAID:{code:-696,message:"出错了，请稍后再试。"},ERROR_HTTP_PARAMS_MISMATCH:{code:-769,message:"参数错误"},ERROR_HTTP_POST_REQUIRED:{code:-779,message:"请求需要使用POST"},ERROR_ACCOUNT_REMAIN:{code:-773,message:"余额不足"},ERROR_MAILBOX_FORMAT_ERROR:{code:-979,message:"出错了，请稍后再试。"},ERROR_MISS_PARAMETER:{code:-789,message:"出错了，缺少参数"},ERROR_NOT_LOGGED_IN:{code:-999,message:"请先登录",silent:true},ERROR_SOURCE_NOT_SIGNED:{code:-1003,message:"源未签约",silent:true},ERROR_SOURCE_NOTFOUND:{code:-1100,message:"您所访问的源不存在！",redirectTo:"/page_not_found.html"},ERROR_NO_ITEMS_LEFT:{code:-697,message:"出错了，请稍后再试。"},ERROR_REPEAT_ACTION:{code:-799,message:"出错了，请稍后再试。"},ERROR_MAILSHARE_NOTNS:{code:-6,message:"非网易邮箱账号，不能使用邮件分享功能"},ERROR_MAILSHARE_DAILYLIMIT:{code:-2,message:"每天最多可分享100封，明天再来吧"},ERROR_MAILSHARE_RECEIVERSINVALID:{code:-3,message:"接收人无效"},ERROR_IN_BLACKLIST:{code:-1901,title:"提示",message:"您的帐号因发表不适宜的言论，评论已被禁止。如有任何问题请邮件至reader@188.com反馈给我们。谢谢~",silent:true},ERROR_REPORT:{code:-1201,message:"举报失败"}};NEJ.X(ydErrors,errors)})();
(function(){if(typeof TrimPath==="undefined"){TrimPath={};if(typeof exports!=="undefined")TrimPath=exports}var _tcache={},_stack=[],_rspc=/\s+/g,_seed=+(new Date),_trim,_config,_vars;var _doParseVars=function(){var _reg0=/^\s*[\[\{'"].*?[\]\}'"]\s*$/,_reg1=/[\&\|\<\>\+\-\*\/\%\,\(\)\[\]\?\:\!\=\;]/,_reg2=/^(?:defined|null|undefined|true|false|instanceof|new|this|typeof|\$v|[\d]+)$/i,_reg3=/^new\s+/,_reg4=/['"]/;var _doParseSimple=function(_value){if(_reg0.test(_value))return;_value=_value.split(".")[0].trim();if(!_value||_reg4.test(_value))return;_value=_value.replace(_reg3,"");try{if(_reg2.test(_value))return;_vars[_value]=1}catch(e){}};return function(_content){_content=_content||"";if(!_content||_reg0.test(_content))return;var _arr=_content.split(_reg1);for(var i=0,l=_arr.length;i<l;i++)_doParseSimple(_arr[i])}}();var _doParsePrefixFor=function(_part){if(_part[2]!="in")throw"bad for loop statement: "+_part.join(" ");_stack.push(_part[1]);_doParseVars(_part[3]);return"var __HASH__"+_part[1]+" = "+_part[3]+","+_part[1]+","+_part[1]+"_count=0;"+"if (!!__HASH__"+_part[1]+")"+"for(var "+_part[1]+"_key in __HASH__"+_part[1]+"){"+_part[1]+" = __HASH__"+_part[1]+"["+_part[1]+"_key];"+"if (typeof("+_part[1]+')=="function") continue;'+_part[1]+"_count++;"};var _doParsePrefixForElse=function(){var _part=_stack[_stack.length-1];return"}; if(!__HASH__"+_part+"||!"+_part+"_count){"};var _doParsePrefixForEnd=function(){_stack.pop();return"};"};var _doParsePrefixList=function(_part){if(_part[2]!="as")throw"bad for list loop statement: "+_part.join(" ");var _seq=_part[1].split("..");if(_seq.length>1){_doParseVars(_seq[0]);_doParseVars(_seq[1]);return"for(var "+_part[3]+","+_part[3]+"_index=0,"+_part[3]+"_beg="+_seq[0]+","+_part[3]+"_end="+_seq[1]+","+_part[3]+"_length=parseInt("+_part[3]+"_end-"+_part[3]+"_beg+1);"+_part[3]+"_index<"+_part[3]+"_length;"+_part[3]+"_index++){"+_part[3]+" = "+_part[3]+"_beg+"+_part[3]+"_index;"}else{_doParseVars(_part[1]);return"for(var __LIST__"+_part[3]+" = "+_part[1]+","+_part[3]+","+_part[3]+"_index=0,"+_part[3]+"_length=__LIST__"+_part[3]+".length;"+_part[3]+"_index<"+_part[3]+"_length;"+_part[3]+"_index++){"+_part[3]+" = __LIST__"+_part[3]+"["+_part[3]+"_index];"}};var _doParsePrefixMacro=function(_part){if(!_part||!_part.length)return;_part.shift();var _name=_part[0].split("(")[0];return"var "+_name+" = function"+_part.join("").replace(_name,"")+"{var __OUT=[];"};var _doParsePrefixInline=function(_part){if(!_part[1])throw"bad include statement: "+_part.join(" ");return'if (typeof inline == "function"){__OUT.push(inline('};var _doParsePrefixCondition=function(_prefix,_part){_doParseVars(_part.slice(1).join(" "));return _prefix};var _doParsePrefixConditionIF=function(_part){return _doParsePrefixCondition("if(",_part)};var _doParsePrefixConditionELSEIF=function(_part){return _doParsePrefixCondition("}else if(",_part)};var _doParsePrefixConditionVAR=function(_part){return _doParsePrefixCondition("var ",_part)};_config={blk:/^\{(cdata|minify|eval)/i,tag:"forelse|for|list|if|elseif|else|var|macro|break|notrim|trim|include",def:{"if":{pfix:_doParsePrefixConditionIF,sfix:"){",pmin:1},"else":{pfix:"}else{"},elseif:{pfix:_doParsePrefixConditionELSEIF,sfix:"){",pdft:"true"},"/if":{pfix:"}"},"for":{pfix:_doParsePrefixFor,pmin:3},forelse:{pfix:_doParsePrefixForElse},"/for":{pfix:_doParsePrefixForEnd},list:{pfix:_doParsePrefixList,pmin:3},"/list":{pfix:"};"},"break":{pfix:"break;"},"var":{pfix:_doParsePrefixConditionVAR,sfix:";"},macro:{pfix:_doParsePrefixMacro},"/macro":{pfix:'return __OUT.join("");};'},trim:{pfix:function(){_trim=!0}},"/trim":{pfix:function(){_trim=null}},inline:{pfix:_doParsePrefixInline,pmin:1,sfix:"));}"}},ext:{seed:function(_prefix){return(_prefix||"")+""+_seed},"default":function(_value,_default){return _value||_default}}};var _doParseStatement=function(){var _rbrc=/\\([\{\}])/g;return function(_content,_out){_content=_content.replace(_rbrc,"$1");var _part=_content.slice(1,-1).split(_rspc),_conf=_config.def[_part[0]];if(!_conf){_doParseSectionText(_content,_out);return}if(!!_conf.pmin&&_conf.pmin>=_part.length)throw"Statement needs more parameters:"+_content;_out.push(!!_conf.pfix&&typeof _conf.pfix!="string"?_conf.pfix(_part):_conf.pfix||"");if(!!_conf.sfix){if(_part.length<=1){if(!!_conf.pdft)_out.push(_conf.pdft)}else{for(var i=1,l=_part.length;i<l;i++){if(i>1)_out.push(" ");_out.push(_part[i])}}_out.push(_conf.sfix)}}}();var _doParseExpression=function(_exps,_out){if(!_exps||!_exps.length)return;if(_exps.length==1){var _var=_exps.pop();_doParseVars(_var);_out.push(_var==""?'""':_var);return}var _exp=_exps.pop().split(":");_out.push("__MDF['"+_exp.shift()+"'](");_doParseExpression(_exps,_out);if(_exp.length>0){var _args=_exp.join(":");_doParseVars(_args);_out.push(","+_args)}_out.push(")")};var _doParseSectionText=function(_content,_out){if(!_content)return;var _lines=_content.split("\n");if(!_lines||!_lines.length)return;for(var i=0,l=_lines.length,_line;i<l;i++){_line=_lines[i];if(!!_trim){_line=_line.trim();if(!_line)continue}_doParseSectionTextLine(_line,_out);if(!!_trim&&i<l-1)_out.push("__OUT.push('\\n');")}};var _doParseSectionTextLine=function(){var _raor=/\|\|/g,_rvor=/#@@#/g;return function(_content,_out){var _prvmrkend="}",_prvexpend=-1,_length=_content.length,_begin,_end,_begexp,_endexp,_exparr;while(_prvexpend+_prvmrkend.length<_length){_begin="${";_end="}";_begexp=_content.indexOf(_begin,_prvexpend+_prvmrkend.length);if(_begexp<0)break;if(_content.charAt(_begexp+2)=="%"){_begin="${%";_end="%}"}_endexp=_content.indexOf(_end,_begexp+_begin.length);if(_endexp<0)break;_doParseText(_content.substring(_prvexpend+_prvmrkend.length,_begexp),_out);_exparr=_content.substring(_begexp+_begin.length,_endexp).replace(_raor,"#@@#").split("|");for(var i=0,l=_exparr.length;i<l;_exparr[i]=_exparr[i].replace(_rvor,"||"),i++);_out.push("__OUT.push(");_doParseExpression(_exparr,_out);_out.push(");");_prvmrkend=_end;_prvexpend=_endexp}_doParseText(_content.substring(_prvexpend+_prvmrkend.length),_out)}}();var _doParseText=function(){var _map={r:/\n|\\|\'/g,"\n":"\\n","\\":"\\\\","'":"\\'"};var _doEncode=function(_content){return(_content||"").replace(_map.r,function($1){return _map[$1]||$1})};return function(_content,_out){if(!_content)return;_out.push("__OUT.push('"+_doEncode(_content)+"');")}}();var _doParseTemplate=function(){var _rtab=/\t/g,_rnln=/\n/g,_rlne=/\r\n?/g;var _doSearchEnd=function(_content,_begin){var _index=_content.indexOf("}",_begin+1);while(_content.charAt(_index-1)=="\\"){_index=_content.indexOf("}",_index+1)}return _index};var _doParseVarMap=function(){var _arr=[],_arg=arguments[0];for(var x in _arg){x=(x||"").trim();if(!x)continue;_arr.push(x+"=$v('"+x+"')")}return _arr.length>0?"var "+_arr.join(",")+";":""};return function(_content){_vars={};_content=_content.replace(_rlne,"\n").replace(_rtab,"    ");var _ftxt=["if(!__CTX) return '';",""];_ftxt.push("function $v(__NAME){var v = __CTX[__NAME];return v==null?window[__NAME]:v;};");_ftxt.push("var defined=function(__NAME){return __CTX[__NAME]!=null;},");_ftxt.push("__OUT=[];");var _prvend=-1,_length=_content.length;var _stmtbeg,_stmtend,_statement,_blockrx,_blktmp,_blkend,_blkmrk,_blktxt;while(_prvend+1<_length){_stmtbeg=_prvend;_stmtbeg=_content.indexOf("{",_stmtbeg+1);while(_stmtbeg>=0){_stmtend=_doSearchEnd(_content,_stmtbeg);_statement=_content.substring(_stmtbeg,_stmtend);_blockrx=_statement.match(_config.blk);if(!!_blockrx){_blktmp=_blockrx[1].length+1;_blkend=_content.indexOf("}",_stmtbeg+_blktmp);if(_blkend>=0){_blkmrk=_blkend-_stmtbeg-_blktmp<=0?"{/"+_blockrx[1]+"}":_statement.substr(_blktmp+1);_blktmp=_content.indexOf(_blkmrk,_blkend+1);if(_blktmp>=0){_doParseSectionText(_content.substring(_prvend+1,_stmtbeg),_ftxt);_blktxt=_content.substring(_blkend+1,_blktmp);switch(_blockrx[1]){case"cdata":_doParseText(_blktxt,_ftxt);break;case"minify":_doParseText(_blktxt.replace(_rnln," ").replace(_rspc," "),_ftxt);break;case"eval":if(!!_blktxt)_ftxt.push("__OUT.push((function(){"+_blktxt+"})());");break}_stmtbeg=_prvend=_blktmp+_blkmrk.length-1}}}else if(_content.charAt(_stmtbeg-1)!="$"&&_content.charAt(_stmtbeg-1)!="\\"&&_statement.substr(_statement.charAt(1)=="/"?2:1).search(_config.tag)==0){break}_stmtbeg=_content.indexOf("{",_stmtbeg+1)}if(_stmtbeg<0)break;_stmtend=_doSearchEnd(_content,_stmtbeg);if(_stmtend<0)break;_doParseSectionText(_content.substring(_prvend+1,_stmtbeg),_ftxt);_doParseStatement(_content.substring(_stmtbeg,_stmtend+1),_ftxt);_prvend=_stmtend}_doParseSectionText(_content.substring(_prvend+1),_ftxt);_ftxt.push(';return __OUT.join("");');_ftxt[1]=_doParseVarMap(_vars);_vars=null;return new Function("__CTX","__MDF",_ftxt.join(""))}}();TrimPath.seed=function(){return _seed};TrimPath.merge=function(){var _fcache={};return function(_sn,_data,_extend){try{_data=_data||{};if(!_fcache[_sn]&&!_tcache[_sn])return"";if(!_fcache[_sn]){_fcache[_sn]=_doParseTemplate(_tcache[_sn]);delete _tcache[_sn]}if(!!_extend){for(var x in _config.ext)if(!_extend[x])_extend[x]=_config.ext[x]}return _fcache[_sn](_data,_extend||_config.ext)}catch(ex){return ex.message||""}}}();TrimPath.parse=function(){var _xeed=+(new Date);return function(_content,_sn){if(!_content)return"";_sn=_sn||"ck_"+_xeed++;_tcache[_sn]=_content;return _sn}}()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_u=_("nej.u");_e._$getHtmlTemplateSeed=TrimPath.seed;_e._$getHtmlTemplate=function(){var _doInline=function(_id){return!_e._$getTextTemplate?"":_e._$getTextTemplate(_id)};return function(_sn,_data,_extend){_data=_data||{};_data.inline=_doInline;_extend=_extend||{};_extend.rand=_u._$randNumberString;_extend.format=_u._$format;_extend.escape=_u._$escape;_extend.inline=_doInline;return TrimPath.merge(_sn,_data,_extend)}}();_e._$addHtmlTemplate=function(_content,_keep){if(!_content)return"";var _sn,_element=_e._$get(_content);if(!!_element){_sn=_element.id;_content=_element.value||_element.innerText;if(!_keep)_e._$remove(_element)}return TrimPath.parse(_content,_sn)};_e._$renderHtmlTemplate=function(_parent,_sn,_data,_extend){_parent=_e._$get(_parent);if(!!_parent)_parent.innerHTML=_e._$getHtmlTemplate(_sn,_data,_extend);return this}})();
(function(){var _=NEJ.P,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_proCustomEvent;if(!!_p._$$CustomEvent)return;_p._$$CustomEvent=NEJ.C();_proCustomEvent=_p._$$CustomEvent._$extend(_p._$$Event);_proCustomEvent.__init=function(){this.__cache={};this.__supInit()};_proCustomEvent.__reset=function(_options){this.__supReset(_options);this.__element=_e._$get(_options.element)||window;this.__doEventInit(_options.event);this.__doEventAPIEnhance();this._$dispatchEvent("oninit")};_proCustomEvent.__destroy=function(){this.__supDestroy();for(var x in this.__cache){if(!_u._$isArray(this.__cache[x]))_u._$safeDelete(this.__element,x);delete this.__cache[x]}delete this.__element};_proCustomEvent.__isDelegate=function(_element,_type){_element=_e._$get(_element);return _element===this.__element&&(!_type||!!this.__cache["on"+_type])};_proCustomEvent.__doEventInit=function(_event){if(_u._$isString(_event)){var _name="on"+_event;if(!this.__cache[_name]){this.__cache[_name]=this.__doEventDispatch._$bind(this,_event)}this.__doEventBind(_event);return}if(_u._$isArray(_event))for(var i=0,l=_event.length;i<l;i++)this.__doEventInit(_event[i])};_proCustomEvent.__doEventBind=function(_type){var _event="on"+_type,_handler=this.__element[_event],_handler1=this.__cache[_event];if(_handler!=_handler1){this.__doEventDelete(_type);if(!!_handler&&_handler!=_f)this.__doEventAdd(_type,_handler);this.__element[_event]=_handler1}};_proCustomEvent.__doEventAdd=function(_type,_handler,_front){var _list=this.__cache[_type];if(!_list){_list=[];this.__cache[_type]=_list}if(_u._$isFunction(_handler)){!_front?_list.push(_handler):_list.unshift(_handler)}};_proCustomEvent.__doEventDelete=function(_type,_handler){var _list=this.__cache[_type];if(!_list||!_list.length)return;if(!_handler){delete this.__cache[_type];return}for(var i=_list.length-1;i>=0;i--)if(_handler===_list[i]){_list.splice(i,1);break}};_proCustomEvent.__doEventDispatch=function(_type,_event){_event=_event||{noargs:!0};_event.type=_type;this._$dispatchEvent("ondispatch",_event);if(!!_event.stopped)return;var _list=this.__cache[_type];if(!_list||!_list.length)return;for(var i=0,l=_list.length;i<l;i++)try{_list[i](_event)}catch(ex){console.error(ex.message);console.error(ex.stack)}};_proCustomEvent.__doEventAPIEnhance=function(){if(!!this.__enhanced)return;this.__enhanced=true;_v._$addEvent=_v._$addEvent._$aop(function(_event){var _args=_event.args,_type=_args[1].toLowerCase();if(this.__isDelegate(_args[0],_type)){_event.stopped=!0;this.__doEventBind(_type);this.__doEventAdd(_type,_args[2],_args[3]);this._$dispatchEvent("oneventadd",{type:_type,listener:_args[2]})}}._$bind(this));_v._$delEvent=_v._$delEvent._$aop(function(_event){var _args=_event.args,_type=_args[1].toLowerCase();if(this.__isDelegate(_args[0],_type)){_event.stopped=!0;this.__doEventDelete(_type,_args[2])}}._$bind(this));_v._$clearEvent=_v._$clearEvent._$aop(function(_event){var _args=_event.args,_type=(_args[1]||"").toLowerCase();if(this.__isDelegate(_args[0])){if(!!_type){this.__doEventDelete(_type);return}for(var x in this.__cache){if(_u._$isArray(this.__cache[x]))this.__doEventDelete(x)}}}._$bind(this));_v._$dispatchEvent=_v._$dispatchEvent._$aop(function(_event){var _args=_event.args,_type=_args[1].toLowerCase();if(this.__isDelegate(_args[0],_type)){_event.stopped=!0;_args[0]["on"+_type].apply(_args[0],_args.slice(2))}}._$bind(this))}})();
(function(){var _=NEJ.P,_f=NEJ.F,_g=_("nej.g"),_v=_("nej.v"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.j"),_proLoader,_timeout=6e4;if(!!_p._$$Loader)return;_p._$$Loader=NEJ.C();_proLoader=_p._$$Loader._$extend(_t._$$Event);_proLoader.__init=function(){this.__supInit();this.__qopt={onerror:this.__onQueueError._$bind(this),onloaded:this.__onQueueLoaded._$bind(this)};if(!this.constructor.__cache)this.constructor.__cache={loaded:{}}};_proLoader.__reset=function(_options){this.__supReset(_options);this.__version=_options.version;this.__timeout=_options.timeout;this.__qopt.version=this.__version;this.__qopt.timeout=this.__timeout};_proLoader.__delLoadData=function(_key){delete this.constructor.__cache[_key]};_proLoader.__getLoadData=function(_key){return this.constructor.__cache[_key]};_proLoader.__setLoadData=function(_key,_data){this.constructor.__cache[_key]=_data};_proLoader.__getRequest=_f;_proLoader.__clearRequest=function(_request){_v._$clearEvent(_request)};_proLoader.__doRequest=function(_request){_request.src=this.__url;document.head.appendChild(_request)};_proLoader.__doClear=function(){var _cache=this.__getLoadData(this.__url);if(!_cache)return;window.clearTimeout(_cache.timer);this.__clearRequest(_cache.request);delete _cache.bind;delete _cache.timer;delete _cache.request;this.__delLoadData(this.__url);this.__getLoadData("loaded")[this.__url]=!0};_proLoader.__doCallback=function(_name){var _cache=this.__getLoadData(this.__url);if(!_cache)return;var _list=_cache.bind;this.__doClear();if(!!_list&&_list.length>0){var _instance;while(_list.length){_instance=_list.shift();try{_instance._$dispatchEvent(_name,arguments[1])}catch(ex){console.error(ex.message);console.error(ex.stack)}_instance._$recycle()}}};_proLoader.__onError=function(_error){this.__doCallback("onerror",_error)};_proLoader.__onLoaded=function(){this.__doCallback("onloaded")};_proLoader.__doLoadQueue=function(_url){this.constructor._$allocate(this.__qopt)._$load(_url)};_proLoader.__onQueueCheck=function(_error){var _cache=this.__getLoadData(this.__key);if(!_cache)return;if(!!_error)_cache.error++;_cache.loaded++;if(_cache.loaded<_cache.total)return;this.__delLoadData(this.__key);this._$dispatchEvent(_cache.error>0?"onerror":"onloaded")};_proLoader.__onQueueError=function(_error){this.__onQueueCheck(!0)};_proLoader.__onQueueLoaded=function(){this.__onQueueCheck()};_proLoader._$load=function(_url){_url=_u._$absolute(_url);if(!_url){this._$dispatchEvent("onerror",{code:_g._$CODE_NOTASGN,message:"请指定要载入的资源地址！"});return this}this.__url=_url;if(!!this.__version)this.__url+=(this.__url.indexOf("?")<0?"?":"&")+this.__version;if(this.__getLoadData("loaded")[this.__url]){try{this._$dispatchEvent("onloaded")}catch(ex){console.error(ex.message);console.error(ex.stack)}this._$recycle();return this}var _cache=this.__getLoadData(this.__url),_request;if(!!_cache){_cache.bind.unshift(this);_cache.timer=window.clearTimeout(_cache.timer)}else{_request=this.__getRequest();_cache={request:_request,bind:[this]};this.__setLoadData(this.__url,_cache);_v._$addEvent(_request,"load",this.__onLoaded._$bind(this));_v._$addEvent(_request,"error",this.__onError._$bind(this,{code:_g._$CODE_ERRSERV,message:"无法加载指定资源文件["+this.__url+"]！"}))}if(this.__timeout!=0)_cache.timer=window.setTimeout(this.__onError._$bind(this,{code:_g._$CODE_TIMEOUT,message:"指定资源文件["+this.__url+"]载入超时！"}),this.__timeout||_timeout);if(!!_request)this.__doRequest(_request);this._$dispatchEvent("onloading");return this};_proLoader._$queue=function(_list){if(!_list||!_list.length){this._$dispatchEvent("onerror",{code:_g._$CODE_NOTASGN,message:"请指定要载入的资源队列！"});return this}this.__key=_u._$randNumberString();var _cache={error:0,loaded:0,total:_list.length};this.__setLoadData(this.__key,_cache);for(var i=0,l=_list.length;i<l;i++){if(!_list[i]){_cache.total--;continue}this.__doLoadQueue(_list[i])}this._$dispatchEvent("onloading");return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_p=_("nej.ut.j"),_proHtmlLoader;if(!!_p._$$HtmlLoader)return;_p._$$HtmlLoader=NEJ.C();_proHtmlLoader=_p._$$HtmlLoader._$extend(_p._$$Loader);_proHtmlLoader.__getRequest=function(){var _iframe=_e._$create("iframe");_iframe.width=0;_iframe.height=0;_iframe.style.display="none";return _iframe};_proHtmlLoader.__doRequest=function(_request){_request.src=this.__url;document.body.appendChild(_request)};_proHtmlLoader.__onError=function(_error){var _iframe=(this.__getLoadData(this.__url)||_o).request;this.__doCallback("onerror",_error);_e._$remove(_iframe)};_proHtmlLoader.__onLoaded=function(){var _body=null,_iframe=(this.__getLoadData(this.__url)||_o).request;try{_body=_iframe.contentWindow.document.body}catch(ex){}this.__doCallback("onloaded",_body);_e._$remove(_iframe)}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_p=_("nej.ut.j"),_proStyleLoader;if(!!_p._$$StyleLoader)return;_p._$$StyleLoader=NEJ.C();_proStyleLoader=_p._$$StyleLoader._$extend(_p._$$Loader);_proStyleLoader.__getRequest=function(){return _e._$create("link")};_proStyleLoader.__doRequest=function(_request){_request.href=this.__url;document.head.appendChild(_request)}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_p=_("nej.ut.j"),_proScriptLoader;if(!!_p._$$ScriptLoader)return;_p._$$ScriptLoader=NEJ.C();_proScriptLoader=_p._$$ScriptLoader._$extend(_p._$$Loader);_proScriptLoader.__reset=function(_options){this.__supReset(_options);this.__async=_options.async;this.__charset=_options.charset;this.__qopt.async=!1;this.__qopt.charset=this.__charset};_proScriptLoader.__getRequest=function(){var _request=_e._$create("script");if(this.__async!=null)_request.async=!!this.__async;if(this.__charset!=null)_request.charset=this.__charset;return _request};_proScriptLoader.__clearRequest=function(_request){_e._$remove(_request)}})();
(function(){var _=NEJ.P,_j=_("nej.j"),_p=_("nej.ut.j");_j._$loadScript=function(_url,_options){_p._$$ScriptLoader._$allocate(_options)._$load(_url);return this};_j._$queueScript=function(_list,_options){_p._$$ScriptLoader._$allocate(_options)._$queue(_list);return this};_j._$loadStyle=function(_url,_options){_p._$$StyleLoader._$allocate(_options)._$load(_url);return this};_j._$queueStyle=function(_list,_options){_p._$$StyleLoader._$allocate(_options)._$queue(_list);return this};_j._$loadHtml=function(_url,_options){_p._$$HtmlLoader._$allocate(_options)._$load(_url);return this}})();
(function(){var _=NEJ.P,_f=NEJ.F,_g=_("nej.g"),_e=_("nej.e"),_t=_("nej.ut"),_p=_("nej.ut.j"),_proProxy;if(!!_p._$$Proxy)return;_p._$$Proxy=NEJ.C();_proProxy=_p._$$Proxy._$extend(_t._$$Event);_proProxy.__reset=function(_options){this.__supReset(_options);this.__request={url:"",sync:!1,cookie:!1,type:"text",method:"GET",timeout:6e4};NEJ.EX(this.__request,_options);this.__headers=_options.headers||{};var _content=this.__headers[_g._$HEAD_CT];if(_content==null)this.__headers[_g._$HEAD_CT]=_g._$HEAD_CT_FORM};_proProxy.__destroy=function(){this.__supDestroy();delete this.__rkey;delete this.__request;delete this.__headers};_proProxy.__onLoadRequest=function(_event){var _status=_event.status;if(_status==-1){this._$dispatchEvent("onerror",{code:_g._$CODE_TIMEOUT,message:"请求["+this.__request.url+"]超时！"});return}if((""+_status).indexOf("2")!=0){this._$dispatchEvent("onerror",{data:_status,code:_g._$CODE_ERRSERV,message:"服务器返回异常状态["+_status+"]!"});return}this._$dispatchEvent("onload",_e._$text2type(_event.result,this.__request.type))};_proProxy.__doSendRequest=_f;_proProxy._$send=function(_data){var _url=this.__request.url;if(!_url){this._$dispatchEvent("onerror",{code:_g._$CODE_NOTASGN,message:"没有输入请求地址！"});return this}try{this.__request.data=_data==null?null:_data;var _event={request:this.__request,headers:this.__headers};try{this._$dispatchEvent("onbeforerequest",_event)}catch(ex){console.error(ex.message);console.error(ex.stack)}this.__doSendRequest(_event)}catch(e){this._$dispatchEvent("onerror",{code:_g._$CODE_ERRSERV,message:"请求["+_url+"]失败:"+e.message+"！"})}return this};_proProxy._$abort=_f})();
(function(){var _=NEJ.P,_f=NEJ.F,_h=_("nej.h"),_g=_("nej.g"),_u=_("nej.u"),_p=_("nej.ut.j"),_cache={},_proXHRProxy;if(!!_p._$$XHRProxy)return;_p._$$XHRProxy=NEJ.C();_proXHRProxy=_p._$$XHRProxy._$extend(_p._$$Proxy);_proXHRProxy.__destroy=function(){this.__supDestroy();window.clearTimeout(this.__timer);delete this.__timer;try{this.__xhr.onreadystatechange=_f;this.__xhr.abort()}catch(e){}delete this.__xhr};_proXHRProxy.__doSendRequest=function(){var _doSetHeader=function(_value,_key){this.__xhr.setRequestHeader(_key,_value)};return function(_options){var _request=_options.request,_headers=_options.headers;this.__xhr=_h.__getXMLHttpRequest();if(_headers[_g._$HEAD_CT]===_g._$HEAD_CT_FILE){delete _headers[_g._$HEAD_CT];this.__xhr.upload.onprogress=this.__onStateChange._$bind(this,1);if(_request.data.tagName==="FORM")_request.data=new FormData(_request.data)}this.__xhr.onreadystatechange=this.__onStateChange._$bind(this,2);if(_request.timeout!=0){this.__timer=window.setTimeout(this.__onStateChange._$bind(this,3),_request.timeout)}this.__xhr.open(_request.method,_request.url,!_request.sync);_u._$forIn(_headers,_doSetHeader,this);if(!!this.__request.cookie&&"withCredentials"in this.__xhr)this.__xhr.withCredentials=!0;this.__xhr.send(_request.data)}}();_proXHRProxy.__onStateChange=function(_type){switch(_type){case 1:this._$dispatchEvent("onuploading",arguments[1]);break;case 2:if(this.__xhr.readyState==4)this.__onLoadRequest({status:this.__xhr.status,result:this.__xhr.responseText||""});break;case 3:this.__onLoadRequest({status:-1});break}};_proXHRProxy._$abort=function(){this.__onLoadRequest({status:0});return this}})();
(function(){var _b=NEJ.P("nej.p"),_p=window,_is=_b._$IS,_es=_is.ipad||_is.iphone;if(!_es&&!!_p.requestAnimationFrame&&!!_p.cancelRequestAnimationFrame)return;var _prefix=_b._$KERNEL.prefix.pro;if(!_es&&!!_p[_prefix+"RequestAnimationFrame"]&&!!_p[_prefix+"CancelRequestAnimationFrame"]){_p.requestAnimationFrame=_p[_prefix+"RequestAnimationFrame"];_p.cancelRequestAnimationFrame=_p[_prefix+"CancelRequestAnimationFrame"];return}var _fps=_is.desktop?80:_is.ios?50:30;_p.requestAnimationFrame=function(_callback){return window.setTimeout(function(){try{_callback(+(new Date))}catch(ex){}},1e3/_fps)};_p.cancelRequestAnimationFrame=function(_id){window.clearTimeout(_id);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_u=_("nej.u"),_e=_("nej.e"),_v=_("nej.v"),_h=_("nej.h"),_x=_("nej.x"),_w=_("nej.ut.j.cb");var _seed_html=_e._$addHtmlTemplate('{var hide  = defined("hidden")&&!!hidden}{var param = defined("params")&&params||NEJ.O}{var width = !hide?width:"1px",height = !hide?height:"1px"}{if hide}<div style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:10000;overflow:hidden;">{/if}<object classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"codebase = "http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"width = "${width|default:"100px"}"height = "${height|default:"100px"}" id="${id}"><param value="${src}" name="movie">{for x in param}<param value="${x}" name="${x_key}"/>{/for}<embed src="${src}" name="${id}"width="${width|default:"100px"}"height="${height|default:"100px"}"pluginspage="http://www.adobe.com/go/getflashplayer"type="application/x-shockwave-flash"{for x in param}${x_key}="${x}" {/for}></embed></object>{if hide}</div>{/if}');_e._$flash=_x._$flash=function(){var _cache={},_seed=+(new Date);var _doInitDOM=function(_options){var _parent=_e._$get(_options.parent)||document.body,_html=_e._$getHtmlTemplate(_seed_html,_options);_parent.insertAdjacentHTML(!_options.hidden?"beforeEnd":"afterBegin",_html)};var _doInitFlashVars=function(_options,_name){var _params=_options.params;if(!_params){_params={};_options.params=_params}var _vars=_params.flashvars||"";if(!!_options.target||_h.__canFlashEventBubble(_params.wmode))_vars+=(!_vars?"":"&")+("onevent=nej.ut.j.cb."+_name);_params.flashvars=_vars};var _doCheckFlashInit=function(_flash){return!!_flash&&!!_flash.inited&&!!_flash.inited()};var _doListenFlashEvent=function(_id,_event){var _type=_event.type.toLowerCase();requestAnimationFrame(function(){_v._$dispatchEvent(_id,_type)})};var _doCheckFlash=function(_id){var _arr=[document.embeds[_id],_e._$get(_id),document[_id],window[_id]],_index=_u._$forIn(_arr,_doCheckFlashInit),_flash=_arr[_index],_ctkey=_id+"-count";_cache[_ctkey]++;if(!!_flash||_cache[_ctkey]>100){_cache[_id](_flash);delete _cache[_id];delete _cache[_ctkey];return}window.setTimeout(_doCheckFlash._$bind(null,_id),300)};return function(_options){_options=_options||{};if(!_options.src)return;var _id=_options.id||"flash-"+_seed++;_options.id=_id;if(!_options.hidden){var _tid=_e._$id(_options.target)||_e._$id(_options.parent);_w["cb"+_seed]=_doListenFlashEvent._$bind(null,_tid);_doInitFlashVars(_options,"cb"+_seed)}_doInitDOM(_options);if(!_options.onready)return;_cache[_id]=_options.onready;_cache[_id+"-count"]=0;_doCheckFlash(_id)}}();_x.isChange=!0})();
(function(){var _=NEJ.P,_c=_("nej.c"),_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ut.j"),_w=_("nej.ut.j.cb"),_cache={},_seed=+(new Date),_proFlashProxy;if(!!_p._$$FlashProxy)return;_w["ld"+_seed]=function(_key,_text){var _proxy=_cache[_key];if(!_proxy)return;delete _cache[_key];_proxy.__onLoadRequest({status:200,result:_text})};_w["er"+_seed]=function(_key,_status){var _proxy=_cache[_key];if(!_proxy)return;delete _cache[_key];_proxy.__onLoadRequest({status:_status||0})};_p._$$FlashProxy=NEJ.C();_proFlashProxy=_p._$$FlashProxy._$extend(_p._$$Proxy);_proFlashProxy.__doSendRequest=function(_options){var _flash=_cache.flash;if(_u._$isArray(_flash)){_flash.push(this.__doSendRequest._$bind(this,_options));return}if(!_flash){_cache.flash=[this.__doSendRequest._$bind(this,_options)];_e._$flash({hidden:!0,src:_c._$get("ajax.swf"),onready:function(_flash){if(!_flash)return;var _list=_cache.flash;_cache.flash=_flash;_u._$reverseEach(_list,function(_handler){try{_handler()}catch(e){}})}});return}this.__rkey="swf-"+_u._$randNumberString();_cache[this.__rkey]=this;var _data=NEJ.EX({url:"",data:null,method:"GET"},_options.request);_data.key=this.__rkey;_data.headers=_options.headers;_data.onerror="nej.ut.j.cb.er"+_seed;_data.onloaded="nej.ut.j.cb.ld"+_seed;var _policy=_c._$getFlashProxy(_data.url);if(!!_policy)_data.policyURL=_policy;_flash.request(_data)};_proFlashProxy._$abort=function(){delete _cache[this.__rkey];this.__onLoadRequest({status:0});return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_h=_("nej.h");_h.__formatOrigin=function(){var _reg=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(_origin){_origin=_origin||"";if(_reg.test(_origin))return RegExp.$1;return"*"}}();_h.__formatPassData=function(_data){return _data};_h.__postMessage=function(_window,_options){if(!_window.postMessage)return;_options=_options||_o;_window.postMessage(_h.__formatPassData(_options.data),_h.__formatOrigin(_options.origin))}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h"),_u=_("nej.u"),_v=_("nej.v"),_t=_("nej.ut");if(_p._$NOT_PATCH.trident)return;if(!!window.postMessage){_h.__formatPassData=_h.__formatPassData._$aop(function(_event){_event.stopped=!0;_event.value=JSON.stringify(_event.args[0])});return}var _key="MSG|",_queue=[];var _doCheckWindowName=function(){var _name=unescape(window.name||"").trim();if(!_name||_name.indexOf(_key)!=0)return;window.name="";var _result=_u._$string2object(_name.replace(_key,""),"|"),_origin=(_result.origin||"").toLowerCase();if(!!_origin&&_origin!="*"&&location.href.toLowerCase().indexOf(_origin)!=0)return;_v._$dispatchEvent(window,"message",{data:JSON.parse(_result.data||"null"),source:window.frames[_result.self]||_result.self,origin:_h.__formatOrigin(_result.ref||document.referrer)})};var _doCheckNameQueue=function(){var _checklist;var _doSetWindowName=function(_map,_index,_list){if(_u._$indexOf(_checklist,_map.w)<0){_checklist.push(_map.w);_list.splice(_index,1);_map.w.name=_map.d}};return function(){_checklist=[];_u._$reverseEach(_queue,_doSetWindowName);_checklist=null}}();_h.__postMessage=function(){var _doSerialize=function(_data){var _result={};_data=_data||_o;_result.origin=_data.origin||"";_result.ref=location.href;_result.self=_data.source;_result.data=JSON.stringify(_data.data);return _key+_u._$object2string(_result,"|",!0)};return _h.__postMessage._$aop(function(_event){_event.stopped=!0;var _args=_event.args;_queue.unshift({w:_args[0],d:escape(_doSerialize(_args[1]))})})}();_t._$$CustomEvent._$allocate({element:window,event:"message"});window.setInterval(_doCheckNameQueue,100);window.setInterval(_doCheckWindowName,20)})();
(function(){var _=NEJ.P,_h=_("nej.h"),_e=_("nej.e"),_j=_("nej.j");_j._$postMessage=function(){var _self=window.name||"_parent",_wmap={_top:window.top,_self:window,_parent:window.parent};return function(_target,_options){if(typeof _target=="string"){_target=_wmap[_target]||window.frames[_target];if(!_target)return this}var _data=NEJ.X({origin:"*",source:_self},_options);_h.__postMessage(_target,_data);return this}}()})();
(function(){var _=NEJ.P,_c=_("nej.c"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut.j"),_cache={},_proFrameProxy;if(!!_p._$$FrameProxy)return;_p._$$FrameProxy=NEJ.C();_proFrameProxy=_p._$$FrameProxy._$extend(_p._$$Proxy);_proFrameProxy.__init=function(){var _flag="NEJ-AJAX-DATA:",_init=!1;var _doReceiveMessage=function(_event){var _data=_event.data;if(_data.indexOf(_flag)!=0)return;_data=JSON.parse(_data.replace(_flag,""));var _proxy=_cache[_data.key];if(!_proxy)return;delete _cache[_data.key];_data.result=decodeURIComponent(_data.result||"");_proxy.__onLoadRequest(_data)};var _doInitMessage=function(){if(!_init){_init=!0;_v._$addEvent(window,"message",_doReceiveMessage)}};return function(){this.__supInit();_doInitMessage()}}();_proFrameProxy.__doSendRequest=function(_options){var _request=_options.request,_proxy=_c._$getFrameProxy(_request.url),_frame=_cache[_proxy];if(_u._$isArray(_frame)){_frame.push(this.__doSendRequest._$bind(this,_options));return}if(!_frame){_cache[_proxy]=[this.__doSendRequest._$bind(this,_options)];_e._$createXFrame({src:_proxy,visible:!1,onload:function(_event){var _list=_cache[_proxy];_cache[_proxy]=_v._$getElement(_event).contentWindow;_u._$reverseEach(_list,function(_handler){try{_handler()}catch(e){}})}});return}this.__rkey="frm-"+_u._$randNumberString();_cache[this.__rkey]=this;var _data=NEJ.EX({url:"",data:null,timeout:0,method:"GET"},_request);_data.key=this.__rkey;_data.headers=_options.headers;_j._$postMessage(_cache[_proxy],{data:_data})};_proFrameProxy._$abort=function(){delete _cache[this.__rkey];this.__onLoadRequest({status:0});return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_g=_("nej.g"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut.j"),_cache={},_proUploadProxy;if(!!_p._$$UploadProxy)return;_p._$$UploadProxy=NEJ.C();_proUploadProxy=_p._$$UploadProxy._$extend(_p._$$Proxy);_proUploadProxy.__init=function(){var _flag="NEJ-UPLOAD-RESULT:",_init=!1;var _doReceiveMessage=function(_event){var _data=_event.data;if(_data.indexOf(_flag)!=0)return;_data=JSON.parse(_data.replace(_flag,""));var _proxy=_cache[_data.key];if(!_proxy)return;delete _cache[_data.key];_proxy.__onLoadRequest(decodeURIComponent(_data.result))};var _doInitMessage=function(){if(!_init){_init=!0;_v._$addEvent(window,"message",_doReceiveMessage)}};return function(){this.__supInit();_doInitMessage()}}();_proUploadProxy.__destroy=function(){this.__supDestroy();_e._$remove(this.__frame);delete this.__frame;window.clearTimeout(this.__timer);delete this.__timer};_proUploadProxy.__onLoadRequest=function(_text){var _json;try{_json=JSON.parse(_text);this._$dispatchEvent("onload",_json)}catch(e){this._$dispatchEvent("onerror",{code:_g._$CODE_ERREVAL,message:_text})}};_proUploadProxy.__doSendRequest=function(){var _doCheckResult=function(){var _body,_text;try{var _body=this.__frame.contentWindow.document.body,_text=_body.innerText||_body.textContent}catch(e){return}this.__onLoadRequest(_text)};var _doProgress=function(_url,_mode,_cookie){_j._$request(_url,{type:"json",method:"POST",cookie:_cookie,mode:parseInt(_mode)||0,onload:function(_data){if(!this.__timer)return;this._$dispatchEvent("onuploading",_data);this.__timer=window.setTimeout(_doProgress._$bind(this,_url,_mode,_cookie),1e3)}._$bind(this),onerror:function(_error){if(!this.__timer)return;this.__timer=window.setTimeout(_doProgress._$bind(this,_url,_mode,_cookie),1e3)}._$bind(this)})};return function(_options){var _request=_options.request,_headers=_options.headers,_form=_request.data,_name="fom-"+_u._$randNumberString();_cache[_name]=this;_form.target=_name;_form.method="POST";_form.enctype=_g._$HEAD_CT_FILE;_form.encoding=_g._$HEAD_CT_FILE;var _url=_form.action||"",_sep=_url.indexOf("?")<=0?"?":"&";_form.action=_url+_sep+"_proxy_=form";this.__frame=_e._$createXFrame({name:_name,onload:function(_event){var _frame=_v._$getElement(_event);_v._$addEvent(_frame,"load",_doCheckResult._$bind(this));_form.submit();var _qurl=(_form.nej_query||_o).value;if(!_qurl)return;var _mode=(_form.nej_mode||_o).value,_cookie=(_form.nej_cookie||_o).value=="true";this.__timer=window.setTimeout(_doProgress._$bind(this,_qurl,_mode,_cookie),100)}._$bind(this)})}}();_proUploadProxy._$abort=function(){this._$dispatchEvent("onerror",{code:_g._$CODE_ERRABRT,message:"客户端终止文件上传"});return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_h=_("nej.h"),_p=_("nej.ut.j");_h.__getXMLHttpRequest=function(){return new XMLHttpRequest};_h.__getProxyByMode=function(_mode,_upload,_options){var _map=!!_upload?{2:_p._$$UploadProxy}:{2:_p._$$FrameProxy,3:_p._$$FlashProxy};return(_map[_mode]||_p._$$XHRProxy)._$allocate(_options)}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.trident)return;_h.__getXMLHttpRequest=function(){var _msxml=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.5.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];var _getXHR=function(){for(var i=0,l=_msxml.length;i<l;i++){try{return new ActiveXObject(_msxml[i])}catch(e){}}return null};return _h.__getXMLHttpRequest._$aop(function(_event){if(!!window.XMLHttpRequest)return;_event.stopped=!0;_event.value=_getXHR()})}();_h.__getProxyByMode=function(){var _pmap={0:2,1:3};return _h.__getProxyByMode._$aop(function(_event){var _args=_event.args,_mode=_args[0]||0;_args[0]=!!_args[1]?2:_pmap[_mode]||_mode})}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_h=_("nej.h"),_g=_("nej.g"),_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut.j"),_xcache={},_doFilter=_f;_j._$abort=function(_sn){var _cache=_xcache[_sn];if(!_cache)return this;_cache.req._$abort();return this};_j._$filter=function(_filter){_doFilter=_filter||_f;return this};_j._$request=function(){var _location=(location.protocol+"//"+location.host).toLowerCase();var _isXDomain=function(_url){var _origin=_u._$url2origin(_url);return!!_origin&&_origin!=_location};var _isUpload=function(_headers){return(_headers||_o)[_g._$HEAD_CT]==_g._$HEAD_CT_FILE};var _getProxy=function(_options){var _upload=_isUpload(_options.headers);if(!_isXDomain(_options.url)&&!_upload)return _p._$$XHRProxy._$allocate(_options);return _h.__getProxyByMode(_options.mode,_upload,_options)};var _doClear=function(_sn){var _cache=_xcache[_sn];if(!_cache)return;if(!!_cache.req)_cache.req._$recycle();delete _xcache[_sn]};var _doCallback=function(_sn,_type){var _cache=_xcache[_sn];if(!_cache)return;_doClear(_sn);try{var _event={type:_type,result:arguments[2]};_doFilter(_event);if(!_event.stopped)(_cache[_type]||_f)(_event.result)}catch(ex){console.error(ex.message);console.error(ex)}};var _onLoad=function(_sn,_data){_doCallback(_sn,"onload",_data)};var _onError=function(_sn,_error){_doCallback(_sn,"onerror",_error)};return function(_url,_options){_options=_options||{};var _sn=_u._$randNumberString(),_cache={onload:_options.onload||_f,onerror:_options.onerror||_f};_xcache[_sn]=_cache;_options.onload=_onLoad._$bind(null,_sn);_options.onerror=_onError._$bind(null,_sn);if(!!_options.query){var _sep=_url.indexOf("?")<0?"?":"&",_query=_options.query;if(_u._$isObject(_query))_query=_u._$object2query(_query);_url+=_sep+_query}_options.url=_url;_cache.req=_getProxy(_options);_cache.req._$send(_options.data);return _sn}}();_j._$upload=function(_form,_options){var _option={mode:0,type:"json",query:null,cookie:!1,headers:{},onload:null,onerror:null,onuploading:null,onbeforerequest:null};NEJ.EX(_option,_options);_option.data=_form;_option.method="POST";_option.timeout=0;_option.headers[_g._$HEAD_CT]=_g._$HEAD_CT_FILE;return _j._$request(_form.action,_option)}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_t=_("nej.ut"),_cache={},_skey=+(new Date)+"-";_e._$parseTemplate=function(){var _count=0;var _doCheckReady=function(){if(_count>0)return;_count=0;_v._$dispatchEvent(document,"templateready");_v._$clearEvent(document,"templateready")};var _doParseSrc=function(_textarea){var _src=_e._$dataset(_textarea,"src");if(!_src)return;var _root=_textarea.ownerDocument.location.href;_src=_src.split(",");_u._$forEach(_src,function(_value,_index,_list){_list[_index]=_u._$absolute(_value,_root)});return _src};var _doAddStyle=function(_textarea){if(!_textarea)return;var _src=_doParseSrc(_textarea);if(!!_src)_j._$queueStyle(_src,{version:_e._$dataset(_textarea,"version")});_e._$addStyle(_textarea.value)};var _onAddScript=function(_value){_count--;_e._$addScript(_value);_doCheckReady()};var _doAddScript=function(_textarea){if(!_textarea)return;var _src=_doParseSrc(_textarea),_val=_textarea.value;if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddScript._$bind(null,_val)};window.setTimeout(_j._$queueScript._$bind(_j,_src,_options),0);return}_e._$addScript(_val)};var _onAddHtml=function(_body){_count--;_e._$parseTemplate(_body);_doCheckReady()};var _doAddHtml=function(_textarea){if(!_textarea)return;var _src=_doParseSrc(_textarea)[0];if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddHtml};window.setTimeout(_j._$loadHtml._$bind(_j,_src,_options),0)}};var _onAddTextResource=function(_id,_text){_count--;_e._$addTextTemplate(_id,_text||"");_doCheckReady()};var _doAddTextResource=function(_textarea){if(!_textarea||!_textarea.id)return;var _id=_textarea.id,_src=_doParseSrc(_textarea)[0];if(!!_src){_count++;var _url=_src+(_src.indexOf("?")<0?"?":"&")+(_e._$dataset(_textarea,"version")||""),_options={type:"text",method:"GET",onload:_onAddTextResource._$bind(null,_id)};window.setTimeout(_j._$request._$bind(_j,_url,_options),0)}};var _doAddTemplate=function(_node){var _type=_node.name.toLowerCase();switch(_type){case"jst":_e._$addHtmlTemplate(_node,!0);return;case"txt":_e._$addTextTemplate(_node.id,_node.value||"");return;case"ntp":_e._$addNodeTemplate(_node.value||"",_node.id);return;case"js":_doAddScript(_node);return;case"css":_doAddStyle(_node);return;case"html":_doAddHtml(_node);return;case"res":_doAddTextResource(_node);return}};_t._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:function(){_doCheckReady()}});return function(_element){_element=_e._$get(_element);if(!!_element){var _list=_element.tagName=="TEXTAREA"?[_element]:_element.getElementsByTagName("textarea");_u._$forEach(_list,_doAddTemplate);_e._$remove(_element,!0)}_doCheckReady();return this}}();_e._$addTextTemplate=function(_key,_value){_cache[_key]=_value||"";return this};_e._$getTextTemplate=function(_key){return _cache[_key]||""};_e._$addNodeTemplate=function(_element,_key){_key=_key||_u._$randNumberString();_element=_e._$get(_element)||_element;_e._$addTextTemplate(_skey+_key,_element);_e._$removeByEC(_element);return _key};_e._$getNodeTemplate=function(_key){if(!_key)return null;_key=_skey+_key;var _value=_e._$getTextTemplate(_key);if(!_value)return null;if(_u._$isString(_value)){_value=_e._$html2node(_value);_e._$addTextTemplate(_key,_value)}return _value.cloneNode(!0)};_e._$getItemTemplate=function(){var _doFilter=function(_value,_key){return _key=="offset"||_key=="limit"};return function(_list,_item,_options){var _arr=[];if(!_list||!_list.length||!_item)return _arr;_options=_options||_o;var _len=_list.length,_beg=parseInt(_options.offset)||0,_end=Math.min(_len,_beg+(parseInt(_options.limit)||_len)),_opt={total:_list.length,range:[_beg,_end]};NEJ.X(_opt,_options,_doFilter);for(var i=_beg,_instance;i<_end;i++){_opt.index=i;_opt.data=_list[i];_instance=_item._$allocate(_opt);var _id=_instance._$getId();_cache[_id]=_instance;_instance._$recycle=_instance._$recycle._$aop(function(_id,_event){delete _cache[_id];delete _instance._$recycle}._$bind(null,_id));_arr.push(_instance)}return _arr}}();_e._$getItemById=function(_id){return _cache[_id]};_e._$setup=function(_klass,_options){_options=_options||_o;_e._$parseTemplate(_options.tid||"template-box");_v._$addEvent(document,"templateready",function(){_klass._$allocate()._$dispatchEvent("onshow",_options)})}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ui"),_proAbstract;if(!!_p._$$Abstract)return;_p._$$Abstract=NEJ.C();_proAbstract=_p._$$Abstract._$extend(_t._$$Event);_proAbstract.__init=function(){this.__supInit();_e._$dumpCSSText();this.__initXGui();this.__initNode()};_proAbstract.__reset=function(_options){this.__supReset(_options);this.__doInitClass(_options.clazz);this._$appendTo(_options.parent)};_proAbstract.__destroy=function(){this.__supDestroy();this.__doDelParentClass();delete this.__parent;_e._$removeByEC(this.__body);_e._$delClassName(this.__body,this.__class);delete this.__class};_proAbstract.__initXGui=_f;_proAbstract.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=_e._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=_e._$create("div",this.__seed_css);_e._$addClassName(this.__body,this.__seed_css)};_proAbstract.__initNodeTemplate=_f;_proAbstract.__doInitClass=function(_clazz){this.__class=_clazz||"";_e._$addClassName(this.__body,this.__class)};_proAbstract.__doAddParentClass=function(){if(!this.__seed_css)return;_e._$addClassName(this.__parent,this.__seed_css+"-parent")};_proAbstract.__doDelParentClass=function(){if(!this.__seed_css)return;_e._$delClassName(this.__parent,this.__seed_css+"-parent")};_proAbstract._$getBody=function(){return this.__body};_proAbstract._$appendTo=function(_parent){if(!this.__body)return this;this.__doDelParentClass();if(_u._$isFunction(_parent)){this.__parent=_parent(this.__body)}else{this.__parent=_e._$get(_parent);if(!!this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass();return this};_proAbstract._$show=function(){if(!this.__parent||!this.__body||this.__body.parentNode==this.__parent)return this;this.__parent.appendChild(this.__body);return this};_proAbstract._$hide=function(){_e._$removeByEC(this.__body);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_u=_("nej.u"),_h=_("nej.h"),_p=_("nej.ui"),_proLayer,_supLayer;if(!!_p._$$Layer)return;_p._$$Layer=NEJ.C();_proLayer=_p._$$Layer._$extend(_p._$$Abstract);_supLayer=_p._$$Layer._$supro;_proLayer.__reset=function(_options){this.__supReset(_options);this._$setEvent("oncontentready",_options.oncontentready||this.__doInitContent._$bind(this));this.__nohack=!!_options.nohack;this.__destroyable=!!_options.destroyable;this._$setContent(_options.content)};_proLayer.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__supDestroy();this.__doHide();this._$setContent("");_e._$style(this.__body,{top:"",left:""})};_proLayer.__doInitContent=_f;_proLayer.__doPositionAlign=_f;_proLayer.__doHide=function(){_e._$removeByEC(this.__body);if(!!this.__mask){this.__mask=_h.__unmask(this.__body);delete this.__mask}};_proLayer._$setContent=function(_content){if(!this.__body||!this.__ncnt||_content==null)return this;_content=_content||"";_u._$isString(_content)?this.__ncnt.innerHTML=_content:this.__ncnt.appendChild(_content);this._$dispatchEvent("oncontentready",this.__ncnt);return this};_proLayer._$setPosition=function(_offset){var _value=_offset.top;if(_value!=null){_value+="px";_e._$setStyle(this.__body,"top",_value);_e._$setStyle(this.__mask,"top",_value)}var _value=_offset.left;if(_value!=null){_value+="px";_e._$setStyle(this.__body,"left",_value);_e._$setStyle(this.__mask,"left",_value)}return this};_proLayer._$show=function(){_e._$setStyle(this.__body,"visibility","hidden");_supLayer._$show.apply(this,arguments);this.__doPositionAlign();_e._$setStyle(this.__body,"visibility","");if(!this.__nohack){this.__mask=_h.__mask(this.__body)}return this};_proLayer._$hide=function(){this.__destroyable?this._$recycle():this.__doHide();return this}})();
(function(){var _=NEJ.P,_f=NEJ.F,_u=_("nej.u"),_e=_("nej.e"),_p=_("nej.ui"),_proLayerWrapper;if(!!_p._$$LayerWrapper)return;_p._$$LayerWrapper=NEJ.C();_proLayerWrapper=_p._$$LayerWrapper._$extend(_p._$$Abstract);_proLayerWrapper.__reset=function(_options){this.__doInitLayerOptions();this.__supReset(this.__doFilterOptions(_options));this.__lopt.onbeforerecycle=this._$recycle._$bind(this);this.__layer=this.__getLayerInstance()};_proLayerWrapper.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__supDestroy();delete this.__lopt;_e._$removeByEC(this.__body);var _layer=this.__layer;if(!!_layer){delete this.__layer;_layer._$recycle()}};_proLayerWrapper.__getLayerInstance=_f;_proLayerWrapper.__doFilterOptions=function(_options){var _result={};_u._$forIn(_options,function(_item,_key){this.__lopt.hasOwnProperty(_key)?this.__lopt[_key]=_item:_result[_key]=_item},this);return _result};_proLayerWrapper.__doInitLayerOptions=function(){this.__lopt={clazz:"",parent:null,content:this.__body,destroyable:!1,oncontentready:null,nohack:!1}};_proLayerWrapper._$show=function(){if(!!this.__layer)this.__layer._$show();this._$dispatchEvent("onaftershow");return this};_proLayerWrapper._$hide=function(){if(!!this.__layer)this.__layer._$hide();return this}})();
(function(){var _=NEJ.P,_g=_("nej.g"),_h=_("nej.h"),_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_p=_("nej.ui"),_proMask,_supMask;if(!!_p._$$Mask)return;var _seed_css=_e._$pushCSSText(".#<uispace>{position:fixed;_position:absolute;z-index:100;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background-image:url("+_g._$BLANK_IMAGE+");}");_p._$$Mask=NEJ.C();_proMask=_p._$$Mask._$extend(_p._$$Abstract);_supMask=_p._$$Mask._$supro;_proMask.__reset=function(_options){this.__supReset(_options);var _content=_options.content||"&nbsp;";_u._$isString(_content)?this.__body.innerHTML=_content:this.__body.appendChild(_content)};_proMask.__destroy=function(){this.__supDestroy();this.__body.innerHTML="&nbsp;"};_proMask.__initXGui=function(){this.__seed_css=_seed_css};_proMask._$show=function(){_h.__fullScreen(this.__body);_supMask._$show.apply(this,arguments);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.ut"),_proDragger;if(!!_p._$$Dragger)return;_p._$$Dragger=NEJ.C();_proDragger=_p._$$Dragger._$extend(_p._$$Event);_proDragger.__reset=function(_options){this.__supReset(_options);this.__overflow=!!_options.overflow;this.__body=_e._$get(_options.body);this.__view=_e._$get(_options.view)||_e._$getScrollViewPort(this.__body);this.__mbar=_e._$get(_options.mbar)||this.__body;this.__direction=parseInt(_options.direction)||0;this.__doInitDomEvent([[document,"mouseup",this.__onDragEnd._$bind(this)],[document,"mousemove",this.__onDragging._$bind(this)],[this.__mbar,"mousedown",this.__onDragStart._$bind(this)]])};_proDragger.__destroy=function(){this.__supDestroy();delete this.__body;delete this.__mbar;delete this.__view};_proDragger.__getMaxRange=function(){return{x:Math.max(this.__view.clientWidth,this.__view.scrollWidth)-this.__body.offsetWidth,y:Math.max(this.__view.clientHeight,this.__view.scrollHeight)-this.__body.offsetHeight}};_proDragger.__onDragStart=function(_event){_v._$stop(_event);if(!!this.__offset)return;this.__offset={x:_v._$pageX(_event),y:_v._$pageY(_event)};this.__maxbox=this.__getMaxRange()};_proDragger.__onDragging=function(_event){if(!this.__offset)return;var _offset={x:_v._$pageX(_event),y:_v._$pageY(_event)};var _deltax=_offset.x-this.__offset.x,_deltay=_offset.y-this.__offset.y,_value={top:(parseInt(_e._$getStyle(this.__body,"top"))||0)+_deltay,left:(parseInt(_e._$getStyle(this.__body,"left"))||0)+_deltax};this.__offset=_offset;this._$setPosition(_value)};_proDragger.__onDragEnd=function(_event){if(!this.__offset)return;delete this.__maxbox;delete this.__offset;this._$dispatchEvent("ondragend",this._$getPosition())};_proDragger._$setPosition=function(_event){if(!this.__overflow){var _maxbox=this.__maxbox||this.__getMaxRange();_event.top=Math.min(_maxbox.y,Math.max(0,_event.top));_event.left=Math.min(_maxbox.x,Math.max(0,_event.left))}var _style=this.__body.style;if(this.__direction==0||this.__direction==2)_style.top=_event.top+"px";if(this.__direction==0||this.__direction==1)_style.left=_event.left+"px";this._$dispatchEvent("onchange",_event);return this};_proDragger._$getPosition=function(){return{left:parseInt(_e._$getStyle(this.__body,"left"))||0,top:parseInt(_e._$getStyle(this.__body,"top"))||0}}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=NEJ.P("nej.e"),_v=NEJ.P("nej.v"),_u=NEJ.P("nej.u"),_t=NEJ.P("nej.ut"),_p=NEJ.P("nej.ui"),_proWindow,_supWindow;if(!!_p._$$Window)return;var _seed_css=_e._$pushCSSText(".#<uispace>{position:absolute;z-index:1000;background:#fff;}.#<uispace> .zbar{line-height:40px;}.#<uispace> .zcnt{padding:20px;}.#<uispace> .zttl{margin-right:20px;text-align:left;}.#<uispace> .zcls{position:absolute;top:10px;right:10px;cursor:pointer;}");var _seed_html=_e._$addNodeTemplate('<div class="'+_seed_css+'"><div class="zbar"><div class="zttl">标题</div></div><div class="zcnt"></div><span class="zcls" title="关闭窗体">×</span></div>');_p._$$Window=NEJ.C();_proWindow=_p._$$Window._$extend(_p._$$Layer);_supWindow=_p._$$Window._$supro;_proWindow.__init=function(){this.__mopt={};this.__dopt={onchange:this.__onDragging._$bind(this)};this.__supInit()};_proWindow.__reset=function(_options){this.__supReset(_options);this.__setMask(_options.mask);this._$setAlign(_options.align);this._$setTitle(_options.title);if(!_options.draggable)return;this.__dragger=_t._$$Dragger._$allocate(this.__dopt)};_proWindow.__destroy=function(){this.__supDestroy();delete this.__align;delete this.__mclz;if(!!this.__imask){this.__imask._$recycle();delete this.__imask}if(!!this.__dragger){this.__dragger._$recycle();delete this.__dragger}};_proWindow.__initXGui=function(){this.__seed_css=_seed_css;this.__seed_html=_seed_html};_proWindow.__initNode=function(){this.__supInitNode();var _list=_e._$getChildren(this.__body);this.__ncnt=_list[1];this.__dopt.mbar=_list[0];this.__dopt.body=this.__body;_v._$addEvent(_list[2],"mousedown",this.__onClose._$bind(this));_v._$addEvent(this.__dopt.mbar,"mousedown",this.__onDragStart._$bind(this));this.__nttl=_e._$getChildren(this.__dopt.mbar)[0]};_proWindow.__onClose=function(_event){_v._$stop(_event);this._$dispatchEvent("onclose");this._$hide()};_proWindow.__onDragStart=function(_event){_v._$dispatchEvent(document,"click")};_proWindow.__onDragging=function(_event){if(!this.__mask)return;_e._$style(this.__mask,{top:_event.top+"px",left:_event.left+"px"})};_proWindow.__doPositionAlign=function(){var _func=[function(){return 0},function(_scroll,_delta,_key){return Math.max(0,_scroll[_key]+_delta[_key]/2)},function(_scroll,_delta,_key){return _scroll[_key]+_delta[_key]}],_keys=["left","top"];return function(){var _value={},_style=this.__body.style,_view=_e._$getPageBox(),_scroll={left:_view.scrollLeft,top:_view.scrollTop},_delta={left:_view.clientWidth-this.__body.offsetWidth,top:_view.clientHeight-this.__body.offsetHeight};_u._$forEach(_keys,function(_key,_index){var _handler=_func[this.__align[_index]];if(!_handler)return;_value[_key]=_handler(_scroll,_delta,_key)},this);this._$setPosition(_value)}}();_proWindow.__doShowMask=function(){if(!this.__imask){if(!this.__mclz)return;this.__mopt.parent=this.__parent;this.__imask=this.__mclz._$allocate(this.__mopt)}this.__imask._$show()};_proWindow.__doHide=function(){if(!!this.__imask)this.__imask._$hide();_supWindow.__doHide.apply(this,arguments)};_proWindow.__setMask=function(_mask){if(!!_mask){if(_mask instanceof _p._$$Mask){this.__imask=_mask;return}if(_u._$isFunction(_mask)){this.__mclz=_mask;return}this.__mclz=_p._$$Mask;if(_u._$isString(_mask))this.__mopt.clazz=_mask;return}this.__mclz=null};_proWindow._$setTitle=function(_title){if(!this.__nttl)return this;this.__nttl.innerText=_title||"标题";return this};_proWindow._$setAlign=function(){var _reg=/\s+/,_halign={left:0,center:1,right:2,auto:3},_valign={top:0,middle:1,bottom:2,auto:3};return function(_align){this.__align=(_align||"").split(_reg);var _tmp=_halign[this.__align[0]];if(_tmp==null)_tmp=1;this.__align[0]=_tmp;var _tmp=_valign[this.__align[1]];if(_tmp==null)_tmp=1;this.__align[1]=_tmp;return this}}();_proWindow._$show=function(){_supWindow._$show.apply(this,arguments);this.__doShowMask();return this}})();
(function(){var _=NEJ.P,_u=_("nej.u"),_p=_("nej.ui"),_proWindowWrapper;if(!!_p._$$WindowWrapper)return;_p._$$WindowWrapper=NEJ.C();_proWindowWrapper=_p._$$WindowWrapper._$extend(_p._$$LayerWrapper);_proWindowWrapper.__getLayerInstance=function(){return _p._$$Window._$allocate(this.__lopt)};_proWindowWrapper.__doInitLayerOptions=function(){_p._$$WindowWrapper._$supro.__doInitLayerOptions.apply(this,arguments);this.__lopt.mask=null;this.__lopt.title="标题";this.__lopt.align="";this.__lopt.draggable=!1;this.__lopt.onclose=null}})();
(function(){var _=NEJ.P;var _ui=_("nej.ui");var _pi=_("pro.ui");if(_pi._$$DialogBase)return;_pi._$$DialogBase=NEJ.C();var p=_pi._$$DialogBase._$extend(_ui._$$WindowWrapper,!0);p.__reset=function(options){window.underscore.defaults(options,{parent:document.body,clazz:"w-dialog"});this.__supReset(options)}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _u=_("nej.u");var _pi=_("pro.ui");if(_pi._$$Dialog)return;_pi._$$Dialog=NEJ.C();var p=_pi._$$Dialog._$extend(_pi._$$DialogBase,!0);var seed_html=_e._$addNodeTemplate('<div><div class="dialog-body"></div><div class="dialog-footer"><div class="btns"><input type="button" value="确定" class="okbtn btn"/><input type="button" value="取消"  class="ccbtn btn"/></div></div></div>');p.__initXGui=function(){this.__seed_html=seed_html};p.__reset=function(options){this.__supReset(options);var ccBtns=_e._$getByClassName(this.__body,"ccbtn");_u._$forEach(ccBtns,function(el){this.__doInitDomEvent([[el,"click",this.__onCCClick._$bind(this)]])},this)};p.__onOKClick=function(){this._$dispatchEvent("onok");this._$hide()};p.__onCCClick=function(){this.__layer._$dispatchEvent("onclose");this._$hide()}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _pi=_("pro.ui");var dialog=_("pro.ui.dialog");if(dialog._$$DialogModal)return;dialog._$$DialogModal=NEJ.C();var p=dialog._$$DialogModal._$extend(_pi._$$DialogBase,!0);var seed_html=_e._$addNodeTemplate('<div><div class="dialog-body"></div></div>');p.__initXGui=function(){this.__seed_html=seed_html};p.__reset=function(options){_e._$getByClassName(this.__body,"dialog-body")[0].innerHTML=options.body;this.__supReset(options)};dialog._$info=function(aOptions){var options=$.extend({mask:true,clazz:"w-dialog w-dialog-info"},aOptions);dialog._$$DialogModal._$allocate(options)._$show()};dialog._$warn=function(aOptions){var options=$.extend({mask:true,clazz:"w-dialog w-dialog-warn"},aOptions);dialog._$$DialogModal._$allocate(options)._$show()}})();
jQuery.fn.pagination=function(maxentries,opts){opts=jQuery.extend({items_per_page:10,num_display_entries:10,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"上一页",next_text:"下一页",ellipse_text:"..",prev_show_always:true,next_show_always:true,callback:function(){return false}},opts||{});return this.each(function(){function numPages(){return Math.ceil(maxentries/opts.items_per_page)}function getInterval(){var ne_half=Math.ceil(opts.num_display_entries/2);var np=numPages();var upper_limit=np-opts.num_display_entries;var start=current_page>ne_half?Math.max(Math.min(current_page-ne_half,upper_limit),0):0;var end=current_page>ne_half?Math.min(current_page+ne_half,np):Math.min(opts.num_display_entries,np);return[start,end]}function pageSelected(page_id,evt){current_page=page_id;drawLinks();var continuePropagation=opts.callback(page_id,panel);if(!continuePropagation){if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=true}}return continuePropagation}function drawLinks(){panel.empty();var interval=getInterval();var np=numPages();var getClickHandler=function(page_id){return function(evt){return pageSelected(page_id,evt)}};var appendItem=function(page_id,appendopts){page_id=page_id<0?0:page_id<np?page_id:np-1;appendopts=jQuery.extend({text:page_id+1,classes:""},appendopts||{});if(page_id==current_page){var lnk=jQuery("<span class='current'>"+appendopts.text+"</span>")}else{var lnk=jQuery("<a>"+appendopts.text+"</a>").bind("click",getClickHandler(page_id)).attr("href",opts.link_to.replace(/__id__/,page_id))}if(appendopts.classes){lnk.addClass(appendopts.classes)}panel.append(lnk)};if(opts.prev_text&&(current_page>0||opts.prev_show_always)){appendItem(current_page-1,{text:opts.prev_text,classes:"prev"})}if(interval[0]>0&&opts.num_edge_entries>0){var end=Math.min(opts.num_edge_entries,interval[0]);for(var i=0;i<end;i++){appendItem(i)}if(opts.num_edge_entries<interval[0]&&opts.ellipse_text){jQuery("<span>"+opts.ellipse_text+"</span>").appendTo(panel)}}for(var i=interval[0];i<interval[1];i++){appendItem(i)}if(interval[1]<np&&opts.num_edge_entries>0){if(np-opts.num_edge_entries>interval[1]&&opts.ellipse_text){jQuery("<span>"+opts.ellipse_text+"</span>").appendTo(panel)}var begin=Math.max(np-opts.num_edge_entries,interval[1]);for(var i=begin;i<np;i++){appendItem(i)}}if(opts.next_text&&(current_page<np-1||opts.next_show_always)){appendItem(current_page+1,{text:opts.next_text,classes:"next"})}}var current_page=opts.current_page;maxentries=!maxentries||maxentries<0?1:maxentries;opts.items_per_page=!opts.items_per_page||opts.items_per_page<0?1:opts.items_per_page;var panel=jQuery(this);this.selectPage=function(page_id){pageSelected(page_id)};this.prevPage=function(){if(current_page>0){pageSelected(current_page-1);return true}else{return false}};this.nextPage=function(){if(current_page<numPages()-1){pageSelected(current_page+1);return true}else{return false}};drawLinks();opts.callback(current_page,this)})};
(function(){var _=NEJ.P;var _e=_("nej.e");var _v=_("nej.v");var _pi=_("pro.ui");var dialog=_("pro.ui.dialog");if(dialog._$$DialogYoudaoImport)return;dialog._$$DialogYoudaoImport=NEJ.C();var p=dialog._$$DialogYoudaoImport._$extend(_pi._$$Dialog,!0);var selectOpt=function(){var currentSec=null;return{selectItems:function(){currentSec=$("#Searchresult ul li input");$("#Searchresult ul li:odd").addClass("even")},selectAll:function(){currentSec.prop("checked",true)},selectOpp:function(){currentSec.each(function(idx,el){el.checked=!el.checked})}}}();function youdaoLog(op,type,result,successdata,faildata,userId){var data={userId:userId};if(type==1){data.result=result;data.successdata=successdata;data.faildata=faildata}else if(type==2){data.subscribednum=successdata}$.Topic("biLogging").publish(op,data)}var seed_html=_e._$addNodeTemplate('<div class="m-youdao-import"><div class="dialog-body"><div class="m-rsspage"><div class="tips"><em id="J_YTotal">0</em>个内容源中还有<em id="J_YRemain" style="color:#d2402f;">0</em>个未订阅，如下</div><div id="Pagination" class="pagination"></div></div><form ><div id="hiddenresult" class="j-flag f-dn"></div><div id="Searchresult"></div></form><div class="ops"><a id="J_SelectAll" href="javascript:void(0)">全选</a> |<a id="J_SelectOpp" href="javascript:void(0)">反选</a></div></div><div class="dialog-footer"><div class="btns"><input type="button" value="导入" class="okbtn btn btn-primary j-import"/></div></div></div>');var importResultTplKey=_e._$addHtmlTemplate("<div>您已成功导入有道阅读帐户中 ${Success} 个内容源{if Fail > 0}，另有 ${Fail} 源导入失败{/if}。<br />{if Fail > 0}<span>导入失败的源的名称如下：${Detail}</span>{/if}</div>");p.__reset=function(_options){_options.title="有道导入";_options.clazz="w-dialog w-dialog-wide";_e._$getByClassName(this.__body,"j-flag")[0].innerHTML=_options.body;this.__supReset(_options);$("#J_YTotal").text($("#J_YTotalO").val());$("#J_YRemain").text($("#J_YRemainO").val());this.__initSubscribeItemPage();this.__doInitDomEvent([[_e._$getByClassName(this.__body,"j-import")[0],"click",this.__onImportBtnClick._$bind(this)]])};p.__initSubscribeItemPage=function(){var num_length=$("#hiddenresult .result").length;this.__getPage=num_length;this.__num_select=0;$("#Searchresult").empty();if(num_length==0)return;if(num_length===1){$("#Searchresult").append($("#hiddenresult div.result"));selectOpt.selectItems()}else{var num_entries=num_length;$("#Pagination").pagination(num_entries,{num_edge_entries:1,num_display_entries:3,link_to:"javascript:",callback:this.__pageselectCallback._$bind(this),items_per_page:1})}};p.__pageselectCallback=function(page_index,jq){var currentSec=$("#Searchresult .result");if(currentSec.length>0){if(this.__num_select===0){$("#hiddenresult").prepend(currentSec)}else if(this.__num_select===this.__getPage-1){$("#hiddenresult").append(currentSec)}else{currentSec.insertBefore($("#hiddenresult .result:eq("+this.__num_select+")"))}}var selectSec=$("#hiddenresult .result:eq("+page_index+")");this.__num_select=page_index;$("#Searchresult").empty().append(selectSec);selectOpt.selectItems()};p.__initXGui=function(){this.__seed_html=seed_html};p.__initNode=function(){this.__supInitNode();$("#J_SelectAll",this.__body).click(function(){selectOpt.selectAll()});$("#J_SelectOpp",this.__body).click(function(){selectOpt.selectOpp()})};p.__onImportBtnClick=function(e){if($("#Searchresult input:checked",this.__body).length===0){YD.popTip("请选择导入源！");return}$.Topic("gaLogging").publish("addyoudaosubs");var self=this;var submitBtn=_v._$getElement(e);submitBtn.disabled=true;$.ajax({type:"POST",url:"/youdaoSubs.do",data:$(this.__body.getElementsByTagName("form")[0]).serialize(),success:function(data){self._$hide();var options={onclose:function(){location.reload()},title:"有道导入源"};if(data.ResultCode===1){if(data.Success*1===0&&data.Fail*1>0){youdaoLog("youdaofail",0,"",0,0,data.userId);youdaoLog("youdaodao",1,"fail",0,data.Fail,data.userId)}if(data.Fail*1===0){youdaoLog("youdaodao",1,"success",data.Success,0,data.userId);youdaoLog("youdaosuccess",0,"",0,0,data.userId)}if(data.Fail*1>0){youdaoLog("youdaodao",1,"fail",data.Success,data.Fail,data.userId)}if(data.Success*1>0&&data.Fail*1>0){youdaoLog("youdaosuccfail",0,"",0,0,data.userId)}options.body=_e._$getHtmlTemplate(importResultTplKey,data);dialog._$info(options)}else if(data.ResultCode===0){options.body="抱歉，您的有道阅读帐号中暂无内容源！";dialog._$warn(options)}},dataType:"json"}).always(function(){submitBtn.disabled=false})}})();
(function(){var p=NEJ.P("nej.u");var __chrsz=8;var __rol=function(_number,_count){return _number<<_count|_number>>>32-_count};var __add=function(x,y){var _lsw=(x&65535)+(y&65535),_msw=(x>>16)+(y>>16)+(_lsw>>16);return _msw<<16|_lsw&65535};var __sha1ft=function(t,b,c,d){if(t<20)return b&c|~b&d;if(t<40)return b^c^d;if(t<60)return b&c|b&d|c&d;return b^c^d};var __sha1kt=function(t){if(t<20)return 1518500249;if(t<40)return 1859775393;if(t<60)return-1894007588;return-899497514};var __str2bin=function(){var _lmove=function(i){return i%32},_bmove=function(i){return 32-__chrsz-i%32};return function(_str,_little){var _bin=[],_mask=(1<<__chrsz)-1,_move=_little?_lmove:_bmove;for(var i=0,l=_str.length*__chrsz;i<l;i+=__chrsz)_bin[i>>5]|=(_str.charCodeAt(i/__chrsz)&_mask)<<_move(i);return _bin}}();var __bin2hex=function(){var _hextab="0123456789abcdef",_lmove=function(i){return i%4},_bmove=function(i){return 3-i%4};return function(_binarray,_little){var _arr=[],_move=_little?_lmove:_bmove;for(var i=0,l=_binarray.length*4;i<l;i++){_arr.push(_hextab.charAt(_binarray[i>>2]>>_move(i)*8+4&15)+_hextab.charAt(_binarray[i>>2]>>_move(i)*8&15))}return _arr.join("")}}();var __bin2str=function(){var _lmove=function(i){return i%32},_bmove=function(i){return 32-__chrsz-i%32};return function(_bin,_little){var _arr=[],_mask=(1<<__chrsz)-1,_move=_little?_lmove:_bmove;for(var i=0,l=_bin.length*32;i<l;i+=__chrsz)_arr.push(String.fromCharCode(_bin[i>>5]>>>_move(i)&_mask));return _arr.join("")}}();var __bin2b64=function(){var _b64pad="=",_b64tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_lmove=function(i){return i%4},_bmove=function(i){return 3-i%4};return function(_binarray,_little){var _arr=[],_move=_little?_lmove:_bmove;for(var i=0,_triplet;i<_binarray.length*4;i+=3){_triplet=(_binarray[i>>2]>>8*_move(i)&255)<<16|(_binarray[i+1>>2]>>8*_move(i+1)&255)<<8|_binarray[i+2>>2]>>8*_move(i+2)&255;for(var j=0;j<4;j++)_arr.push(i*8+j*6>_binarray.length*32?_b64pad:_b64tab.charAt(_triplet>>6*(3-j)&63))}return _arr.join("")}}();var __md5cm=function(q,a,b,x,s,t){return __add(__rol(__add(__add(a,q),__add(x,t)),s),b)};var __md5ff=function(a,b,c,d,x,s,t){return __md5cm(b&c|~b&d,a,b,x,s,t)};var __md5gg=function(a,b,c,d,x,s,t){return __md5cm(b&d|c&~d,a,b,x,s,t)};var __md5hh=function(a,b,c,d,x,s,t){return __md5cm(b^c^d,a,b,x,s,t)};var __md5ii=function(a,b,c,d,x,s,t){return __md5cm(c^(b|~d),a,b,x,s,t)};var __data2md5=function(x,y){x[y>>5]|=128<<y%32;x[(y+64>>>9<<4)+14]=y;var a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(var i=0,l=x.length,_oa,_ob,_oc,_od;i<l;i+=16){_oa=a;_ob=b;_oc=c;_od=d;a=__md5ff(a,b,c,d,x[i+0],7,-680876936);d=__md5ff(d,a,b,c,x[i+1],12,-389564586);c=__md5ff(c,d,a,b,x[i+2],17,606105819);b=__md5ff(b,c,d,a,x[i+3],22,-1044525330);a=__md5ff(a,b,c,d,x[i+4],7,-176418897);d=__md5ff(d,a,b,c,x[i+5],12,1200080426);c=__md5ff(c,d,a,b,x[i+6],17,-1473231341);b=__md5ff(b,c,d,a,x[i+7],22,-45705983);a=__md5ff(a,b,c,d,x[i+8],7,1770035416);d=__md5ff(d,a,b,c,x[i+9],12,-1958414417);c=__md5ff(c,d,a,b,x[i+10],17,-42063);b=__md5ff(b,c,d,a,x[i+11],22,-1990404162);a=__md5ff(a,b,c,d,x[i+12],7,1804603682);d=__md5ff(d,a,b,c,x[i+13],12,-40341101);c=__md5ff(c,d,a,b,x[i+14],17,-1502002290);b=__md5ff(b,c,d,a,x[i+15],22,1236535329);a=__md5gg(a,b,c,d,x[i+1],5,-165796510);d=__md5gg(d,a,b,c,x[i+6],9,-1069501632);c=__md5gg(c,d,a,b,x[i+11],14,643717713);b=__md5gg(b,c,d,a,x[i+0],20,-373897302);a=__md5gg(a,b,c,d,x[i+5],5,-701558691);d=__md5gg(d,a,b,c,x[i+10],9,38016083);c=__md5gg(c,d,a,b,x[i+15],14,-660478335);b=__md5gg(b,c,d,a,x[i+4],20,-405537848);a=__md5gg(a,b,c,d,x[i+9],5,568446438);d=__md5gg(d,a,b,c,x[i+14],9,-1019803690);c=__md5gg(c,d,a,b,x[i+3],14,-187363961);b=__md5gg(b,c,d,a,x[i+8],20,1163531501);a=__md5gg(a,b,c,d,x[i+13],5,-1444681467);d=__md5gg(d,a,b,c,x[i+2],9,-51403784);c=__md5gg(c,d,a,b,x[i+7],14,1735328473);b=__md5gg(b,c,d,a,x[i+12],20,-1926607734);a=__md5hh(a,b,c,d,x[i+5],4,-378558);d=__md5hh(d,a,b,c,x[i+8],11,-2022574463);c=__md5hh(c,d,a,b,x[i+11],16,1839030562);b=__md5hh(b,c,d,a,x[i+14],23,-35309556);a=__md5hh(a,b,c,d,x[i+1],4,-1530992060);d=__md5hh(d,a,b,c,x[i+4],11,1272893353);c=__md5hh(c,d,a,b,x[i+7],16,-155497632);b=__md5hh(b,c,d,a,x[i+10],23,-1094730640);a=__md5hh(a,b,c,d,x[i+13],4,681279174);d=__md5hh(d,a,b,c,x[i+0],11,-358537222);c=__md5hh(c,d,a,b,x[i+3],16,-722521979);b=__md5hh(b,c,d,a,x[i+6],23,76029189);a=__md5hh(a,b,c,d,x[i+9],4,-640364487);d=__md5hh(d,a,b,c,x[i+12],11,-421815835);c=__md5hh(c,d,a,b,x[i+15],16,530742520);b=__md5hh(b,c,d,a,x[i+2],23,-995338651);a=__md5ii(a,b,c,d,x[i+0],6,-198630844);d=__md5ii(d,a,b,c,x[i+7],10,1126891415);c=__md5ii(c,d,a,b,x[i+14],15,-1416354905);b=__md5ii(b,c,d,a,x[i+5],21,-57434055);a=__md5ii(a,b,c,d,x[i+12],6,1700485571);d=__md5ii(d,a,b,c,x[i+3],10,-1894986606);c=__md5ii(c,d,a,b,x[i+10],15,-1051523);b=__md5ii(b,c,d,a,x[i+1],21,-2054922799);a=__md5ii(a,b,c,d,x[i+8],6,1873313359);d=__md5ii(d,a,b,c,x[i+15],10,-30611744);c=__md5ii(c,d,a,b,x[i+6],15,-1560198380);b=__md5ii(b,c,d,a,x[i+13],21,1309151649);a=__md5ii(a,b,c,d,x[i+4],6,-145523070);d=__md5ii(d,a,b,c,x[i+11],10,-1120210379);c=__md5ii(c,d,a,b,x[i+2],15,718787259);b=__md5ii(b,c,d,a,x[i+9],21,-343485551);a=__add(a,_oa);b=__add(b,_ob);c=__add(c,_oc);d=__add(d,_od)}return[a,b,c,d]};var __data2hmacmd5=function(_key,_data){var _bkey=__str2bin(_key,!0);if(_bkey.length>16)_bkey=__data2md5(_bkey,_key.length*__chrsz);var _ipad=Array(16),_opad=Array(16);for(var i=0;i<16;i++){_ipad[i]=_bkey[i]^909522486;_opad[i]=_bkey[i]^1549556828}var _hash=__data2md5(_ipad.concat(__str2bin(_data,!0)),512+_data.length*__chrsz);return __data2md5(_opad.concat(_hash),512+128)};var __data2sha1=function(x,_length){x[_length>>5]|=128<<24-_length%32;x[(_length+64>>9<<4)+15]=_length;var w=Array(80),a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776;for(var i=0,l=x.length,_olda,_oldb,_oldc,_oldd,_olde;i<l;i+=16){_olda=a;_oldb=b;_oldc=c;_oldd=d;_olde=e;for(var j=0;j<80;j++){w[j]=j<16?x[i+j]:__rol(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=__add(__add(__rol(a,5),__sha1ft(j,b,c,d)),__add(__add(e,w[j]),__sha1kt(j)));e=d;d=c;c=__rol(b,30);b=a;a=t}a=__add(a,_olda);b=__add(b,_oldb);c=__add(c,_oldc);d=__add(d,_oldd);e=__add(e,_olde)}return[a,b,c,d,e]};var __data2hmacsha1=function(_key,_data){var _bkey=__str2bin(_key);if(_bkey.length>16)_bkey=__data2sha1(_bkey,_key.length*__chrsz);var _ipad=Array(16),_opad=Array(16);for(var i=0;i<16;i++){_ipad[i]=_bkey[i]^909522486;_opad[i]=_bkey[i]^1549556828}var _hash=__data2sha1(_ipad.concat(__str2bin(_data)),512+_data.length*__chrsz);return __data2sha1(_opad.concat(_hash),512+160)};p._$hmacsha12hex=function(_key,_data){return __bin2hex(__data2hmacsha1(_key,_data))};p._$hmacsha12b64=function(_key,_data){return __bin2b64(__data2hmacsha1(_key,_data))};p._$hmacsha12str=function(_key,_data){return __bin2str(__data2hmacsha1(_key,_data))};p._$hmacmd52hex=function(_key,_data){return __bin2hex(__data2hmacmd5(_key,_data),!0)};p._$hmacmd52b64=function(_key,_data){return __bin2b64(__data2hmacmd5(_key,_data),!0)};p._$hmacmd52str=function(_key,_data){return __bin2str(__data2hmacmd5(_key,_data),!0)};p._$sha12hex=function(_data){return __bin2hex(__data2sha1(__str2bin(_data),_data.length*__chrsz))};p._$sha12b64=function(_data){return __bin2b64(__data2sha1(__str2bin(_data),_data.length*__chrsz))};p._$sha12str=function(_data){return __bin2str(__data2sha1(__str2bin(_data),_data.length*__chrsz))};p._$md52hex=function(_data){return __bin2hex(__data2md5(__str2bin(_data,!0),_data.length*__chrsz),!0)};p._$md52b64=function(_data){return __bin2b64(__data2md5(__str2bin(_data,!0),_data.length*__chrsz),!0)};p._$md52str=function(_data){return __bin2str(__data2md5(__str2bin(_data,!0),_data.length*__chrsz),!0)};p._$str2hex=function(_data){return __bin2hex(__str2bin(_data,!0),!0)}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _v=_("nej.v");var _pi=_("pro.ui");var _u=_("nej.u");var _pu=_("pro.util");var ydErrors=_("yd.errors");var dialog=_("pro.ui.dialog");if(dialog._$$DialogYoudaoLogin)return;dialog._$$DialogYoudaoLogin=NEJ.C();var p=dialog._$$DialogYoudaoLogin._$extend(_pi._$$Dialog,!0);var seed_html=_e._$addNodeTemplate('<div class="m-youdao-login"><div class="dialog-body"><form action="" class="w-form"><p class="js-nej-er"></p><div class="formitm"><label class="lab">帐号:</label><div class="ipt"><input type="text" data-message="请输入账号" data-required="true" class="w-ipt" name="youdaouser"/></div></div><div class="formitm"><label class="lab">密码:</label><div class="ipt"><input type="password" data-message="请输入密码" data-required="true" class="w-ipt" name="youdaopass" /></div></div></form></div><div class="dialog-footer"><div class="btns"><input type="button" value="登录" class="okbtn btn btn-primary j-login"/></div></div></div>');window.fail=0;p.__reset=function(_options){$.Topic("gaLogging").publish("youdaoLogin");_options.title="有道登陆";this.__doInitDomEvent([[_e._$getByClassName(this.__body,"j-login")[0],"click",this.__onLoginClick._$bind(this)]]);this.__supReset(_options)};p.__initXGui=function(){this.__seed_html=seed_html};p.__initNode=function(){this.__supInitNode();this.__form=_pu._$$WebForm._$allocate({form:this.__body.getElementsByTagName("form")[0]})};p.__onLoginClick=function(e){var target=_v._$getElement(e);var form=this.__form;if(!form._$checkValidity())return;target.disabled=true;var self=this;var data=form._$data();data.youdaopass=_u._$md52hex(data.youdaopass);data.type=1;$.ajax({dataType:"jsonp",url:"https://yuedu.163.com/youdaoLogin.do",data:data,jsonpCallback:"youdaoJsonp",success:function(data){target.disabled=false;if(data==="fail"){form._$showMsgError(form.__form,"账号密码不匹配");return}dialog._$$DialogYoudaoImport._$allocate({mask:true,destroyable:true,body:data})._$show();self.__resetForm();self._$hide()},error:function(data,status,jqXHR){target.disabled=false;if(status=="parsererror"){form._$showMsgError(form.__form,"账号密码不匹配")}else{YD.popTip(ydErrors.ERROR_UNKNOWN.message)}}})};p.__doInitLayerOptions=function(){var self=this;this.constructor._$supro.__doInitLayerOptions.apply(this,arguments);this.__lopt.onclose=this.__resetForm._$bind(this)};p.__resetForm=function(){var errEl=_e._$getByClassName(this.__body,"js-nej-er")[0];errEl.style.display="none";$('input[type="text"]',this.__body).val("");$('input[type="password"]',this.__body).val("")}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _v=_("nej.v");var _pi=_("pro.ui");var _j=_("nej.j");var dialog=_("pro.ui.dialog");if(dialog._$$DialogYoudao)return;dialog._$$DialogYoudao=NEJ.C();var p=dialog._$$DialogYoudao._$extend(_pi._$$Dialog,!0);var seed_html=_e._$addNodeTemplate('<div class="m-importYoudao"><div class="dialog-body"><h5>选择一个有道帐号进行导入</h5><p><input id="J_YDRadio" type="radio" checked="true" name="yueduUser" value="'+GUser.userName+'" /> <label id="J_YDUser">'+GUser.userName+'</label></p></div><div class="dialog-footer"><div class="dialog-other"><a class="j-loginOtherAccount" href="javascript:">用另外一个账号登录</a></div><div class="btns"><input type="button" value="继续" class="okbtn btn btn-primary j-youdaoImport"/></div></div></div>');p.__reset=function(_options){_options.title="导入有道";this.__doInitDomEvent([[_e._$getByClassName(this.__body,"j-loginOtherAccount")[0],"click",this.__onLoginOtherAccountClick._$bind(this)],[_e._$getByClassName(this.__body,"j-youdaoImport")[0],"click",this.__onYoudaoImportClick._$bind(this)]]);this.__supReset(_options)};p.__initXGui=function(){this.__seed_html=seed_html};p.__onLoginOtherAccountClick=function(){this._$hide();if(!this.__youdaoLoginDialog){this.__youdaoLoginDialog=dialog._$$DialogYoudaoLogin._$allocate({mask:true})}this.__youdaoLoginDialog._$show()};p.__onYoudaoImportClick=function(e){var target=_v._$getElement(e);target.disabled=true;var data={type:0,youdaouser:GUser.userName};var self=this;$.ajax({type:"POST",url:"/youdaoLogin.do",data:data,success:function(data){target.disabled=false;self._$hide();dialog._$$DialogYoudaoImport._$allocate({mask:true,destroyable:true,body:data})._$show()},dataType:"html"})}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _v=_("nej.v");var _pi=_("pro.ui");var dialog=_("pro.ui.dialog");if(dialog._$$DialogBlackList)return;dialog._$$DialogBlackList=NEJ.C();var p=dialog._$$DialogBlackList._$extend(_pi._$$Dialog,!0);var seed_html=_e._$addNodeTemplate('<div class="dialog-body"><div><div>您的帐号因发表不适宜的言论，评论已被禁止。</div><div>如有任何问题请邮件至reader@188.com反馈给我们。谢谢~</div></div</div><div class="dialog-footer"><div class="btns"><input type="button" value="确定" class="ccbtn btn btn-primary"/></div></div>');p.__reset=function(_options){_options.title="提示";this.__supReset(_options)};p.__initXGui=function(){this.__seed_html=seed_html};p.__initNode=function(){this.__supInitNode()}})();
(function(){var _=NEJ.P;var _u=NEJ.P("nej.u");var ydAPI=_("yd.api");var ydErrors=_("yd.errors");var dialog=_("pro.ui.dialog");var resultCode={};window.underscore.each(ydErrors,function(item,key){resultCode[item.code]=key});$.ajaxPrefilter("*",function(s,originalSettings,jqXHR){var dtd=$.Deferred();jqXHR.then(function(data,status,jqXHR){if(jqXHR.getResponseHeader("Content-Type")&&jqXHR.getResponseHeader("Content-Type").indexOf("application/json")==0&&_u._$isObject(data)&&typeof data.ResultCode!=="undefined"&&data.ResultCode!==0&&s.url!="/youdaoSubs.do"&&s.url.indexOf("_jq_filter=0")==-1){if(data.ResultCode==ydErrors.ERROR_NOT_LOGGED_IN.code){login163()}if(data.ResultCode==ydErrors.ERROR_IN_BLACKLIST.code){dialog._$$DialogBlackList._$allocate({mask:true,clazz:"w-dialog w-dialog-middle"})._$show()}var error=ydErrors[resultCode[data.ResultCode]||"ERROR_UNKNOWN"];if(typeof error.redirectTo==="string"){location.href=error.redirectTo;return}if(!error.silent)YD.popTip(error.message);dtd.rejectWith(this,arguments)}else{dtd.resolveWith(this,arguments)}},function(){YD.popTip(ydErrors.ERROR_UNKNOWN.message);dtd.rejectWith(this,arguments)});jqXHR=dtd.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail});ydAPI.checkYoudaoAuth=function(cb){$.ajax({type:"GET",url:"/youdaoNote.do?operation=checkAuthorization",dataType:"json",success:function(data){cb(data.isAuthorized)}})};ydAPI.saveToYoudaoNote=function(data,cb){$.ajax({type:"POST",url:"/youdaoNote.do",data:{operation:"publish",sourceUuid:data.sourceID,contentUuid:data.entryID,title:data.title,sourceUrl:data.source},dataType:"json",success:function(){cb();YD.popTip("成功收藏至有道云笔记")},error:function(){YD.popTip("收藏至有道云笔记失败")}})};ydAPI.toggleFav=function(model,cb){return $.post("/source.do",{operation:model.favor=="unstar"?"addFavorite":"delFavorite",contentUuid:model.entryID,dataEntry:model.dataEntry,entrySignature:model.entrySignature},function(data){model.favor=data.state;cb.apply(null,arguments)},"json")};ydAPI.toggleSubscribe=function(operation,data,cb){return $.post("/subscribe.do?operation="+operation,data,function(data){cb(data)},"json")};ydAPI.getRelatedArticles=function(id,cid,cb){$.getJSON("/source.do?operation=related",{id:id,cid:cid},cb)};ydAPI.getSourceTitle=function(id,cb){return $.get("/getSourceTitle.do?source_uuid="+id,cb,"json")};ydAPI.delComment=function(data,cb){return $.post("/snsComment.do?operation=delete",data,cb,"json")};ydAPI.comment=function(data,cb){return $.post("/snsComment.do",data,cb,"json").always(function(){$.Topic("gaLogging").publish("comment")})};ydAPI.praise=function(type,id,cb){$.Topic("gaLogging").publish("article_like");return $.post("/snsPraise.do?type="+type,{id:id},cb,"json")};ydAPI.updateSubscribeOrder=function(sourceUuids,cb){$.post("/mysubs.do?operation=updateSubscribeOrder",{sourceUuids:sourceUuids},cb,"json")};ydAPI.getBalance=function(cb){$.post("/getBalance.do",{},cb,"json")};ydAPI.loveWemedia=function(obj,cb){return $.post("/weMediaPresent.do?ret=1",obj,cb,"json")};ydAPI.checkSubscribed=function(obj,cb){return $.get("/subscribe.do?operation=check",obj,cb,"json")}})();
(function(){var _=NEJ.P,_r=NEJ.R,_f=NEJ.F,_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut"),_ckey="dat-"+ +(new Date),_proCache;if(!!_p._$$Cache)return;_p._$$Cache=NEJ.C();_proCache=_p._$$Cache._$extend(_p._$$Event);_proCache.__init=function(){this.__supInit();this.__cache=this.constructor[_ckey];if(!this.__cache){this.__cache={};this.__cache[_ckey+"-l"]={};this.constructor[_ckey]=this.__cache}};_proCache.__getDataInCache=function(_key){return this.__cache[_key]};_proCache.__setDataInCache=function(_key,_value){this.__cache[_key]=_value};_proCache.__getDataInCacheWithDefault=function(_key,_default){var _data=this.__getDataInCache(_key);if(_data==null){_data=_default;this.__setDataInCache(_key,_data)}return _data};_proCache.__delDataInCache=function(_key){if(_key!=null){delete this.__cache[_key];return}_u._$forIn(this.__cache,function(_item,_key){if(_key==_ckey+"-l")return;this.__delDataInCache(_key)},this)};_proCache.__delDataInStorage=function(_key){if(!!_j._$delDataInStorage)return _j._$delDataInStorage(_key)};_proCache.__getDataInStorage=function(_key){if(!!_j._$getDataInStorage)return _j._$getDataInStorage(_key)};_proCache.__setDataInStorage=function(_key,_value){if(!!_j._$setDataInStorage)_j._$setDataInStorage(_key,_value)};_proCache.__getDataLocalWithDefault=function(_key,_default){var _data=this.__getDataLocal(_key);if(_data==null){_data=_default;this.__setDataLocal(_key,_data)}return _data};_proCache.__getDataLocal=function(_key){var _data=this.__getDataInCache(_key);if(_data!=null)return _data;_data=this.__getDataInStorage(_key);if(_data!=null)this.__setDataInCache(_key,_data);return _data};_proCache.__setDataLocal=function(_key,_value){this.__setDataInStorage(_key,_value);this.__setDataInCache(_key,_value)};_proCache.__delDataLocal=function(_key){if(_key!=null){delete this.__cache[_key];if(!!_j._$delDataInStorage)_j._$delDataInStorage(_key);return}_u._$forIn(this.__cache,function(_item,_key){if(_key==_ckey+"-l")return;this.__delDataLocal(_key)},this)};_proCache._$clearDataLocal=function(){this.__delDataLocal();return this};_proCache.__doCallbackRequest=function(_key){var _data=this.__cache[_ckey+"-l"],_args=_r.slice.call(arguments,1);_u._$forEach(_data[_key],function(_callback){try{_callback.apply(null,_args)}catch(ex){console.error(ex.message);console.error(ex.stack)}});delete _data[_key]};_proCache.__doQueueRequest=function(_key,_callback){_callback=_callback||_f;var _list=this.__cache[_ckey+"-l"][_key];if(!_list){_list=[_callback];this.__cache[_ckey+"-l"][_key]=_list;return!1}_list.push(_callback);return!0};_proCache.__hasFragment=function(_list,_offset,_limit){if(!_list)return!1;_offset=parseInt(_offset)||0;_limit=parseInt(_limit)||0;if(!_limit){if(!_list.loaded)return!1;_limit=_list.length}if(!!_list.loaded)_limit=Math.min(_limit,_list.length-_offset);for(var i=0;i<_limit;i++)if(!_list[_offset+i])return!1;return!0}})();
(function(){var _=NEJ.P;var _p=_("nej.ut");var _j=_("nej.j");var _u=_("nej.u");var _f=NEJ.F;var _pc=_("pro.cache");_pc._$$CacheKey=NEJ.C();var p=_pc._$$CacheKey._$extend(_p._$$Cache);p.__init=function(){this.__supInit();this._$batEvent({dodataload:this.__doDataLoad._$bind(this)})};p.__reset=function(options){this.__supReset(options);if(typeof this.__ropt==="undefined"){this.__ropt={}}if(_u._$isObject(options.request)){NEJ.X(this.__ropt,options.request)}underscore.defaults(this.__ropt,{type:"json"})};p.__doDataLoad=function(options){this.__ropt.onload=options.onload;this.__ropt.query=this.__doGenRequestQueryOpt(options);var ropt=this.__ropt;$.get(this.__url,ropt.query,ropt.onload,ropt.type).fail(ropt.onload)};p.__doGenRequestQueryOpt=_f;p.__getData=function(options,data){if(typeof data.resultCode!="undefined"&&data.resultCode==0){this.__setDataInCache(options.key,data)}this.__doCallbackRequest(options.key,data)};p._$getData=function(key){var data=this.__getDataInCache(key);if(data){this._$dispatchEvent("ondataload",data);return this}if(!this.__doQueueRequest(key,this._$dispatchEvent._$bind(this,"ondataload"))){var options={};options.key=key;options.onload=this.__getData._$bind(this,options);this._$dispatchEvent("dodataload",options)}return this}})();
(function(){var _=NEJ.P;var _pc=_("pro.cache");_pc._$$CacheKey2=NEJ.C();var p=_pc._$$CacheKey2._$extend(_pc._$$CacheKey);p.__getData=function(options,data){this.__setDataInCache(options.rkey,data);this.__doCallbackRequest(options.rkey,options)};p._$getData=function(id,key){var rkey=id+key;var data=this.__getDataInCache(rkey);var ropt={id:id,key:key};if(data){this._$dispatchEvent("ondataload",ropt);return this}if(!this.__doQueueRequest(rkey,this._$dispatchEvent._$bind(this,"ondataload"))){ropt.rkey=rkey;ropt.onload=this.__getData._$bind(this,ropt);this._$dispatchEvent("dodataload",ropt)}return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_p=_("nej.ui"),_proItem;if(!!_p._$$Item)return;_p._$$Item=NEJ.C();_proItem=_p._$$Item._$extend(_p._$$Abstract);_proItem.__init=function(){var _seed=+(new Date);return function(){this.__id="itm-"+ ++_seed;this.__supInit()}}();_proItem.__reset=function(_options){this.__supReset(_options);this.__index=_options.index;this.__total=_options.total;this.__range=_options.range;this._$refresh(_options.data)};_proItem.__destroy=function(){this.__supDestroy();delete this.__data;delete this.__index;delete this.__total;delete this.__range};_proItem.__doRefresh=_f;_proItem._$getId=function(){return this.__id};_proItem._$getData=function(){return this.__data};_proItem._$refresh=function(_data){this.__data=_data||{};this.__doRefresh(this.__data)}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.ui"),_proListItem,_supListItem;if(!!_p._$$ListItem)return;_p._$$ListItem=NEJ.C();_proListItem=_p._$$ListItem._$extend(_p._$$Item);_supListItem=_p._$$ListItem._$supro;_proListItem.__reset=function(_options){this.__supReset(_options);this.__pkey=_options.pkey||"id";this.__id=this.__data[this.__pkey]};_proListItem.__onDelete=function(_data){this._$dispatchEvent("ondelete",{ext:_data,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};_proListItem.__onUpdate=function(_data){this._$dispatchEvent("onupdate",{ext:_data,id:this._$getId(),data:this._$getData(),body:this._$getBody()})}})();
(function(){var _=NEJ.P;var util=_("pro.util");function buildQuery(value,query){var url=value;url+=value.indexOf("?")===-1?"?":"&";return url+query}util.buildQuery=buildQuery})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ui"),_proAbstractPager;if(!!_p._$$AbstractPager)return;var _seed_css=_e._$pushCSSText(".#<uispace>{font-size:12px;line-height:160%;}.#<uispace> a{margin:0 2px;padding:2px 4px;text-decoration:none;}.#<uispace> .js-disabled{cursor:default;}.#<uispace> .js-selected{cursor:default;color:#a2a2a3;}");var _seed_page=_e._$addHtmlTemplate('{trim}{if !defined("noprv")||!noprv}<a href="#" class="zbtn zprv ${\'js-p-\'|seed}">上一页</a>{/if}{list 1..number as x}<a href="#" class="zpgi zpg${x} ${\'js-i-\'|seed}"></a>{/list}{if !defined("nonxt")||!nonxt}<a href="#" class="zbtn znxt ${\'js-n-\'|seed}">下一页</a>{/if}{/trim}');_p._$$AbstractPager=NEJ.C();_proAbstractPager=_p._$$AbstractPager._$extend(_p._$$Abstract);_proAbstractPager.__init=function(){this.__popt={onchange:this.__onChange._$bind(this)};this.__supInit()};_proAbstractPager.__reset=function(_options){this.__supReset(_options);this.__popt.total=_options.total;this.__popt.index=_options.index};_proAbstractPager.__destroy=function(){this.__supDestroy();this.__page._$recycle();delete this.__page;this._$unbind()};_proAbstractPager.__initXGui=function(){this.__seed_css=_seed_css};_proAbstractPager.__initNode=function(){this.__supInitNode();var _seed=_e._$getHtmlTemplateSeed();this.__popt.list=_e._$getByClassName(this.__body,"js-i-"+_seed);this.__popt.pbtn=(_e._$getByClassName(this.__body,"js-p-"+_seed)||_r)[0];this.__popt.nbtn=(_e._$getByClassName(this.__body,"js-n-"+_seed)||_r)[0]};_proAbstractPager.__doGenPageListXhtml=function(_data){return _e._$getHtmlTemplate(_seed_page,_data)};_proAbstractPager.__onChange=function(_event){if(this.__flag)return;var _index=_event.index,_total=_event.total;this.__flag=!0;this._$updatePage(_index,_total);_u._$forEach(this.__binders,function(_pager){_pager._$updatePage(_index,_total)});this.__flag=!1;this._$dispatchEvent("onchange",_event)};_proAbstractPager._$bind=function(_parent){_parent=_e._$get(_parent);if(!_parent)return this;var _pager=this.constructor._$allocate({parent:_parent,index:this._$getIndex(),total:this._$getTotal()});_pager._$setEvent("onchange",this.__popt.onchange);if(!this.__binders)this.__binders=[];this.__binders.push(_pager);return this};_proAbstractPager._$unbind=function(){var _doRemove=function(_pager,_index,_list){_pager._$recycle();_list.splice(_index,1)};return function(){_u._$reverseEach(this.__binders,_doRemove)}}();_proAbstractPager._$setIndex=function(_index){if(!this.__page)return;this.__page._$setIndex(_index)};_proAbstractPager._$getIndex=function(){if(!this.__page)return 1;return this.__page._$getIndex()};_proAbstractPager._$getTotal=function(){if(!this.__page)return 1;return this.__page._$getTotal()};_proAbstractPager._$updatePage=function(_index,_total){if(!this.__page)return;this.__page._$updatePage(_index,_total)};_proAbstractPager._$updateTotal=function(_total){if(!this.__page)return;this.__page._$updateTotal(_total)}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_proAbstractPage;if(!!_p._$$AbstractPage)return;_p._$$AbstractPage=NEJ.C();_proAbstractPage=_p._$$AbstractPage._$extend(_p._$$Event);_proAbstractPage.__reset=function(_options){this.__supReset(_options);this.__pbtn=_options.pbtn;this.__nbtn=_options.nbtn;this.__sbtn=_options.sbtn;this.__ebtn=_options.ebtn;this.__name=_options.event||"click";this.__selected=_options.selected||"js-selected";this.__disabled=_options.disabled||"js-disabled";this.__doPageListCheck(_options.list);this._$updatePage(_options.index||1,_options.total||1)};_proAbstractPage.__destroy=function(){this.__supDestroy();delete this.__list;delete this.__name;delete this.__pbtn;delete this.__nbtn;delete this.__sbtn;delete this.__ebtn;delete this.__last;delete this.__total;delete this.__index;delete this.__selected;delete this.__disabled};_proAbstractPage.__doPageListCheck=function(){var _doInitDomEvent=function(_node){this.__list.push(_node);this.__doInitDomEvent([[_node,this.__name,this.__onClick._$bind2(this,0)]])};return function(_list){this.__list=[];this.__doInitDomEvent([[this.__pbtn,"click",this.__onClick._$bind2(this,-1)],[this.__nbtn,"click",this.__onClick._$bind2(this,1)],[this.__sbtn,"click",this.__onClick._$bind2(this,-2)],[this.__ebtn,"click",this.__onClick._$bind2(this,2)]]);_u._$forEach(_list,_doInitDomEvent,this)}}();_proAbstractPage.__doSetNodeIndex=function(_node,_index){if(_index==null){_node.innerText="";_e._$setStyle(_node,"display","none");_e._$delClassName(_node,this.__selected)}else{_node.innerText=_index;_e._$setStyle(_node,"display","");_index==this.__index?_e._$addClassName(_node,this.__selected):_e._$delClassName(_node,this.__selected)}};_proAbstractPage.__doSyncBtnState=function(){if(this.__index<=1){_e._$addClassName(this.__pbtn,this.__disabled);_e._$addClassName(this.__sbtn,this.__disabled)}else{_e._$delClassName(this.__pbtn,this.__disabled);_e._$delClassName(this.__sbtn,this.__disabled)}if(this.__index>=this.__total){_e._$addClassName(this.__nbtn,this.__disabled);_e._$addClassName(this.__ebtn,this.__disabled)}else{_e._$delClassName(this.__nbtn,this.__disabled);_e._$delClassName(this.__ebtn,this.__disabled)}};_proAbstractPage.__doRefreshPage=_f;_proAbstractPage.__doChangeIndex=function(){this.__doRefreshPage();this.__doSyncBtnState();this._$dispatchEvent("onchange",{last:this.__last,total:this.__total,index:this.__index})};_proAbstractPage.__doSaveIndex=function(_index){_index=parseInt(_index);if(isNaN(_index)||this.__total==null)return!1;_index=Math.max(1,Math.min(_index,this.__total));this.__last=this.__index;this.__index=_index;return!0};_proAbstractPage.__doSaveTotal=function(_total){_total=parseInt(_total);if(isNaN(_total)||_total<1)return!1;this.__total=_total;return!0};_proAbstractPage.__onClick=function(_event,_flag){_v._$stopDefault(_event);var _element=_v._$getElement(_event);if(!_element||_e._$hasClassName(_element,this.__selected)||_e._$hasClassName(_element,this.__disabled))return;var _index=_element.innerText;switch(_flag){case 1:case-1:_index=this.__index+_flag;break;case 2:_index=this.__total;break;case-2:_index=1;break}this._$setIndex(_index)};_proAbstractPage._$getIndex=function(){return this.__index};_proAbstractPage._$setIndex=function(_index){var _oidx=this.__index;this.__doSaveIndex(_index);if(_oidx!=this.__index)this.__doChangeIndex();return this};_proAbstractPage._$getTotal=function(){return this.__total};_proAbstractPage._$setTotal=function(_total){if(this.__doSaveTotal(_total)&&this.__index!=null){this.__index=1;this.__doChangeIndex()}return this};_proAbstractPage._$updateTotal=function(_total){if(this.__doSaveTotal(_total)){this.__doRefreshPage();this.__doSyncBtnState()}return this};_proAbstractPage._$updatePage=function(_index,_total){if(!this.__doSaveTotal(_total)||!this.__doSaveIndex(_index))return this;this.__doChangeIndex();return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_u=_("nej.u"),_x=_("nej.x"),_p=_("nej.ut"),_proPage;if(!!_p._$$Page)return;_p._$$Page=NEJ.C();_proPage=_p._$$Page._$extend(_p._$$AbstractPage);_proPage.__init=function(){this.__supInit();var _node=_e._$create("span","zdot");_node.innerText="...";this.__ndot=[_node.cloneNode(true),_node]};_proPage.__destroy=function(){this.__supDestroy();this.__doRecycleDotNode()};_proPage.__doRecycleDotNode=function(){_e._$removeByEC(this.__ndot[0]);_e._$removeByEC(this.__ndot[1])};_proPage.__doRefreshPage=function(){this.__doRecycleDotNode();this.__doSetNodeIndex(this.__list[0],1);var _point=1;if(this.__index>1){var _length=this.__list.length,_count=Math.floor((_length-2)/2),_mxbeg=this.__total-_length+2,_start=Math.max(2,this.__index-_count);if(this.__total>=_length)_start=Math.min(_start,_mxbeg);if(_start>2)this.__list[0].insertAdjacentElement("afterEnd",this.__ndot[0]);for(var _index;;_point++){_index=_start+_point-1;if(_index>this.__index)break;this.__doSetNodeIndex(this.__list[_point],_index)}}if(this.__index<this.__total){var _index,_start=this.__index+1;for(var i=0,l=this.__list.length-2;;i++,_point++){_index=_start+i;if(_point>l||_index>this.__total)break;this.__doSetNodeIndex(this.__list[_point],_index)}if(_index<this.__total)this.__list[_point].insertAdjacentElement("beforeBegin",this.__ndot[1]);if(_index<=this.__total)this.__doSetNodeIndex(this.__list[_point++],this.__total)}for(var l=this.__list.length;_point<l;_point++)this.__doSetNodeIndex(this.__list[_point])};_e._$page=_x._$page=function(_parent,_options){var _id=_e._$id(_parent);if(!_id)return null;if(!_p._$api(_id,_p._$$Page)){_options=_options||{};var _list=!_options.clazz?_e._$getChildren(_id):_e._$getByClassName(_id,_options.clazz);_options.pbtn=_list.shift();_options.nbtn=_list.pop();_options.list=_list;delete _options.clazz}return _p._$api(_id,_p._$$Page,_options||_o)};_x.isChange=!0})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_e=_("nej.e"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ui"),_proPager,_seed_html;if(!!_p._$$Pager)return;_p._$$Pager=NEJ.C();_proPager=_p._$$Pager._$extend(_p._$$AbstractPager);_proPager.__reset=function(_options){this.__supReset(_options);this.__page=_t._$$Page._$allocate(this.__popt)};_proPager.__initNodeTemplate=function(){_seed_html=_e._$addNodeTemplate('<div class="'+this.__seed_css+'">'+this.__doGenPageListXhtml({number:4})+"</div>");this.__seed_html=_seed_html}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_u=_("nej.u"),_p=_("nej.ut"),_proListCache,_supListCache;if(!!_p._$$ListCache)return;_p._$$ListCache=NEJ.C();_proListCache=_p._$$ListCache._$extend(_p._$$Cache);_supListCache=_p._$$ListCache._$supro;_proListCache.__reset=function(_options){this.__supReset(_options);this.__key=_options.key||"id";this.__data=_options.data||_o;this.__doSwapCache(_options.id)};_proListCache.__doSwapCache=function(_id){var _cache;if(!!_id){_cache=this.__cache[_id];if(!_cache){_cache={};this.__cache[_id]=_cache}}_cache=_cache||this.__cache;_cache.hash=_cache.hash||{};this.__lspl=_cache};_proListCache.__doSaveItemToCache=function(_item,_lkey){_item=this.__doFormatItem(_item,_lkey)||_item;if(!_item)return null;var _key=_item[this.__key];if(_key!=null){var _itm=this.__getHash()[_key];if(!!_itm)_item=NEJ.X(_itm,_item);this.__getHash()[_key]=_item}delete _item.__dirty__;return _item};_proListCache.__doFormatItem=_f;_proListCache.__doUnshiftToList=function(_key,_item){if(!_item)return;if(!_u._$isArray(_item)){var _list=this._$getListInCache(_key),_item=this.__doSaveItemToCache(_item,_key);if(!!_item)_list.unshift(_item);return}_u._$reverseEach(_item,this.__doUnshiftToList._$bind(this,_key))};_proListCache._$setTotal=function(_key,_total){var _list=this._$getListInCache(_key);_list.length=Math.max(_list.length,_total);this._$setLoaded(_key);return this};_proListCache._$getTotal=function(_key){return this._$getListInCache(_key).length};_proListCache._$setLoaded=function(_key,_loaded){this._$getListInCache(_key).loaded=_loaded!=!1;return this};_proListCache._$setListInCache=function(_key,_list){this._$clearListInCache(_key);this.__getList({key:_key,offset:0,limit:_list.length+1},{list:_list,total:_list.length})};_proListCache._$getListInCache=function(){var _doFormatKey=function(_key){return(_key||"")+(!_key?"":"-")+"list"};return function(_key){var _key=_doFormatKey(_key),_list=this.__lspl[_key];if(!_list){_list=[];this.__lspl[_key]=_list}return _list}}();_proListCache.__getHash=function(){var _hash=this.__lspl.hash;if(!_hash){_hash={};this.__lspl.hash=_hash}return _hash};_proListCache._$pullRefresh=function(){var _doFormatKey=function(_options){return"r-"+_options.key};return function(_options){var _ropt=NEJ.X({},_options),_rkey=_doFormatKey(_ropt);if(!this.__doQueueRequest(_rkey,this._$dispatchEvent._$bind(this))){_ropt.rkey=_rkey;_ropt.onload=this.__pullRefresh._$bind(this,_ropt);this._$dispatchEvent("dopullrefresh",_ropt)}return this}}();_proListCache.__pullRefresh=function(_options,_list){this.__doUnshiftToList(_options.key,_list);this.__doCallbackRequest(_options.rkey,"onpullrefresh",_options)};_proListCache._$getList=function(){var _doFormatKey=function(_options){return"r-"+_options.key+"-"+_options.offset+"-"+_options.limit};return function(_options){_options=_options||_o;var _ropt={key:""+_options.key||"",ext:_options.ext||null,data:_options.data||null,offset:parseInt(_options.offset)||0,limit:parseInt(_options.limit)||0},_list=this._$getListInCache(_ropt.key);if(this.__hasFragment(_list,_ropt.offset,_ropt.limit)){this._$dispatchEvent("onlistload",_ropt);return this}var _rkey=_doFormatKey(_ropt);if(!this.__doQueueRequest(_rkey,this._$dispatchEvent._$bind(this))){_ropt.rkey=_rkey;_ropt.onload=this.__getList._$bind(this,_ropt);this._$dispatchEvent("doloadlist",_ropt)}return this}}();_proListCache.__getList=function(){var _doClear=function(_item,_index,_list){if(!!_item){return!0}_list.splice(_index,1)};return function(_options,_result){_options=_options||_o;var _key=_options.key,_offset=_options.offset,_chlist=this._$getListInCache(_key);var _list=_result||[];if(!_u._$isArray(_list)){_list=_result.result||_result.list||[];var _total=parseInt(_result.total);if(!isNaN(_total)||_total>_list.length){this._$setTotal(_key,_total)}}_u._$forEach(_list,function(_item,_index){_chlist[_offset+_index]=this.__doSaveItemToCache(_item,_key)},this);if(_list.length<_options.limit){this._$setLoaded(_key);_u._$reverseEach(_chlist,_doClear)}this.__doCallbackRequest(_options.rkey,"onlistload",_options)}}();_proListCache._$clearListInCache=function(){var _doClear=function(_item,_index,_list){_list.splice(_index,1)};return function(_key){var _list=this._$getListInCache(_key);_u._$reverseEach(_list,_doClear);this._$setLoaded(_key,!1);return this}}();_proListCache.__doCheckItemValidity=function(_item,_lkey){return!_item.__dirty__};_proListCache._$getItemInCache=function(_id){return this.__getHash()[_id]};_proListCache._$clearItemInCache=function(_id){var _item=this._$getItemInCache(_id);if(!!_item)_item.__dirty__=!0};_proListCache._$getItem=function(){var _doFormatKey=function(_options){return"r-"+_options.key+"-"+_options.id};return function(_options){_options=_options||_o;var _id=_options[this.__key],_ropt={id:_id,ext:_options.ext,data:_options.data||{},key:""+_options.key||""};_item=this._$getItemInCache(_id);_ropt.data[this.__key]=_id;if(!!_item&&this.__doCheckItemValidity(_item,_ropt.key)){this._$dispatchEvent("onitemload",_ropt);return this}var _rkey=_doFormatKey(_ropt);if(!this.__doQueueRequest(_rkey,this._$dispatchEvent._$bind(this))){_ropt.rkey=_rkey;_ropt.onload=this.__getItem._$bind(this,_ropt);this._$dispatchEvent("doloaditem",_ropt)}return this}}();_proListCache.__getItem=function(_options,_item){_options=_options||_o;this.__doSaveItemToCache(_item,_options.key);this.__doCallbackRequest(_options.rkey,"onitemload",_options)};_proListCache._$addItem=function(_options){_options=NEJ.X({},_options);_options.onload=this.__addItem._$bind(this,_options);this._$dispatchEvent("doadditem",_options)};_proListCache.__addItem=function(_options,_item){var _key=_options.key;_item=this.__doSaveItemToCache(_item,_key);if(!!_item){var _flag=0,_list=this._$getListInCache(_key);if(!_options.push){_flag=-1;var _offset=_options.offset||0;_list.splice(_offset,0,_item)}else if(_list.loaded){_flag=1;_list.push(_item)}else{_list.length++}}var _event={key:_key,flag:_flag,data:_item,action:"add",ext:_options.ext};this._$dispatchEvent("onitemadd",_event);return _event};_proListCache._$deleteItem=function(_options){_options=NEJ.X({},_options);_options.onload=this.__deleteItem._$bind(this,_options);this._$dispatchEvent("dodeleteitem",_options)};_proListCache.__deleteItem=function(_options,_isok){var _item,_key=_options.key;if(!!_isok){_item=this._$getItemInCache(_options.id)||null;var _id=_options.id,_pkey=this.__key,_list=this._$getListInCache(_key),_index=_u._$indexOf(_list,function(_itm){return!!_itm&&_itm[_pkey]==_id});if(_index>=0)_list.splice(_index,1)}var _event={key:_key,data:_item,action:"delete",ext:_options.ext};this._$dispatchEvent("onitemdelete",_event);return _event};_proListCache._$updateItem=function(_options){_options=NEJ.X({},_options);_options.onload=this.__updateItem._$bind(this,_options);this._$dispatchEvent("doupdateitem",_options)};_proListCache.__updateItem=function(_options,_item){var _key=_options.key;if(!!_item)_item=this.__doSaveItemToCache(_item,_key);var _event={key:_key,data:_item,action:"update",ext:_options.ext};this._$dispatchEvent("onitemupdate",_event);return _event}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_u=_("nej.u"),_p=_("nej.ut"),_proAbstractListCache,_supAbstractListCache;if(!!_p._$$AbstractListCache)return;_p._$$AbstractListCache=NEJ.C();_proAbstractListCache=_p._$$AbstractListCache._$extend(_p._$$ListCache);_supAbstractListCache=_p._$$AbstractListCache._$supro;_proAbstractListCache.__reset=function(_options){this.__supReset(_options);this._$batEvent({doloadlist:this.__doLoadList._$bind(this),doloaditem:this.__doLoadItem._$bind(this),doadditem:this.__doAddItem._$bind(this),dodeleteitem:this.__doDeleteItem._$bind(this),doupdateitem:this.__doUpdateItem._$bind(this),dopullrefresh:this.__doPullRefresh._$bind(this)})};_proAbstractListCache.__doLoadList=_f;_proAbstractListCache.__doPullRefresh=_f;_proAbstractListCache.__doLoadItem=_f;_proAbstractListCache.__doAddItem=_f;_proAbstractListCache.__doDeleteItem=_f;_proAbstractListCache.__doUpdateItem=_f})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_i=_("nej.ui"),_p=_("nej.ut"),_proListModule;if(!!_p._$$ListModule)return;_p._$$ListModule=NEJ.C();_proListModule=_p._$$ListModule._$extend(_p._$$Event);_proListModule.__reset=function(_options){this.__ropt={};this.__supReset(_options);this.__lbox=_e._$get(_options.parent);this.__iopt={parent:this.__lbox};this.__limit=parseInt(_options.limit)||10;this.__first=parseInt(_options.first)||this.__limit;this.__doResetTemplate(_options.item);this.__doResetCache(_options.cache||_o);this.__doResetPager(_options.pager||_o);this._$refresh()};_proListModule.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__doClearListBox();this.__supDestroy();if(this.__ropt.clear){this.__cache._$clearListInCache(this.__ropt.key)}this.__cache._$recycle();if(!!this.__pager){this.__pager._$recycle();delete this.__pager}delete this.__pkls;delete this.__popt;delete this.__pulling;delete this.__cache;delete this.__lbox;delete this.__ikls;delete this.__iopt;delete this.__ropt};_proListModule.__getItemBodyId=function(_id){return _id+""+_e._$getHtmlTemplateSeed()};_proListModule.__getPageInfo=function(_point,_offset,_limit,_length){var _result={index:1,total:1};if(_offset>=_point){_result.index=Math.floor((_offset-_point)/_limit)+2}if(_length>_point){_result.total=Math.ceil((_length-_point)/_limit)+1}return _result};_proListModule.__doResetJSTTemplate=function(_key){delete this.__ikls;this.__ikey=_key;this.__doInitDomEvent([[this.__lbox,"click",this.__onCheckAction._$bind(this)]])};_proListModule.__doResetTemplate=function(_item){if(_u._$isString(_item)){this.__doResetJSTTemplate(_item);return}NEJ.X(this.__iopt,_item);var _klass=this.__iopt.klass;delete this.__iopt.klass;if(_u._$isString(_klass)){this.__doResetJSTTemplate(_klass);return}delete this.__ikey;this.__ikls=_klass;this.__iopt.ondelete=this._$dispatchEvent._$bind(this,"ondelete");this.__iopt.onupdate=this._$dispatchEvent._$bind(this,"onupdate")};_proListModule.__doResetCache=function(_cache){var _klass=_cache.klass,_copt=NEJ.X({},_cache);this.__ropt.key=_copt.lkey;this.__ropt.data=_copt.data||{};this.__ropt.clear=!!_copt.clear;this.__iopt.pkey=_copt.key||"id";_copt.onlistload=this.__cbListLoad._$bind(this);_copt.onpullrefresh=this.__cbPullRefresh._$bind(this);if(!!_klass&&"onlistchange"in _klass){this.__doInitDomEvent([[_klass,"listchange",this.__cbListChange._$bind(this)]])}else{_copt.onitemadd=this.__cbItemAdd._$bind(this);_copt.onitemdelete=this.__cbItemDelete._$bind(this);_copt.onitemupdate=this.__cbItemUpdate._$bind(this)}this.__cache=(_klass||_p._$$ListCache)._$allocate(_copt);if(_cache.total!=null){this.__cache._$setTotal(this.__ropt.key,_cache.total)}if(!!_cache.list){this.__cache._$setListInCache(this.__ropt.key,_cache.list)}};_proListModule.__doResetPager=function(_pager){this.__pkls=_pager.klass||_i._$$Pager;this.__popt=NEJ.X({},_pager);delete this.__popt.klass};_proListModule.__doClearListBox=function(){this._$dispatchEvent("onbeforelistclear",{parent:this.__lbox});if(!!this.__items&&this.__items.length>0){this.__items=this.__ikls._$recycle(this.__items);delete this.__items}this.__lbox.innerHTML=""};_proListModule.__doRefreshByPager=function(){var _index=this.__popt.index||1;delete this.__popt.index;if(!!this.__pager){_index=this.__pager._$getIndex()}this.__doChangePage({last:_index,index:_index})};_proListModule.__doChangePage=function(_event){this._$dispatchEvent("onpagechange",_event)};_proListModule.__doChangeOffset=function(_offset){this.__ropt.offset=_offset;this.__doLoadList()};_proListModule.__doGenRequestOpt=function(_options){return _options};_proListModule.__doLoadList=function(){this.__doBeforeListLoad();var _data=this.__ropt.data;_data.offset=this.__ropt.offset;var _first=_data.offset==0;_data.total=_first;this.__ropt.limit=_first?this.__first:this.__limit;_data.limit=this.__ropt.limit;this.__cache._$getList(this.__doGenRequestOpt(NEJ.X({},this.__ropt)))};_proListModule.__cbListLoad=function(_options){if(_options.key!=this.__ropt.key||_options.offset!=this.__ropt.offset)return;this.__doBeforeListShow();var _list=this.__cache._$getListInCache(_options.key);if(!_list||!_list.length){this.__doShowEmpty();return}var _limit=_options.limit,_offset=_options.offset;if(this.__doBeforeListRender(_list,_offset,_limit))return;this._$dispatchEvent("onbeforelistrender",{list:_list,offset:_offset,parent:this.__lbox});if(!!this.__ikey){this.__iopt.xlist=_list;this.__iopt.beg=_offset;this.__iopt.end=Math.min(_list.length,_offset+_limit)-1;var _html=_e._$getHtmlTemplate(this.__ikey,this.__iopt);this.__doShowListByJST(_html)}else{this.__iopt.limit=_limit;this.__iopt.offset=_offset;var _items=_e._$getItemTemplate(_list,this.__ikls,this.__iopt);this.__doShowListByItem(_items)}this._$dispatchEvent("onafterlistrender",{list:_list,offset:_offset,parent:this.__lbox})};_proListModule.__cbPullRefresh=function(_options){if(!this.__pulling)return;delete this.__pulling;this.__doBeforeListShow("onafterpullrefresh");this._$refresh()};_proListModule.__doSyncPager=function(_index,_total){if(!!this.__pager){var _index2=this.__pager._$getIndex(),_total2=this.__pager._$getTotal();if(_index2>_total||_total!=_total2){this.__pager._$recycle();delete this.__pager;this.__doChangePage({last:_index2,index:Math.min(_index,_total)});return!0}}else{this.__popt.index=_index;this.__popt.total=_total;this.__pager=this.__pkls._$allocate(this.__popt);this.__pager._$setEvent("onchange",this.__doChangePage._$bind(this))}};_proListModule.__doFormatData=function(){var _seed=+(new Date);return function(_data){var _id=_data[this.__iopt.pkey];if(!_id){_data["dirty-data"]=!0;_data[this.__iopt.pkey]="dirty-"+_seed++}return _data}}();_proListModule.__doSplitDirty=function(_data){var _id=_data[this.__iopt.pkey];if(!!_data["dirty-data"]){delete _data["dirty-data"];delete _data[this.__iopt.pkey]}return _id};_proListModule.__doInsertOneItem=function(){var _doInsert=function(_pos,_body){this.__lbox.insertAdjacentElement(_pos,_body)};return function(_pos,_data){var _xlist=[_data];if(!!this.__ikey){this.__iopt.xlist=_xlist;this.__iopt.beg=0;this.__iopt.end=0;this.__doShowListByJST(_e._$getHtmlTemplate(this.__ikey,this.__iopt),_pos)}else{this.__iopt.limit=1;this.__iopt.offset=0;this.__iopt.parent=_doInsert._$bind(this,_pos);var _items=_e._$getItemTemplate(_xlist,this.__ikls,this.__iopt);this.__iopt.parent=this.__lbox;this.__doShowListByItem(_items)}}}();_proListModule.__doBeforeListLoad=_f;_proListModule.__doBeforeListShow=function(_name){var _event={parent:this.__lbox};this._$dispatchEvent(_name||"onafterlistload",_event);if(!_event.stopped){_e._$removeByEC(this.__ntip)}};_proListModule.__doBeforeListRender=_f;_proListModule.__doRenderMessage=function(_message,_pos){if(_u._$isString(_message)){if(!this.__ntip)this.__ntip=_e._$create("div");this.__ntip.innerHTML=_message}else{this.__ntip=_message}this.__lbox.insertAdjacentElement(_pos||"beforeEnd",this.__ntip)};_proListModule.__doShowMessage=function(_name,_default,_pos){var _event={parent:this.__lbox};this._$dispatchEvent(_name,_event);if(!_event.stopped){this.__doRenderMessage(_event.value||_default,_pos)}};_proListModule.__doShowEmpty=_f;_proListModule.__doShowListByJST=_f;_proListModule.__doShowListByItem=_f;_proListModule.__onCheckAction=function(){var _reg0=/^(?:delete|update)$/;return function(_event){var _node=_v._$getElement(_event,"d:action");if(!_node)return;var _action=_e._$dataset(_node,"action");if(!_reg0.test(_action))return;var _id=_e._$dataset(_node,"id");if(!_id)return;var _item=this.__cache._$getItemInCache(_id);if(!_item)return;_v._$stop(_event);this._$dispatchEvent("on"+_action,{data:_item,id:_item[this.__iopt.pkey],body:_e._$get(this.__getItemBodyId(_id))})}}();_proListModule.__cbItemAdd=_f;_proListModule.__doDeleteItem=function(_event){var _data=_event.data||{},_options={data:_data,key:this.__ropt.key,id:_data[this.__iopt.pkey]};this._$dispatchEvent("onbeforedelete",_options);this.__cache._$deleteItem(_options)};_proListModule.__cbItemDelete=_f;_proListModule.__doUpdateItem=function(_event){var _data=_event.data||{},_options={data:_data,key:this.__ropt.key};this._$dispatchEvent("onbeforeupdate",_options);this.__cache._$updateItem(_options)};_proListModule.__cbItemUpdate=_f;_proListModule.__doCheckResult=function(_event,_name){if(!_event.data){this._$dispatchEvent("onerror",_event);_event.stopped=!0}if(!_event.stopped){this._$dispatchEvent(_name,_event)}};_proListModule.__cbAppendList=_f;_proListModule.__cbListChange=function(_event){if(_event.key!=this.__ropt.key)return;switch(_event.action){case"add":this.__cbItemAdd(_event);break;case"delete":this.__cbItemDelete(_event);break;case"update":this.__cbItemUpdate(_event);break;case"refresh":this._$refresh();break;case"append":this.__cbAppendList(_event.offset,_event.limit);break}};_proListModule._$update=function(_item){this.__doUpdateItem({data:_item})};_proListModule._$delete=function(_item){this.__doDeleteItem({data:_item})};_proListModule._$add=function(_item){this.__cache._$addItem({data:_item,key:this.__ropt.key})};_proListModule._$cache=function(){return this.__cache};_proListModule._$unshift=function(_data){this.__doInsertOneItem("afterBegin",this.__doFormatData(_data));return this.__doSplitDirty(_data)};_proListModule._$append=function(_data){this.__doInsertOneItem("beforeEnd",this.__doFormatData(_data));return this.__doSplitDirty(_data)};_proListModule._$refresh=function(){this.__doClearListBox();this.__doRefreshByPager()};_proListModule._$pullRefresh=function(){if(!!this.__pulling)return;this.__pulling=!0;this.__doShowMessage("onbeforepullrefresh","列表刷新中...","afterBegin");this.__cache._$pullRefresh({key:this.__ropt.key,data:this.__ropt.data})};_proListModule._$getTotal=function(){return this.__cache._$getTotal(this.__ropt.key)}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var moduleUtil=_("pro.util.module");var tplEmpty='<div class="s-empty">{if face}<div class="f-ib face-${face}"></div>{/if}<div class="text">${text}</div></div>';var _html_seed=_e._$addHtmlTemplate(tplEmpty);moduleUtil.doShowEmpty=function(text,opt_face){return function(event){event.value=moduleUtil.showEmpty(text,opt_face)}};moduleUtil.showEmpty=function(text,opt_face){return _e._$getHtmlTemplate(_html_seed,{text:text,face:opt_face})};moduleUtil.showLoading=function(e){e.value='<div class="s-loading"><img src="'+gResUrlMap.loading_gif+'"> 列表加载中...</div>'};moduleUtil.showPullrefreshPlaceholder=function(e){e.value='<div class="s-loading"><img src="'+gResUrlMap.loading_gif+'"> 列表刷新中...</div>'}})();
(function(){var _=NEJ.P;var _j=_("nej.j");var _t=_("nej.ut");var _u=_("nej.u");var _pc=_("pro.cache");_pc._$$CacheList=NEJ.C();var p=_pc._$$CacheList._$extend(_t._$$AbstractListCache);p.__doLoadList=function(options){var key=options.key;var callback=options.onload;var ropt={type:"json",onload:this.__cbListLoad._$bind(this,key,callback)};if(options.data)ropt.query=_u._$object2query(this.__doGenRequestQueryOpt(options.data));$.get(this.__url,ropt.query,ropt.onload,ropt.type);this.__limit=options.limit};p.__doGenRequestQueryOpt=function(data){return{limit:data.limit,offset:data.offset}};p.__repairMissingListItem=function(list,neededCount){var missingCount=neededCount-list.length;if(list.length>0&&missingCount>0){while(missingCount--){list.push({entryID:_u._$randNumberString(9),status:1})}}};p.__cbListLoad=function(key,callback,json){this.__repairMissingListItem(json[1],this.__limit);callback(json[1])}})();
(function(){var _=NEJ.P;var _u=_("nej.u");var util=_("pro.module.article.util");util.nav=function(data){var isTopic=data.isTopic;var cid=data.entryID;var hashStr=location.href.slice(location.href.indexOf("#"));var prefix,hash;var queryIndex=hashStr.indexOf("?");if(queryIndex==-1){prefix=location.hash;hash={}}else{prefix=hashStr.slice(0,queryIndex);hash=_u._$query2object(hashStr.slice(queryIndex+1))}if(isTopic){hash.tid=data.topicId;delete hash.cid;prefix+="/special"}else if(typeof hash.id=="undefined"){hash.fid=data.sourceID}hash.cid=cid;location.hash=prefix+"?"+_u._$object2query(hash)}})();
(function(){var _=NEJ.P;var _i=_("nej.ui");var _v=_("nej.v");var _e=_("nej.e");var _pi=_("pro.ui");var articleUtil=_("pro.module.article.util");var util=_("pro.util");var ydAPI=_("yd.api");var _$$ArticleItem=_pi._$$ArticleItem=NEJ.C();var p=_$$ArticleItem._$extend(_i._$$ListItem);p.__initXGui=function(){this.__seed_html="tpl-articleItem"};p.__doRefresh=function(){var data=this._$getData();if(data.status===1){this.__body.innerHTML="";return}this.__body.innerHTML=_e._$getHtmlTemplate(this.__seed_html,data,{buildQuery:util.buildQuery});if(this._$getData().read=="read"){_e._$addClassName(this.__body,"m-article-item-read")}else{_e._$delClassName(this.__body,"m-article-item-read")}this.__doInitDomEvent([[this.__body,"click",this.__onArticleClick._$bind(this)],[_e._$getByClassName(this.__body,"j-toggle-fav")[0],"click",this.__toggleFav._$bind(this)]])};p.__initNode=function(){this.__body=_e._$html2node('<li class="m-article-item"></li>')};p.__onArticleClick=function(){var data=this._$getData();articleUtil.nav(data)};p.__toggleFav=function(e){_v._$stopBubble(e);var iconEl=_v._$getElement(e);var model=this._$getData();$.Topic("gaLogging").publish("article_star");ydAPI.toggleFav(model,function(data){$(iconEl).toggleClass("icon-star").toggleClass("icon-star-on");var text=data.state==="stared"?"收藏":"取消收藏";text+="成功";YD.popTip(text);var title=data.state!=="stared"?"收藏":"取消收藏";$(iconEl).parent().attr("title",title)})};p.__destroy=function(){_e._$delClassName(this.__body,"z-active");_e._$delClassName(this.__body,"m-article-item-read");this.__supDestroy()}})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_i=_("nej.ui"),_p=_("nej.ut"),_proListModuleWF,_supListModuleWF;if(!!_p._$$ListModuleWF)return;_p._$$ListModuleWF=NEJ.C();_proListModuleWF=_p._$$ListModuleWF._$extend(_p._$$ListModule);_supListModuleWF=_p._$$ListModuleWF._$supro;_proListModuleWF.__reset=function(_options){this.__doResetMoreBtn(_options.more);this.__sbody=_e._$get(_options.sbody);this.__doInitDomEvent([[this.__sbody,"scroll",this.__onCheckScroll._$bind(this)]]);var _delta=parseInt(_options.delta);if(isNaN(_delta))_delta=30;this.__delta=Math.max(0,_delta);var _count=parseInt(_options.count)||0;this.__count=Math.max(0,_count);var _number=parseInt(_options.number)||0;if(_number>1&&_number<=_count){this.__number=_number}this.__supReset(_options)};_proListModuleWF.__destroy=function(){this.__supDestroy();delete this.__nmore;delete this.__sbody;delete this.__endskr;delete this.__nexting};_proListModuleWF.__getPageInfo=function(_offset,_length){var _point=this.__first+(this.__count-1)*this.__limit,_limit=this.__count*this.__limit;return _supListModuleWF.__getPageInfo.call(this,_point,_offset,_limit,_length)};_proListModuleWF.__doResetMoreBtn=function(_more){this.__nmore=_e._$get(_more);this.__doInitDomEvent([[this.__nmore,"click",this._$next._$bind(this)]])};_proListModuleWF.__doCheckScroll=function(_element){if(this.__endskr||!_element)return;if(!_element.scrollHeight)_element=_e._$getPageBox();var _offset=_e._$offset(this.__lbox),_delta=_offset.y+this.__lbox.offsetHeight-_element.scrollTop-_element.clientHeight;if(_delta<=this.__delta){this._$next()}};_proListModuleWF.__onCheckScroll=function(_event){if(this.__endskr)return;this.__doCheckScroll(_v._$getElement(_event))};_proListModuleWF.__doChangePage=function(_event){_supListModuleWF.__doChangePage.apply(this,arguments);if(!_event.stopped){this.__doClearListBox();var _offset=0;if(_event.index>1){_offset=this.__first+((_event.index-1)*this.__count-1)*this.__limit}this.__offset=_offset;this._$next()}};_proListModuleWF.__doGenRequestOpt=function(_options){if(!!this.__number){var _delta=_options.offset>0?this.__limit:this.__first,_limit=_delta+this.__limit*(this.__number-1);this.__offset=_options.offset+_limit;_options.data.limit=_limit;_options.limit=_limit;delete this.__number}return _options};_proListModuleWF.__cbListLoad=function(_options){delete this.__nexting;_supListModuleWF.__cbListLoad.apply(this,arguments);this._$resize()};_proListModuleWF.__doBeforeListLoad=function(){this.__doShowMessage("onbeforelistload","列表加载中...");_e._$setStyle(this.__nmore,"display","none");_e._$setStyle(this.__popt.parent,"display","none")};_proListModuleWF.__doBeforeListRender=function(_list,_offset,_limit){var _length=_list.length,_ended=_list.loaded?_offset+_limit>=_length:_offset+_limit>_length;this.__offset=Math.min(this.__offset,_length);_e._$setStyle(this.__nmore,"display",_ended?"none":"");if(_ended)this.__endskr=!0;if(this.__count>0){var _info=this.__getPageInfo(_offset,_list.length);if(this.__doSyncPager(_info.index,_info.total))return!0;var _delta=this.__first-this.__limit,_number=this.__count*this.__limit;this.__endskr=(_offset+_limit-_delta)%_number==0||_ended;_e._$setStyle(this.__nmore,"display",this.__endskr?"none":"");_e._$setStyle(this.__popt.parent,"display",this.__endskr&&_info.total>1?"":"none")}};_proListModuleWF.__doShowEmpty=function(){this.__endskr=!0;this.__doShowMessage("onemptylist","没有列表数据！")};_proListModuleWF.__doShowListByJST=function(_html,_pos){this.__lbox.insertAdjacentHTML(_pos||"beforeEnd",_html)};_proListModuleWF.__doShowListByItem=function(_items){this.__items=this.__items||[];if(_u._$isArray(_items)){_r.push.apply(this.__items,_items)}else{this.__items.push(_items)}};_proListModuleWF.__cbItemAdd=function(_event){_e._$removeByEC(this.__ntip);this.__doCheckResult(_event,"onafteradd");var _flag=_event.flag;if(_event.stopped||!_flag)return;if(this.__count>0){this.__doRefreshByPager();return}this.__offset+=1;_flag==-1?this._$unshift(_event.data):this._$append(_event.data)};_proListModuleWF.__cbItemDelete=function(_event){this.__doCheckResult(_event,"onafterdelete");if(_event.stopped)return;if(this.__count>0){this.__doRefreshByPager();return}var _id=_event.data[this.__iopt.pkey];if(!!this.__items){var _item=_e._$getItemById(_id),_index=_u._$indexOf(this.__items,_item);if(_index>=0){this.__items.splice(_index,1);this.__offset-=1}if(!!_item)_item._$recycle()}else{var _node=_e._$get(this.__getItemBodyId(_id));if(!!_node)this.__offset-=1;_e._$remove(_node)}if(this.__offset<=0)this._$next()};_proListModuleWF.__cbItemUpdate=function(_event){this.__doCheckResult(_event,"onafterupdate");if(_event.stopped)return;var _id=_event.data[this.__iopt.pkey];if(!!this.__items){var _item=_e._$getItemById(_id);if(!!_item)_item._$refresh(_event.data)}else{var _node=_e._$get(_id+""+_e._$getHtmlTemplateSeed());if(!_node)return;var _list=this.__cache._$getListInCache(_event.key),_index=_u._$indexOf(_list,_event.data);if(_index<0)return;this.__iopt.list=_list;this.__iopt.beg=_index;this.__iopt.end=_index;var _html=_e._$getHtmlTemplate(this.__ikey,this.__iopt);_node.insertAdjacentHTML("afterEnd",_html);_e._$remove(_node)}};_proListModuleWF.__cbAppendList=function(_offset,_limit){};_proListModuleWF._$resize=function(){var _element=this.__sbody;if(!_element||this.__endskr)return;if(!_element.scrollHeight)_element=_e._$getPageBox();if(_element.scrollHeight<=_element.clientHeight){this.__doCheckScroll(this.__sbody)}};_proListModuleWF._$next=function(){if(!!this.__nexting)return;this.__nexting=!0;var _offset=this.__offset;this.__offset+=_offset==0?this.__first:this.__limit;this.__doChangeOffset(_offset)}})();
(function(){var _=NEJ.P;var _t=_("nej.ut");var _e=_("nej.e");var _pm=_("pro.module");if(!!_pm._$$ListModuleWF)return;_pm._$$ListModuleWF=NEJ.C();var p=_pm._$$ListModuleWF._$extend(_t._$$ListModuleWF);p.__reset=function(options){this._$batEvent({on_item_selected:this.__onItemSelected._$bind(this)});this.__supReset(options)};p.__onItemSelected=function(id){this.__lastSelectedItem&&_e._$delClassName(this.__lastSelectedItem.__body,"z-active");var item=_e._$getItemById(id);if(item)_e._$addClassName(item.__body,"z-active");this.__lastSelectedItem=item}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _pm=_("pro.module");if(_pm._$$ArticleListModuleWF)return;_pm._$$ArticleListModuleWF=NEJ.C();var p=_pm._$$ArticleListModuleWF._$extend(_pm._$$ListModuleWF);p.__onItemSelected=function(id){this.__lastSelectedItem&&_e._$delClassName(this.__lastSelectedItem.__body,"z-active");var item=_e._$getItemById(id);if(item){if(item._$getData().read!=="read"){dispatcher._$message({to:"/!",mode:0,data:{type:"updateUnread",data:{sourceID:item._$getData().sourceID}}})}_e._$addClassName(item.__body,"z-active");_e._$addClassName(item.__body,"m-article-item-read");item._$getData().read="read"}this.__lastSelectedItem=item}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _u=_("nej.u");var _v=_("nej.v");var _pm=_("pro.module");var _pi=_("pro.ui");var moduleUtil=_("pro.util.module");if(_pm._$$ArticleList)return;_pm._$$ArticleList=NEJ.C();var p=_pm._$$ArticleList._$extend(_pm._$$Module);p.__doBuild=function(){this.__body=_e._$html2node(_e._$getTextTemplate("tpl-articleList"));this.__mopt={limit:24,parent:this.__body,sbody:_e._$get("articleList"),delta:30,item:{klass:_pi._$$ArticleItem},cache:{key:"entryID"},onbeforelistload:moduleUtil.showLoading,onafterlistload:this.__onAfterListLoad._$bind(this),onbeforepullrefresh:moduleUtil.showPullrefreshPlaceholder}};p.__subscribeGetItem=function(obj){this.__articleCid=obj.data.cid;this.__getItemRespondTo=obj.from;this.__dispatchItemToArticle()};p.__reset=function(options){this.__supReset(options);this.__alignHeight();this.__alignHeightThrottled=underscore.throttle(this.__alignHeight._$bind(this),100)._$bind(this);dispatcher._$subscribe("/?/article","getItem",this.__subscribeGetItem._$bind(this))};p.__destroy=function(options){this.__supDestroy(options);dispatcher._$unsubscribe("/?/article","getItem",this.__subscribeGetItem._$bind(this))};p.__onAfterListLoad=function(){this.__listReady=true;this.__dispatchItemToArticle()};p.__dispatchItemToArticle=function(){if(!this.__listReady||!this.__articleCid)return;var to=this.__getItemRespondTo;var cache=this.__list.__cache;cache._$setEvent("onitemload",function(ropt){var item=cache._$getItemInCache(ropt.id);dispatcher._$message({to:to,data:{type:"item",item:item}})});cache._$getItem({entryID:this.__articleCid})};p.__onMessage=function(payload){var data=payload.data;if(data.type=="pullrefresh"){this.__mopt.sbody.scrollTop=0;this.__list.__endskr=false;this.__list._$pullRefresh()}};p.__alignHeight=function(){_e._$get("articleList").style.height=_e._$getPageBox().clientHeight-40+"px"};p.__onRefresh=function(options){this.__onArticleLoading();var self=this;var param=options.param;var id=param.tid||param.id;var cid=param.cid;var isLikeSource=id=="7842fc04461b4253ba8c89e37a178700_1";var isFav=id.indexOf("__fav__")==0;this.__articleCid=null;this.__supOnRefresh(options);if(isLikeSource&&!cid||this.__lastId!==id){this.__list&&this.__list._$recycle();this.__listReady=false;this.__mopt.onafterlistrender=function(options){if(options.offset>0)return;if(cid){this._$dispatchEvent("on_item_selected",cid)}else{if(this.__items.length==0)return;var firstItemId=this.__items[0]._$getId();var firstItemFId=this.__items[0]._$getData().sourceID;var connector=location.href.indexOf("?")>-1?"&":"?";var obj={cid:firstItemId};if(isFav)obj.fid=firstItemFId;location.replace(location.href+connector+_u._$object2query(obj))}};if(isLikeSource)this.__mopt.cache.clear=true;this.__mopt.onemptylist=this.__onemptylist._$bind(this);this.__list=_pm._$$ArticleListModuleWF._$allocate(this.__mopt)}else if(cid){this.__list._$dispatchEvent("on_item_selected",cid)}this.__lastId=id;this.__dispatcher._$apply("/?/article?"+_u._$object2query(param))};p.__onArticleLoading=function(){this.__articleContainer=_e._$getByClassName(document.body,"g-mn62")[0];this.__loading=_e._$getByClassName(this.__articleContainer,"m-loading")[0];if(!this.__loading){var _html='<div class="m-loading"><img src="/news-reader/app/images/common/loading.gif"> 文章加载中...</div>';this.__loading=_e._$html2node(_html);this.__loading.style.height=this.__articleContainer.style.height;this.__articleContainer.appendChild(this.__loading)}else{this.__loading.style.height=this.__articleContainer.style.height;this.__loading.style.display="block"}};p.__removeloading=function(){if(this.__loading){this.__loading.style.display="none"}};p.__onemptylist=function(e){this.__removeloading();var listModule=this.__list;var list=listModule.__cache._$getListInCache(listModule.__ropt.key);var func=moduleUtil.doShowEmpty(this.__mopt.emptyText,"empty");if(list&&list.unsupported){func=moduleUtil.doShowEmpty('该资讯源暂不支持在web上阅读哦<br />欢迎下载<a href="/client" target="_blank">安装移动客户端</a>后在Pad或手机上阅读',"unsupported")}func(e)};p.__onShow=function(options){_v._$addEvent(window,"resize",this.__alignHeightThrottled);this.__supOnShow(options)};p.__onHide=function(options){_v._$delEvent(window,"resize",this.__alignHeightThrottled);this.__list._$recycle();this.__list=null;this.__lastId=null;this.__dispatcher._$hide("/?/article");this.__supOnHide(options)}})();
(function(){var _=NEJ.P;var _pi=_("pro.ui");var _pu=_("pro.util");var ydErrors=_("yd.errors");var ydAPI=_("yd.api");var xhr=_("pro.util.xhr");_pu.isServerError=function(res){return res.indexOf("_yd_error_page_")!=-1};_pu.showServerError=function(){_pi._$$Dialog._$allocate({mask:true,title:ydErrors.ERROR_UNKNOWN.title,body:ydErrors.ERROR_UNKNOWN.message})._$show()};xhr.toggleSubscribe=function(target,data,cb){if(target.active)return;target.active=true;var operation=data.subscribed?"delete":"addSub";ydAPI.toggleSubscribe(operation,{id:data.sourceUuid||data.id},function(){data.subscribed=!data.subscribed;var text=(data.subscribed?"取消":"添加")+"订阅";var message=(data.subscribed?"添加":"取消")+"订阅成功";YD.popTip(message);if(cb){cb(data)}else{$(target).text(text).toggleClass("btn-primary")}}).always(function(){target.active=false})}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _pm=_("pro.module");var _pu=_("pro.util");var ydAPI=_("yd.api");if(_pm._$$Comment)return;_pm._$$Comment=NEJ.C();var p=_pm._$$Comment._$extend(_pm._$$Module);var seed_html='<form class="m-comment"><div class="arrow"></div><textarea name="content" data-min-length="1" data-max-length="500"></textarea><div class="footer"><p class="js-nej-er f-fl"></p><button class="btn j-cancel" type="button">取消</button><input type="submit" class="btn btn-primary" value="评论"></div></form>';p.__reset=function(options){this.__supReset(options);this.__doInitDomEvent([[_e._$getByClassName(this.__body,"j-cancel")[0],"click",this._$remove._$bind(this)],[this.__textarea,"focus",this.__ontextareafocus._$bind(this)]]);this.__initholder()};p._$remove=function(){_e._$removeByEC(this.__body);this._$dispatchEvent("onbeforeremove");this._$recycle()};p._$appendTo=function(parent,options){this.__data=options;parent.appendChild(this.__body);if(options.focus!==false){this._$focus()}$(".j-cancel",this.__body).toggle(options.collapsible!==false)};p._$focus=function(){var self=this;setTimeout(function(){self.__textarea.focus()},20)};p.__ontextareafocus=function(){if(!GUser.userId){return login163()}};p.__initholder=function(){if(!GUser.userId){_e._$attr(this.__textarea,"placeholder","请登录后评论")}};p.__doBuild=function(){var form=this.__body=_e._$html2node(seed_html);this.__form=_pu._$$WebForm._$allocate({form:form,message:{"content-4":"最多500字","content-5":"评论不能为空"}});$(form).submit(this.__submit._$bind(this));this.__textarea=this.__body.getElementsByTagName("textarea")[0]};p.__submit=function(e){if(!GUser.userId){return login163()}if(this.__form._$checkValidity()){var data=underscore.extend({type:0,operation:"add"},this.__data,this.__form._$data());dispatcher._$message({to:"/?/article_comment_list",mode:0,data:{type:"insert",data:data}});this.__textarea.value="";if(this.__data.collapsible!==false){this._$remove()}}return false}})();
(function(){var _=NEJ.P;var _e=_("nej.e");var _pm=_("pro.module");var _pu=_("pro.util");if(_pm._$$Reply)return;_pm._$$Reply=NEJ.C();var p=_pm._$$Reply._$extend(_pm._$$Comment);var seed_html='<form class="m-comment m-reply"><div class="arrow"></div><div class="reply-header"><small><span class="j-replyTo"></span></small></div><textarea name="content" data-min-length="1" data-max-length="500"></textarea><div class="footer"><p class="js-nej-er f-fl"></p><button class="btn j-cancel" type="button">取消</button><input class="btn btn-primary" type="submit" value="回复"></div></form>';p.__doBuild=function(){var form=this.__body=_e._$html2node(seed_html);this.__form=_pu._$$WebForm._$allocate({form:form,message:{"content-4":"最多500字","content-5":"回复不能为空"}});$(form).submit(this.__submit._$bind(this));this.__textarea=this.__body.getElementsByTagName("textarea")[0]};p._$appendTo=function(parent,options){this.constructor._$supro._$appendTo.apply(this,arguments);if(options.type){$(_e._$getByClassName(this.__body,"j-replyTo")[0]).text("回复 "+options.replyTo+":");_e._$attr(this.__textarea,"placeholder","")}else{_e._$attr(this.__textarea,"placeholder","回复 "+options.replyTo+":");$(_e._$getByClassName(this.__body,"j-replyTo")[0]).text("")}};p.__submit=function(e){if(this.__form._$checkValidity()){var data=underscore.extend({operation:"reply"},underscore.pick(this.__data,"id","cid","type"),this.__form._$data());dispatcher._$message({to:this.__data.targetUMI,mode:0,data:{type:"insert",data:data}});this.__textarea.value="";this._$remove()}return false}})();
(function(){var _=NEJ.P;var _p=_("nej.ui");var _e=_("nej.e");var layer=_("pro.ui.layer");var _pm=_("pro.module");layer._$$ReplyLayer=NEJ.C();var p=layer._$$ReplyLayer._$extend(_p._$$Layer);var _seed_css=_e._$pushCSSText(".#<uispace>{position:absolute;z-index:2;left:232px;top:0}.#<uispace> .m-comment{ padding: 10px 20px; border: 1px solid #e6e6e6;background: #f5f5f5;-webkit-box-shadow: -2px 0 2px 0 #e6e6e6;-moz-box-shadow: -2px 0 2px 0 #e6e6e6;box-shadow: -2px 0 2px 0 #e6e6e6;}.#<uispace> .m-comment textarea{width:300px}.#<uispace> .m-reply{left:0;width:312px;}.#<uispace> .m-comment .arrow{left:-6px;top:95px;-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);background: #f5f5f5;}");p.__reset=function(options){this.__supReset(options);this.__data=options;var replyInstance=nej.ut._$api("sourceCommentList",_pm._$$Reply,{});replyInstance._$appendTo(this.__body,this.__data)};p.__initXGui=function(){this.__seed_css=_seed_css}})();
(function(){var _=NEJ.P;var _i=_("nej.ui");var _v=_("nej.v");var _e=_("nej.e");var _pi=_("pro.ui");var util=_("pro.util");var layer=_("pro.ui.layer");var _$$SourceCommentItem=_pi._$$SourceCommentItem=NEJ.C();var p=_$$SourceCommentItem._$extend(_i._$$ListItem);p.__reset=function(options){this.__fid=options.fid;this.__supReset(options);this.__doInitDomEvent([[_e._$getByClassName(this.__body,"j-reply")[0],"click",this.__onReply._$bind(this)],[_e._$getByClassName(this.__body,"j-del")[0],"click",this.__onDelete._$bind(this)]])};p.__initXGui=function(){this.__seed_html="tpl-source-comment-item"};p.__doRefresh=function(){this.__body.innerHTML=_e._$getHtmlTemplate(this.__seed_html,this.__data,{buildQuery:util.buildQuery})};p.__initNode=function(){this.__body=_e._$html2node('<li class="m-comment-item m-comment-item-source"></li>')};p.__onReply=function(e){if(!GUser.userId)return login163();var el=_v._$getElement(e);var replyLayer=layer._$$ReplyLayer._$allocate({type:1,id:this.__fid,cid:this._$getId(),replyTo:this._$getData().username,targetUMI:"/?/source_comment_list",parent:document.body});var offset=_e._$offset(el);var pageBox=_e._$getPageBox();var layerHeight=replyLayer._$getBody().offsetHeight;var top=Math.min(pageBox.clientHeight-layerHeight,offset.y-$(".g-sd61")[0].scrollTop-layerHeight/2);replyLayer._$setPosition({top:top})}})();
(function(){var _=NEJ.P;var _pc=_("pro.cache");var ydAPI=_("yd.api");var _u=_("nej.u");_pc._$$CommentList=NEJ.C();var p=_pc._$$CommentList._$extend(_pc._$$CacheList);p.__reset=function(options){this.__supReset(options);this.__url="/snsComment.do?operation=get"};p.__doGenRequestQueryOpt=function(options){return{id:options.id,type:options.type,page:options.offset/options.limit+1,pageSize:10}};p.__cbListLoad=function(key,callback,json){this._$setTotal(key,json.totalCount);callback(json.data)};p.__doDeleteItem=function(options){ydAPI.delComment({id:this.__data.id,cid:options.id,type:options.data.type},function(){options.onload(true)}).fail(function(){options.onload(false)})};p.__doAddItem=function(options){ydAPI.comment(options.data,function(reply){options.onload(reply.data)})};p.__deleteItem=function(_options,_isok){var _item,_key=_options.key;if(!!_isok){_item=this._$getItemInCache(_options.id)||null;var _id=_options.id,_pkey=this.__key,_list=this._$getListInCache(_key),_index=_u._$indexOf(_list,function(_itm){return!!_itm&&_itm[_pkey]==_id});if(_index>=0)_list.splice(_index,1)}var _event={key:_key,data:_item,action:"delete",id:_options.id,ext:_options.ext};this._$dispatchEvent("onitemdelete",_event);return _event}})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_u=_("nej.u"),_e=_("nej.e"),_p=_("nej.ut"),_proListModulePG,_supListModulePG;if(!!_p._$$ListModulePG)return;_p._$$ListModulePG=NEJ.C();_proListModulePG=_p._$$ListModulePG._$extend(_p._$$ListModule);_supListModulePG=_p._$$ListModulePG._$supro;_proListModulePG.__getPageInfo=function(_offset,_length){return _supListModulePG.__getPageInfo.call(this,this.__first,_offset,this.__limit,_length)};_proListModulePG.__getOffsetByIndex=function(_index){var _offset=0;if(_index>1)_offset=this.__first+(_index-2)*this.__limit;return _offset};_proListModulePG.__doChangePage=function(_event){_supListModulePG.__doChangePage.apply(this,arguments);if(!_event.stopped){this.__doChangeOffset(this.__getOffsetByIndex(_event.index))}};_proListModulePG.__doBeforeListLoad=function(){this.__doClearListBox();this.__doShowMessage("onbeforelistload","列表加载中...");_e._$setStyle(this.__popt.parent,"display","none")};_proListModulePG.__doBeforeListShow=function(){_supListModulePG.__doBeforeListShow.apply(this,arguments);this.__doClearListBox()};_proListModulePG.__doBeforeListRender=function(_list,_offset,_limit){var _info=this.__getPageInfo(_offset,_list.length);if(this.__doSyncPager(_info.index,_info.total))return!0;_e._$setStyle(this.__popt.parent,"display",_info.total>1?"":"none")};_proListModulePG.__doShowEmpty=function(){this.__doShowMessage("onemptylist","没有列表数据！")};_proListModulePG.__doRenderMessage=function(_message,_pos){if(!_pos){this.__lbox.innerHTML=_message;return}_supListModulePG.__doRenderMessage.apply(this,arguments)};_proListModulePG.__doShowListByJST=function(_html){this.__lbox.innerHTML=_html};_proListModulePG.__doShowListByItem=function(_items){this.__items=_items};_proListModulePG.__cbItemAdd=function(_event){this.__doCheckResult(_event,"onafteradd");if(!_event.stopped)this._$refresh()};_proListModulePG.__cbItemDelete=function(_event){this.__doCheckResult(_event,"onafterdelete");if(!_event.stopped)this._$refresh()};_proListModulePG.__cbItemUpdate=function(_event){this.__doCheckResult(_event,"onafterupdate");if(!_event.stopped)this._$refresh()};_proListModulePG.__cbAppendList=function(_offset,_limit){var _index=1;if(!!this.__pager){_index=this.__pager._$getIndex()}var _beg=this.__getOffsetByIndex(_index),_end=_beg+(_index>1?this.__limit:this.__first);if(_offset>=_end&&!!this.__pager){var _info=this.__getPageInfo(0,this._$getTotal());this.__pager._$updateTotal(_info.total);_e._$setStyle(this.__popt.parent,"display",_info.total>1?"":"none")}else{this._$refresh()}}})();
(function(){var _=NEJ.P;var _pc=_("pro.cache");var _u=_("nej.u");_pc._$$ArticleListBase=NEJ.C();var p=_pc._$$ArticleListBase._$extend(_pc._$$CacheList);p.__init=function(){this.__supInit();this._$batEvent({dopullrefresh:this.__doPullRefresh._$bind(this)})};p.__doPullRefresh=function(options){this.__doLoadList(options)};p.__cbListLoad=function(key,callback,json){if(!json[0].more)this._$setLoaded(key);_pc._$$ArticleListBase._$supro.__cbListLoad.apply(this,arguments)};p.__pullRefresh=function(_options,_list){this._$clearListInCache(_options.key);this._$setLoaded(_options.key,false);_pc._$$ArticleListBase._$supro.__pullRefresh.apply(this,arguments)}})();
(function(){var _=NEJ.P;var _pc=_("pro.cache");_pc._$$Source=NEJ.C();var p=_pc._$$Source._$extend(_pc._$$CacheKey);p.__reset=function(options){this.__url="/newsReader.do?operation=detail";this.__supReset(options)};p.__doGenRequestQueryOpt=function(options){return{id:options.key}}})();
(function(){var _=NEJ.P;var _pc=_("pro.cache");_pc._$$ArticleList=NEJ.C();var p=_pc._$$ArticleList._$extend(_pc._$$ArticleListBase);p.__reset=function(options){this.__supReset(options);this.__url="/source.do?operation=queryContentList";var id=options.data.id;var type=id[id.length-1]=="2"?"video":"other";this.__nextKey=type==="video"?"page":"pageToken";this.__lkey=options.lkey;this.__resetNextToken()};p.__resetNextToken=function(){this.__pageToken=this.__nextKey==="page"?1:""};p.__doGenRequestQueryOpt=function(options){var data={id:this.__data.id};var cachedNextPageToken=this._$getListInCache(this.__lkey).nextPageToken;if(typeof cachedNextPageToken!=="undefined"&&this.__pageToken===""){this.__pageToken=cachedNextPageToken}data[this.__nextKey]=this.__pageToken;if(options.topicId)data.topicId=options.topicId;return data};p.__cbListLoad=function(key,callback,json){if(this.__nextKey==="pageToken"){this._$getListInCache(key).nextPageToken=json[0].nextPageToken}if(this.__nextKey==="page")this.__pageToken++;else this.__pageToken=json[0].nextPageToken;if(json[0].unsupported)this._$getListInCache(key).unsupported=true;_pc._$$ArticleList._$supro.__cbListLoad.apply(this,arguments)};p.__doPullRefresh=function(){this._$getListInCache(this.__lkey).nextPageToken="";this.__resetNextToken();_pc._$$ArticleList._$supro.__doPullRefresh.apply(this,arguments)}})();
(function(){var o=NEJ.O,u=NEJ.P("nej.u"),j=NEJ.P("nej.j");j._$cookie=function(){var _date=new Date,_crut=+_date,_days=864e5;var _getcookie=function(_name){var _cookie=document.cookie,_search="\\b"+_name+"=",_index1=_cookie.search(_search);if(_index1<0)return"";_index1+=_search.length-2;var _index2=_cookie.indexOf(";",_index1);if(_index2<0)_index2=_cookie.length;return _cookie.substring(_index1,_index2)||""};return function(_name,_data){if(_data===undefined)return _getcookie(_name);if(u._$isString(_data)){if(!!_data){document.cookie=_name+"="+_data+";";return _data}_data={expires:-100}}_data=_data||o;var _cookie=_name+"="+(_data.value||"")+";";delete _data.value;if(_data.expires!==undefined){_date.setTime(_crut+_data.expires*_days);_data.expires=_date.toGMTString()}_cookie+=u._$object2string(_data,";");document.cookie=_cookie}}()})();
(function(){var _=NEJ.P;var _pc=_("pro.cache");var ydAPI=_("yd.api");var _u=_("nej.u");_pc._$$SubscribeList=NEJ.C();var p=_pc._$$SubscribeList._$extend(_pc._$$CacheList);p.__reset=function(options){this.__url="/mysubs.do?operation=listSource-j";this.__supReset(options);this.__page=0};p.__cbListLoad=function(key,callback,json){if(!json.moreSubs)this._$setLoaded(key);callback(json.subs)};p.__doDeleteItem=function(options){ydAPI.toggleSubscribe("delete",{id:options.id},function(){options.onload(true)})};p.__doGenRequestQueryOpt=function(options){return{page:++this.__page}};p.__doAddItem=function(options){ydAPI.toggleSubscribe("addSub",{id:options.data.sourceID,customUrl:options.data.customUrl||""},function(){options.onload(options.data)})};p.__getList=function(_options,_result){_options=_options||NEJ.O;var _key=_options.key,_offset=_options.offset,_chlist=this._$getListInCache(_key);var _list=_result||[];_u._$forEach(_list,function(_item,_index){_chlist[_offset+_index]=this.__doSaveItemToCache(_item,_key)},this);this.__doCallbackRequest(_options.rkey,"onlistload",_options)}})()